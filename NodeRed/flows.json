[{"id":"7303a768.70b7a8","type":"tab","label":"Hausautomation","disabled":false,"info":""},{"id":"66e4af74.b6da2","type":"tab","label":"Dashboard","disabled":false,"info":""},{"id":"bbfff52d.d471d8","type":"tab","label":"Szenen","disabled":false,"info":""},{"id":"6715eb60.6ca494","type":"tab","label":"Frank","disabled":false,"info":""},{"id":"de80a1bf.054a4","type":"tab","label":"Anwesendheitssimulation","disabled":false,"info":""},{"id":"259c4f3c.ca9f9","type":"tab","label":"Flo","disabled":false,"info":""},{"id":"8e49a2eb.1c1a3","type":"tab","label":"Snippets","disabled":false,"info":""},{"id":"85faa65c.d841d8","type":"subflow","name":"WoZiJal2","info":"","category":"","in":[{"x":40,"y":260,"wires":[{"id":"e71ade94.3f5de"}]}],"out":[{"x":1140,"y":100,"wires":[{"id":"ae874e40.79b69","port":0}]},{"x":1160,"y":140,"wires":[{"id":"ebb9177a.a6f708","port":0}]},{"x":1160,"y":180,"wires":[{"id":"f8772a80.027148","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"56300865.a37df8","type":"subflow","name":"WoZiJal1","info":"","category":"","in":[{"x":40,"y":80,"wires":[{"id":"ea3b5560.9fe538"}]}],"out":[{"x":1160,"y":160,"wires":[{"id":"6fa08687.92c508","port":0}]},{"x":1180,"y":200,"wires":[{"id":"a556f845.3a2db8","port":0}]},{"x":1180,"y":240,"wires":[{"id":"e899ff1e.87358","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"2af482f3.53472e","type":"subflow","name":"WoZiRoll2","info":"","category":"","in":[{"x":40,"y":260,"wires":[{"id":"c4b85d7a.cbba7"}]}],"out":[{"x":1180,"y":100,"wires":[{"id":"b20bf14a.45b01","port":0}]},{"x":1180,"y":140,"wires":[{"id":"928249f6.b5d738","port":0}]},{"x":1200,"y":180,"wires":[{"id":"dbada083.3ed5d","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"adeaed83.946a8","type":"subflow","name":"WoZiRoll1","info":"","category":"","in":[{"x":40,"y":80,"wires":[{"id":"cfcfe82e.14da18"}]}],"out":[{"x":1180,"y":160,"wires":[{"id":"c0c3a1c3.77e96","port":0}]},{"x":1180,"y":200,"wires":[{"id":"15bee5b7.eb078a","port":0}]},{"x":1200,"y":240,"wires":[{"id":"efd4066.354a3f8","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"3e8cc585.ba24ea","type":"subflow","name":"JoZiRoll","info":"","category":"","in":[{"x":40,"y":260,"wires":[{"id":"f9713f60.51c1f"}]}],"out":[{"x":1160,"y":100,"wires":[{"id":"b0f6adf7.ef9a9","port":0}]},{"x":1180,"y":140,"wires":[{"id":"2f1aae5a.30acf2","port":0}]},{"x":1180,"y":180,"wires":[{"id":"b343e18b.b4f4d","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"fb38554.2fddea8","type":"subflow","name":"SchlaZiRoll2","info":"","category":"","in":[{"x":40,"y":80,"wires":[{"id":"8715a84c.ca4228"}]}],"out":[{"x":1180,"y":160,"wires":[{"id":"8114e5b3.b34e88","port":0}]},{"x":1200,"y":200,"wires":[{"id":"821cb546.6cf288","port":0}]},{"x":1200,"y":240,"wires":[{"id":"a1ffc706.642558","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"ace6de74.2173f","type":"subflow","name":"SchlaZiRoll1","info":"","category":"","in":[{"x":40,"y":260,"wires":[{"id":"db8dfbb5.178588"}]}],"out":[{"x":1180,"y":100,"wires":[{"id":"c5fa5f79.77352","port":0}]},{"x":1200,"y":140,"wires":[{"id":"8e92e7f5.5e50a8","port":0}]},{"x":1200,"y":180,"wires":[{"id":"b11ef306.c0a7","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"af6099cd.1244c8","type":"subflow","name":"FloZiRoll","info":"","category":"","in":[{"x":40,"y":80,"wires":[{"id":"92d979d6.8147f8"}]}],"out":[{"x":1180,"y":160,"wires":[{"id":"c87a0725.f10e38","port":0}]},{"x":1180,"y":200,"wires":[{"id":"f8652166.2313d","port":0}]},{"x":1180,"y":240,"wires":[{"id":"fa5c0fff.e7d5c","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"1a552cef.53ca43","type":"subflow","name":"BueroRoll","info":"","category":"","in":[{"x":40,"y":260,"wires":[{"id":"932d0b7f.c9aa58"}]}],"out":[{"x":1180,"y":100,"wires":[{"id":"f912c6ba.7b2728","port":0}]},{"x":1180,"y":140,"wires":[{"id":"382d5894.e2d4f8","port":0}]},{"x":1180,"y":180,"wires":[{"id":"8b32262a.31a2c8","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"f6b971b2.d9803","type":"subflow","name":"KlaZiRoll1","info":"","category":"","in":[{"x":40,"y":80,"wires":[{"id":"5450ebb0.0bfe54"}]}],"out":[{"x":1180,"y":160,"wires":[{"id":"22d43971.da4776","port":0}]},{"x":1180,"y":200,"wires":[{"id":"3d3201eb.f9608e","port":0}]},{"x":1200,"y":240,"wires":[{"id":"ea7d158a.bcd738","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"b70a7c65.a34e1","type":"subflow","name":"KlaZiRoll2","info":"","category":"","in":[{"x":40,"y":260,"wires":[{"id":"2fa2a78f.9676c8"}]}],"out":[{"x":1180,"y":100,"wires":[{"id":"1988a066.e8888","port":0}]},{"x":1180,"y":140,"wires":[{"id":"a41b9386.f091","port":0}]},{"x":1200,"y":180,"wires":[{"id":"7ed95600.f89878","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"c4c66a25.1c39c8","type":"subflow","name":"Wetter","info":"Wandelt Anfragen an OpenWeatherApi um und führt die Ergebnisse an die Ausgänge wie folgt:\n\n * 1 Temperatur\n * 2 Maximale Temperatur\n * 3 Minimale Temperatur\n * 4 Wetter (z.B. clouds, sunny, etc.)\n * 5 Icon (01d, 04n, etc.)\n * 6 Wolken (0 - 100)","category":"","in":[{"x":40,"y":140,"wires":[{"id":"c2dcc2f0.5b1b8"}]}],"out":[{"x":600,"y":40,"wires":[{"id":"a9569008.cd5ee","port":0}]},{"x":600,"y":80,"wires":[{"id":"4dcf564d.3c9358","port":0}]},{"x":600,"y":120,"wires":[{"id":"14e5b3e1.e32a3c","port":0}]},{"x":600,"y":160,"wires":[{"id":"27d50cba.0e3c24","port":0}]},{"x":600,"y":200,"wires":[{"id":"ac78e2f1.7cf5f","port":0}]},{"x":600,"y":240,"wires":[{"id":"8fb61455.400f58","port":0}]}],"env":[],"color":"#DDAA99","outputLabels":["Temp","Temp_max","Temp_min","Wetter","Icon","Clouds"]},{"id":"33f5e83a.90c548","type":"subflow","name":"Forecast","info":"Gibt Wettervoraussage für 0, 6, 12, 18 und 24 Uhr für x Tage im Voraus zurück, wobei  x über `msg.days` gesetzt werden kann und standardmäßig 1 ist.","category":"","in":[{"x":0,"y":120,"wires":[{"id":"e75ce9e5.c68768"}]}],"out":[{"x":500,"y":40,"wires":[{"id":"271d3c93.23ad44","port":0}]},{"x":500,"y":80,"wires":[{"id":"271d3c93.23ad44","port":1}]},{"x":500,"y":120,"wires":[{"id":"271d3c93.23ad44","port":2}]},{"x":500,"y":160,"wires":[{"id":"271d3c93.23ad44","port":3}]},{"x":500,"y":200,"wires":[{"id":"271d3c93.23ad44","port":4}]}],"env":[],"color":"#DDAA99","inputLabels":["Abstand zu Voraussage in Tagen"],"outputLabels":["0 Uhr","6 Uhr","12 Uhr","18 Uhr","24 Uhr"]},{"id":"cfb77cfe.81f87","type":"mqtt-broker","z":"","name":"Raspy","broker":"localhost","port":"1883","clientid":"Raspberry","usetls":false,"compatmode":false,"keepalive":"60","cleansession":false,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"da8997a5.254058","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"f98df529.ecd9c8","type":"ui_group","z":"","name":"Rolladen F","tab":"da8997a5.254058","order":12,"disp":true,"width":"3","collapse":false},{"id":"454df403.5def4c","type":"ui_base","theme":{"name":"theme-custom","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#44ff00","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Dark_green","default":"#4B7930","baseColor":"#24c18b","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#44ff00","value":"#24c18b","edited":true},"page-titlebar-backgroundColor":{"value":"#24c18b","edited":true},"page-backgroundColor":{"value":"#111111","edited":true},"page-sidebar-backgroundColor":{"value":"#333333","edited":true},"group-textColor":{"value":"#c4c4c4","edited":true},"group-borderColor":{"value":"#555555","edited":true},"group-backgroundColor":{"value":"#333333","edited":true},"widget-textColor":{"value":"#24c18b","edited":true},"widget-backgroundColor":{"value":"#24c18b","edited":false},"widget-borderColor":{"value":"#333333","edited":true},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Home","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"ffa652c2.154ff","type":"ui_group","z":"","name":"Memory","tab":"cfa447ae.6d2188","order":2,"disp":false,"width":"6","collapse":false},{"id":"47048d84.487184","type":"ui_group","z":"","name":"Rolladen J","tab":"da8997a5.254058","order":11,"disp":true,"width":"3","collapse":false},{"id":"43fc5119.3d3d","type":"ui_group","z":"","name":"Rolladen B","tab":"da8997a5.254058","order":10,"disp":true,"width":"3","collapse":false},{"id":"52914d38.30d654","type":"ui_tab","z":"","name":"Lichter","icon":"fa-lightbulb-o","order":2,"disabled":false,"hidden":false},{"id":"4b7d802d.c58bf","type":"ui_group","z":"","name":"FloZi","tab":"52914d38.30d654","order":4,"disp":true,"width":"3","collapse":false},{"id":"b679594c.3706b8","type":"ui_group","z":"","name":"Rolladen S2","tab":"da8997a5.254058","order":7,"disp":true,"width":"3","collapse":false},{"id":"be0c28c0.6b50b8","type":"ui_group","z":"","name":"SchlaZi","tab":"52914d38.30d654","order":1,"disp":true,"width":"3","collapse":false},{"id":"30d60b64.06cf24","type":"ui_group","z":"","name":"Rolladen K1","tab":"da8997a5.254058","order":8,"disp":true,"width":"3","collapse":false},{"id":"aaca6777.20e428","type":"ui_group","z":"","name":"Rolladen K2","tab":"da8997a5.254058","order":9,"disp":true,"width":"3","collapse":false},{"id":"b6722eeb.fc02a","type":"ui_group","z":"","name":"JoZi","tab":"52914d38.30d654","order":3,"disp":true,"width":"3","collapse":false},{"id":"3a8d5bc4.fd42b4","type":"ui_group","z":"","name":"Büro","tab":"52914d38.30d654","order":2,"disp":true,"width":"3","collapse":false},{"id":"cfa447ae.6d2188","type":"ui_tab","z":"","name":"System","icon":"fa-tachometer","order":5,"disabled":false,"hidden":false},{"id":"919cc3b2.e130f","type":"ui_group","z":"","name":"Rolladen S1","tab":"da8997a5.254058","order":6,"disp":true,"width":"3","collapse":false},{"id":"15d9c580.8ac2db","type":"ui_group","z":"","name":"Info","tab":"d5476a68.95acb8","order":6,"disp":true,"width":6,"collapse":false},{"id":"312cae34.432192","type":"ui_group","z":"","name":"CPU","tab":"cfa447ae.6d2188","order":1,"disp":false,"width":"6","collapse":false},{"id":"6ee02f2c.c5b84","type":"ui_group","z":"","name":"Jalousien W1","tab":"da8997a5.254058","order":1,"disp":true,"width":"3","collapse":false},{"id":"ebdfd35c.8ac03","type":"ui_group","z":"","name":"Jalousien W2","tab":"da8997a5.254058","order":2,"disp":true,"width":"3","collapse":false},{"id":"aef54c72.37bed","type":"ui_group","z":"","name":"Rolladen W1","tab":"da8997a5.254058","order":3,"disp":true,"width":"3","collapse":false},{"id":"3f3c3a9.277d9c6","type":"ui_group","z":"","name":"Rolladen W2","tab":"da8997a5.254058","order":4,"disp":true,"width":"3","collapse":false},{"id":"6acc0bcf.f5b004","type":"ui_spacer","name":"spacer","group":"3d7503f6.9167bc","order":1,"width":1,"height":1},{"id":"56c315a4.4bff8c","type":"google-home-conf","z":"","username":"Floplosion05","localControl":false},{"id":"c3cdc2de.3cea6","type":"ui_group","z":"","name":"Szenen Wohnzimmer","tab":"da8997a5.254058","order":5,"disp":true,"width":"6","collapse":false},{"id":"48da8352.d657fc","type":"ui_tab","z":"","name":"Meross","icon":"fa-plug","order":3,"disabled":false,"hidden":false},{"id":"3570f019.47a02","type":"ui_group","z":"","name":"Stehlampe W","tab":"48da8352.d657fc","order":1,"disp":true,"width":"3","collapse":false},{"id":"36bd1bf0.ec7384","type":"ui_group","z":"","name":"Wand/Licht W","tab":"48da8352.d657fc","order":2,"disp":true,"width":"3","collapse":false},{"id":"97b586bd.9d2f68","type":"ui_group","z":"","name":"Nachtlampe F","tab":"48da8352.d657fc","order":3,"disp":true,"width":"3","collapse":false},{"id":"ed5a35e7.890178","type":"ui_group","z":"","name":"Kaffeemaschine","tab":"48da8352.d657fc","order":4,"disp":true,"width":"3","collapse":false},{"id":"4974cb0b.a77eb4","type":"ui_group","z":"","name":"Media F","tab":"48da8352.d657fc","order":5,"disp":true,"width":"3","collapse":false},{"id":"e23f0254.591a4","type":"ui_group","z":"","name":"HiFi J","tab":"48da8352.d657fc","order":6,"disp":true,"width":"3","collapse":false},{"id":"bc49ad0d.db0e9","type":"ui_group","z":"","name":"Schalter W","tab":"48da8352.d657fc","order":7,"disp":true,"width":"3","collapse":false},{"id":"bee51627.dd1048","type":"ui_tab","z":"","name":"Flo","icon":"fa-shield","order":6,"disabled":false,"hidden":false},{"id":"7ad80541.4289bc","type":"ui_spacer","name":"spacer","group":"3570f019.47a02","order":2,"width":1,"height":1},{"id":"5217fbf.94e2804","type":"ui_spacer","name":"spacer","group":"3570f019.47a02","order":3,"width":1,"height":1},{"id":"d8998e5.d43227","type":"ui_spacer","name":"spacer","group":"36bd1bf0.ec7384","order":2,"width":1,"height":1},{"id":"5d500cac.948f34","type":"ui_spacer","name":"spacer","group":"36bd1bf0.ec7384","order":3,"width":1,"height":1},{"id":"33bec2c7.9b3f1e","type":"ui_spacer","name":"spacer","group":"97b586bd.9d2f68","order":2,"width":1,"height":1},{"id":"b631b5b2.086788","type":"ui_spacer","name":"spacer","group":"97b586bd.9d2f68","order":3,"width":1,"height":1},{"id":"965c5628.106b18","type":"ui_spacer","name":"spacer","group":"ed5a35e7.890178","order":2,"width":1,"height":1},{"id":"a094b702.51f448","type":"ui_spacer","name":"spacer","group":"ed5a35e7.890178","order":3,"width":1,"height":1},{"id":"ad791137.b65da","type":"ui_spacer","name":"spacer","group":"4974cb0b.a77eb4","order":2,"width":1,"height":1},{"id":"e40c17d3.df6258","type":"ui_spacer","name":"spacer","group":"4974cb0b.a77eb4","order":3,"width":1,"height":1},{"id":"d3586534.873638","type":"ui_spacer","name":"spacer","group":"e23f0254.591a4","order":2,"width":1,"height":1},{"id":"c21ecbea.d32658","type":"ui_spacer","name":"spacer","group":"e23f0254.591a4","order":3,"width":1,"height":1},{"id":"ca4a89b6.4e1568","type":"ui_spacer","name":"spacer","group":"bc49ad0d.db0e9","order":2,"width":1,"height":1},{"id":"82ce4b15.b14c58","type":"ui_spacer","name":"spacer","group":"bc49ad0d.db0e9","order":3,"width":1,"height":1},{"id":"b90f860.a3f5f78","type":"ui_group","z":"","name":"Wetter","tab":"bee51627.dd1048","order":1,"disp":true,"width":"6","collapse":false},{"id":"964ab349.2059f","type":"ui_group","z":"","name":"Roll","tab":"bee51627.dd1048","order":3,"disp":true,"width":"3","collapse":false},{"id":"cca4b5d3.708e78","type":"ui_spacer","name":"spacer","group":"c3cdc2de.3cea6","order":2,"width":1,"height":"6"},{"id":"b0bb05c8.83c5b8","type":"ui_group","z":"","name":"WoZi","tab":"52914d38.30d654","order":13,"disp":true,"width":"3","collapse":false},{"id":"a8d79222.7ddcc","type":"ui_group","z":"","name":"Kueche","tab":"52914d38.30d654","order":6,"disp":true,"width":"3","collapse":false},{"id":"29c5ce64.28e552","type":"ui_group","z":"","name":"Auslastung","tab":"d5476a68.95acb8","order":5,"disp":false,"width":"6","collapse":false},{"id":"9a541a36.f1b9c8","type":"ui_group","z":"","name":"Licht","tab":"bee51627.dd1048","order":4,"disp":true,"width":"3","collapse":false},{"id":"c4fb380.b02dcc8","type":"ui_group","z":"","name":"Verbrauch Wa","tab":"d5476a68.95acb8","order":3,"disp":false,"width":"6","collapse":false},{"id":"6005bdec.dcb994","type":"ui_link","z":"","name":"Jonas HiFi","link":"http://192.168.100.141","icon":"fa-volume-up","target":"iframe","order":8},{"id":"8197c5dc.3a6318","type":"ui_link","z":"","name":"Pi-Hole","link":"http://192.168.100.140/admin","icon":"open_in_browser","target":"newtab","order":10},{"id":"60e5a503.8e760c","type":"ui_link","z":"","name":"Shellys","link":"http://192.168.100.98","icon":"fa-bolt","target":"iframe","order":9},{"id":"d5476a68.95acb8","type":"ui_tab","z":"","name":"Info","icon":"fa-info","order":4,"disabled":false,"hidden":false},{"id":"e1be4ca8.57f3f","type":"ui_group","z":"","name":"Wetter","tab":"d5476a68.95acb8","order":2,"disp":true,"width":"6","collapse":false},{"id":"b32d370f.f4e9d8","type":"ui_spacer","name":"spacer","group":"c3cdc2de.3cea6","order":4,"width":1,"height":"6"},{"id":"df0c704f.4ecde","type":"ui_link","z":"","name":"Ip Cam","link":"http://192.168.100.132/","icon":"open_in_browser","target":"iframe","order":11},{"id":"d3081.65508f7f8","type":"ui_tab","z":"","name":"Remote","icon":"fa-film","order":7,"disabled":false,"hidden":false},{"id":"66f8d9f4.25d918","type":"ui_group","z":"","name":"Beamer","tab":"d3081.65508f7f8","order":1,"disp":true,"width":"6","collapse":false},{"id":"eb3a831b.b3779","type":"ui_spacer","name":"spacer","group":"66f8d9f4.25d918","order":14,"width":"2","height":"2"},{"id":"278af155.6a4fce","type":"ui_spacer","name":"spacer","group":"66f8d9f4.25d918","order":16,"width":"2","height":"2"},{"id":"3c4239e2.a819b6","type":"ui_spacer","name":"spacer","group":"66f8d9f4.25d918","order":3,"width":"2","height":"2"},{"id":"a601157b.ed9f28","type":"ui_spacer","name":"spacer","group":"66f8d9f4.25d918","order":7,"width":"6","height":1},{"id":"e3af7047.2947b","type":"googleCredentials","z":"","name":"Flo"},{"id":"fb3506b8.c26738","type":"ui_group","z":"","name":"TV","tab":"d3081.65508f7f8","order":2,"disp":true,"width":"6","collapse":false},{"id":"38c0e700.e305d8","type":"ui_spacer","name":"spacer","group":"fb3506b8.c26738","order":1,"width":"4","height":"2"},{"id":"66e2665f.f98998","type":"ui_spacer","name":"spacer","group":"fb3506b8.c26738","order":3,"width":"6","height":1},{"id":"40fa37ac.131038","type":"ui_spacer","name":"spacer","group":"fb3506b8.c26738","order":10,"width":"2","height":"2"},{"id":"666f6047.6d631","type":"ui_spacer","name":"spacer","group":"fb3506b8.c26738","order":12,"width":"2","height":"2"},{"id":"4fc5c6ce.869008","type":"ui_spacer","name":"spacer","group":"fb3506b8.c26738","order":14,"width":"2","height":"2"},{"id":"c208cb52.d4da38","type":"ui_spacer","name":"spacer","group":"66f8d9f4.25d918","order":1,"width":"2","height":"2"},{"id":"7075b08c.56e6f","type":"ui_spacer","name":"spacer","group":"e1be4ca8.57f3f","order":5,"width":6,"height":1},{"id":"f9637c71.6424a","type":"ui_group","z":"","name":"Verbrauch Be","tab":"d5476a68.95acb8","order":4,"disp":false,"width":"6","collapse":false},{"id":"697e0837.d83d48","type":"ui_group","z":"","d":true,"name":"Apple","tab":"d3081.65508f7f8","order":3,"disp":true,"width":"6","collapse":false},{"id":"b6fded71.ae7e4","type":"ui_spacer","name":"spacer","group":"697e0837.d83d48","order":7,"width":"2","height":"2"},{"id":"961b571.35b2da8","type":"ui_spacer","name":"spacer","group":"697e0837.d83d48","order":9,"width":"2","height":"2"},{"id":"8e26d389.5a57f","type":"ui_spacer","name":"spacer","group":"697e0837.d83d48","order":11,"width":"2","height":"2"},{"id":"85e1b211.fe566","type":"ui_spacer","name":"spacer","group":"697e0837.d83d48","order":13,"width":"2","height":"2"},{"id":"f9e9f41b.784558","type":"ui_spacer","name":"spacer","group":"66f8d9f4.25d918","order":4,"width":"6","height":1},{"id":"1ed9eaf3.fd0725","type":"ui_spacer","name":"spacer","group":"66f8d9f4.25d918","order":6,"width":"4","height":"2"},{"id":"1145aa5e.5d0b16","type":"ui_group","z":"","name":"News","tab":"bee51627.dd1048","order":5,"disp":true,"width":"10","collapse":false},{"id":"c010c74a.fa5588","type":"ui_group","z":"","name":"Morgen","tab":"bee51627.dd1048","order":2,"disp":true,"width":"6","collapse":false},{"id":"189eb148.1734ff","type":"ui_spacer","name":"spacer","group":"c010c74a.fa5588","order":11,"width":"2","height":"4"},{"id":"25aae820.533398","type":"ui_group","z":"","name":"Verbrauch Ge","tab":"d5476a68.95acb8","order":1,"disp":false,"width":"6","collapse":false},{"id":"e55d8ea9.14654","type":"ui_group","z":"","name":"Sonstiges","tab":"da8997a5.254058","order":13,"disp":true,"width":"6","collapse":false},{"id":"a17cda76.ddfae8","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/SchlaZiTaster/roller/0","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":180,"y":200,"wires":[["63a75d1e.219934"]]},{"id":"67d35ac1.f55954","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/KlaZiTaster/roller/0","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":170,"y":260,"wires":[["15301b2f.e4fb85"]]},{"id":"6ddfdb57.729174","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/WoZiJal1/roller/0/pos","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":180,"y":580,"wires":[["d1dcf3b7.cf118"]]},{"id":"d1dcf3b7.cf118","type":"switch","z":"7303a768.70b7a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":390,"y":580,"wires":[["196ee8d0.4ffcb7"]]},{"id":"b5d19213.eff7f","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/WoZiJal2/roller/0/pos","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":180,"y":620,"wires":[["3987777e.a6cda8"]]},{"id":"84cb51c2.07394","type":"link in","z":"7303a768.70b7a8","name":"main","links":["27113848.5899e8","324a56b2.211d0a","3483db36.d13964","36bd663b.18ddda","3d63f179.b6d3de","4d4ecb4a.2b98f4","4ddfdb03.775274","5120a95a.43b398","676f2f2e.ee752","71c7a219.5132bc","7591cd86.a9caa4","78f4e1e1.0f7a4","79490cab.1d7ee4","7a18df2a.9a5ea","865e897c.3ce328","868c6ece.49ff5","a16b3620.f3cd88","a3b8bd3e.19ea6","b495a845.b52908","de027b51.4c09e8","decfb523.bbe438","e44ddbf0.2ce738","e900aa56.10ff48","f0790873.d634d8","18039fbc.84be1"],"x":195,"y":960,"wires":[["607a59fa.63a1e8"]]},{"id":"18534853.7ad308","type":"mqtt out","z":"7303a768.70b7a8","name":"Sender","topic":"","qos":"0","retain":"false","broker":"cfb77cfe.81f87","x":860,"y":940,"wires":[]},{"id":"607a59fa.63a1e8","type":"function","z":"7303a768.70b7a8","name":"Gerätetyp bestimmen","func":"var Lichter = global.get('Shelly_Lichter') || [];\nvar Rolladen = global.get('Shelly_Rolladen') || [];\nvar Taster = global.get('Shelly_Taster') || [];\nvar Meross = global.get('Meross_plugs') || [];\nvar Stecker = global.get('Shelly_Stecker') || [];\n\nvar Roll_Commands = ['rc', 'open', 'close', 'stop'];\nvar Licht_Commands = ['on', 'off', 'toggle'];\nvar Meross_Commands = ['toggle', 'on', 'off', 'getinfo', 1, 0];\nvar Stecker_Commands = ['toggle', 'on', 'off'];\n\nvar targets;\nif (typeof msg.target !== \"undefined\") {\n    targets = msg.target.split(' ');\n} else {\n    msg.target = msg.topic;\n    targets = msg.topic.split(' ');\n}\n\nfor (var i = 0; i < targets.length; i++) {\n    if (Lichter.includes(targets[i])) {\n        msg.category = 1;\n    } else {\n        if ((Rolladen.includes(targets[i])) && ((Roll_Commands.includes(msg.payload)) || (parseInt(msg.payload) >= 0 && parseInt(msg.payload) <= 100))) {\n            msg.category = 2;\n        } else {\n            if ((Taster.includes(targets[i]))  && (Roll_Commands.includes(msg.payload))) {\n                msg.category = 3;\n            } else {\n                if ((Meross.includes(targets[i])) && (Meross_Commands.includes(msg.payload))) {\n                    msg.category = 4;\n                } else {\n                    if ((Stecker.includes(targets[i])) && (Stecker_Commands.includes(msg.payload))) {\n                        msg.category = 5;\n                    } else {\n                        msg.category = 6;\n                    }\n                }\n            }\n        }\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":350,"y":960,"wires":[["49b5d263.f049ac"]]},{"id":"49b5d263.f049ac","type":"switch","z":"7303a768.70b7a8","name":"","property":"category","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"},{"t":"eq","v":"5","vt":"num"},{"t":"eq","v":"6","vt":"num"}],"checkall":"true","repair":false,"outputs":6,"x":550,"y":960,"wires":[["a8d4fab0.dc20a8"],["55a6def5.85327"],["6f048598.89da6c"],["cee6daf2.df4678"],["fd539b2c.958e38"],["a1b6cf11.50ea2"]]},{"id":"a1b6cf11.50ea2","type":"debug","z":"7303a768.70b7a8","name":"Unknown","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":700,"y":1060,"wires":[]},{"id":"2be8c988.ab58e6","type":"mqtt in","z":"8e49a2eb.1c1a3","d":true,"name":"","topic":"shellies/WoZiJal1/roller/0/pos","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":180,"y":260,"wires":[["c5a906a0.28e148"]]},{"id":"c5a906a0.28e148","type":"switch","z":"8e49a2eb.1c1a3","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":400,"y":260,"wires":[["502ed3bf.782cdc"]]},{"id":"4ae3bf49.f92ac","type":"mqtt out","z":"8e49a2eb.1c1a3","name":"","topic":"shellies/WoZiJal1/roller/0/command/pos","qos":"0","retain":"false","broker":"cfb77cfe.81f87","x":1270,"y":260,"wires":[]},{"id":"502ed3bf.782cdc","type":"change","z":"8e49a2eb.1c1a3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"open","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":260,"wires":[["4ae3bf49.f92ac","ae97021.3d39d"]]},{"id":"ae97021.3d39d","type":"delay","z":"8e49a2eb.1c1a3","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":780,"y":320,"wires":[["e5fbe37e.92df2"]]},{"id":"e5fbe37e.92df2","type":"change","z":"8e49a2eb.1c1a3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":320,"wires":[["4ae3bf49.f92ac"]]},{"id":"7a18df2a.9a5ea","type":"link out","z":"7303a768.70b7a8","name":"from Jal.schräg","links":["84cb51c2.07394"],"x":695,"y":600,"wires":[]},{"id":"f85590cf.75715","type":"debug","z":"7303a768.70b7a8","name":"Debug","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":850,"y":980,"wires":[]},{"id":"15301b2f.e4fb85","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"target","pt":"msg","to":"KlaZiRoll1 KlaZiRoll2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":260,"wires":[["de027b51.4c09e8"]]},{"id":"63a75d1e.219934","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"target","pt":"msg","to":"SchlaZiRoll2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":200,"wires":[["de027b51.4c09e8"]]},{"id":"de027b51.4c09e8","type":"link out","z":"7303a768.70b7a8","name":"from Taster","links":["84cb51c2.07394"],"x":575,"y":320,"wires":[]},{"id":"535ffbde.a1a6e4","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/Button1/input_event/0","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":180,"y":1220,"wires":[["5438f1b3.76361"]]},{"id":"5438f1b3.76361","type":"function","z":"7303a768.70b7a8","name":"Ebene bestimmen","func":"var payload = JSON.parse(msg.payload);\n\nif (payload.event == 'S') {\n    msg.payload = 1;\n} else if (payload.event == 'SS') {\n    msg.payload = 2;\n} else if (payload.event == 'SSS') {\n    msg.payload = 3;\n} else if (payload.event == 'L') {\n    msg.payload = 4;\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":430,"y":1220,"wires":[["b604d163.11ac8"]]},{"id":"b604d163.11ac8","type":"switch","z":"7303a768.70b7a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"}],"checkall":"true","repair":false,"outputs":4,"x":610,"y":1220,"wires":[["e73521d5.d4f8d"],["13f302a7.b2d11d"],[],[]]},{"id":"e6e89c09.c2b33","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/Button2/input_event/0","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":180,"y":1360,"wires":[["3e69aadd.cd3646"]]},{"id":"3e69aadd.cd3646","type":"function","z":"7303a768.70b7a8","name":"Ebene bestimmen","func":"var payload = JSON.parse(msg.payload);\n\nif (payload.event == 'S') {\n    msg.payload = 1;\n} else if (payload.event == 'SS') {\n    msg.payload = 2;\n} else if (payload.event == 'SSS') {\n    msg.payload = 3;\n} else if (payload.event == 'L') {\n    msg.payload = 4;\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":430,"y":1360,"wires":[["43cf4b37.585404"]]},{"id":"43cf4b37.585404","type":"switch","z":"7303a768.70b7a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"}],"checkall":"true","repair":false,"outputs":4,"x":610,"y":1360,"wires":[["561e2b98.1e3f64"],["60daad6f.eca884"],[],[]]},{"id":"71c7a219.5132bc","type":"link out","z":"7303a768.70b7a8","name":"from Shelly Button1","links":["84cb51c2.07394"],"x":975,"y":1200,"wires":[]},{"id":"4d4ecb4a.2b98f4","type":"link out","z":"7303a768.70b7a8","name":"from Shelly Button1","links":["84cb51c2.07394"],"x":895,"y":1340,"wires":[]},{"id":"defd0dd6.9eb63","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/FloZiTaster/roller/0","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":170,"y":320,"wires":[["cf9c3c0c.9dc56"]]},{"id":"9d617033.30007","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/JoZiTaster/roller/0","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":170,"y":380,"wires":[["a557f47c.5ae388"]]},{"id":"54cb982f.5abca8","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/BueroTaster/roller/0","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":180,"y":440,"wires":[["a0fae194.c13e7"]]},{"id":"cf9c3c0c.9dc56","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"target","pt":"msg","to":"FloZiRoll","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":320,"wires":[["de027b51.4c09e8"]]},{"id":"a557f47c.5ae388","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"target","pt":"msg","to":"JoZiRoll","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":380,"wires":[["de027b51.4c09e8"]]},{"id":"a0fae194.c13e7","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"target","pt":"msg","to":"BueroRoll","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":440,"wires":[["de027b51.4c09e8"]]},{"id":"fa5c0fff.e7d5c","type":"ui_button","z":"af6099cd.1244c8","name":"FloZiRoll_down","group":"f98df529.ecd9c8","order":9,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"FloZiRoll","x":1020,"y":240,"wires":[["9d9d62dd.5dfdd"]]},{"id":"c87a0725.f10e38","type":"ui_button","z":"af6099cd.1244c8","name":"FloZiRoll1_up","group":"f98df529.ecd9c8","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"FloZiRoll","x":1020,"y":160,"wires":[["9f121952.79e888"]]},{"id":"b11ef306.c0a7","type":"ui_button","z":"ace6de74.2173f","name":"SchlaZiRoll1_down","group":"919cc3b2.e130f","order":9,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"SchlaZiRoll1","x":1030,"y":180,"wires":[["90a3ba50.d3e998"]]},{"id":"c5fa5f79.77352","type":"ui_button","z":"ace6de74.2173f","name":"SchlaZiRoll1_up","group":"919cc3b2.e130f","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"SchlaZiRoll1","x":1020,"y":100,"wires":[["216eb895.ce2008"]]},{"id":"8e92e7f5.5e50a8","type":"ui_button","z":"ace6de74.2173f","name":"SchlaZiRoll1_stop","group":"919cc3b2.e130f","order":7,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"SchlaZiRoll1","x":1030,"y":140,"wires":[["99ff1806.2d3b28"]]},{"id":"f8652166.2313d","type":"ui_button","z":"af6099cd.1244c8","name":"FloZiRoll_stop","group":"f98df529.ecd9c8","order":7,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"FloZiRoll","x":1020,"y":200,"wires":[["6cf2cffc.3a803"]]},{"id":"b343e18b.b4f4d","type":"ui_button","z":"3e8cc585.ba24ea","name":"JoZiRoll_down","group":"47048d84.487184","order":9,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"JoZiRoll","x":1020,"y":180,"wires":[["b8295483.e98118"]]},{"id":"b0f6adf7.ef9a9","type":"ui_button","z":"3e8cc585.ba24ea","name":"JoZiRoll_up","group":"47048d84.487184","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"JoZiRoll","x":1010,"y":100,"wires":[["ef447e57.3213a"]]},{"id":"2f1aae5a.30acf2","type":"ui_button","z":"3e8cc585.ba24ea","name":"JoZiRoll_stop","group":"47048d84.487184","order":7,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"JoZiRoll","x":1020,"y":140,"wires":[["16bd8314.cd0ebd"]]},{"id":"8b32262a.31a2c8","type":"ui_button","z":"1a552cef.53ca43","name":"BueroRoll_down","group":"43fc5119.3d3d","order":9,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"BueroRoll","x":1020,"y":180,"wires":[["7a34a725.d929f8"]]},{"id":"f912c6ba.7b2728","type":"ui_button","z":"1a552cef.53ca43","name":"BueroRoll_up","group":"43fc5119.3d3d","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"BueroRoll","x":1020,"y":100,"wires":[["389d6f8d.80813"]]},{"id":"382d5894.e2d4f8","type":"ui_button","z":"1a552cef.53ca43","name":"BueroRoll_stop","group":"43fc5119.3d3d","order":7,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"BueroRoll","x":1020,"y":140,"wires":[["d0001387.1efc7"]]},{"id":"e33279f.0b7f188","type":"switch","z":"af6099cd.1244c8","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":200,"wires":[["9f121952.79e888"],["6cf2cffc.3a803"],["9d9d62dd.5dfdd"]]},{"id":"9f121952.79e888","type":"change","z":"af6099cd.1244c8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":160,"wires":[["c87a0725.f10e38","d52b9449.09fcc8"]]},{"id":"6cf2cffc.3a803","type":"change","z":"af6099cd.1244c8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":200,"wires":[["f8652166.2313d","f21ee006.f04c8"]]},{"id":"9d9d62dd.5dfdd","type":"change","z":"af6099cd.1244c8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":240,"wires":[["fa5c0fff.e7d5c","35a98da.af01572"]]},{"id":"f21ee006.f04c8","type":"change","z":"af6099cd.1244c8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":200,"wires":[["c87a0725.f10e38","fa5c0fff.e7d5c"]]},{"id":"35a98da.af01572","type":"change","z":"af6099cd.1244c8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":260,"wires":[["f8652166.2313d","c87a0725.f10e38"]]},{"id":"d52b9449.09fcc8","type":"change","z":"af6099cd.1244c8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":140,"wires":[["fa5c0fff.e7d5c","f8652166.2313d"]]},{"id":"2bea0bfc.0aeeb4","type":"switch","z":"1a552cef.53ca43","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":140,"wires":[["389d6f8d.80813"],["d0001387.1efc7"],["7a34a725.d929f8"]]},{"id":"389d6f8d.80813","type":"change","z":"1a552cef.53ca43","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":100,"wires":[["b4dce4cf.9ca228","f912c6ba.7b2728"]]},{"id":"d0001387.1efc7","type":"change","z":"1a552cef.53ca43","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":140,"wires":[["6b72cd83.20e574","382d5894.e2d4f8"]]},{"id":"7a34a725.d929f8","type":"change","z":"1a552cef.53ca43","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":180,"wires":[["b806ff52.c9339","8b32262a.31a2c8"]]},{"id":"6b72cd83.20e574","type":"change","z":"1a552cef.53ca43","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":140,"wires":[["f912c6ba.7b2728","8b32262a.31a2c8"]]},{"id":"b806ff52.c9339","type":"change","z":"1a552cef.53ca43","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":200,"wires":[["382d5894.e2d4f8","f912c6ba.7b2728"]]},{"id":"b4dce4cf.9ca228","type":"change","z":"1a552cef.53ca43","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":80,"wires":[["382d5894.e2d4f8","8b32262a.31a2c8"]]},{"id":"700854fa.3489ec","type":"switch","z":"3e8cc585.ba24ea","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":140,"wires":[["ef447e57.3213a"],["16bd8314.cd0ebd"],["b8295483.e98118"]]},{"id":"ef447e57.3213a","type":"change","z":"3e8cc585.ba24ea","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":100,"wires":[["d16b3a64.f9f728","b0f6adf7.ef9a9"]]},{"id":"16bd8314.cd0ebd","type":"change","z":"3e8cc585.ba24ea","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":140,"wires":[["92e72479.5461e8","2f1aae5a.30acf2"]]},{"id":"b8295483.e98118","type":"change","z":"3e8cc585.ba24ea","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":180,"wires":[["71e9deb6.dd8c3","b343e18b.b4f4d"]]},{"id":"92e72479.5461e8","type":"change","z":"3e8cc585.ba24ea","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":140,"wires":[["b343e18b.b4f4d","b0f6adf7.ef9a9"]]},{"id":"71e9deb6.dd8c3","type":"change","z":"3e8cc585.ba24ea","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":200,"wires":[["2f1aae5a.30acf2","b0f6adf7.ef9a9"]]},{"id":"d16b3a64.f9f728","type":"change","z":"3e8cc585.ba24ea","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":80,"wires":[["2f1aae5a.30acf2","b343e18b.b4f4d"]]},{"id":"ba727036.2716b","type":"switch","z":"ace6de74.2173f","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":140,"wires":[["216eb895.ce2008"],["99ff1806.2d3b28"],["90a3ba50.d3e998"]]},{"id":"216eb895.ce2008","type":"change","z":"ace6de74.2173f","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":100,"wires":[["bf8ee957.7cb018","c5fa5f79.77352"]]},{"id":"99ff1806.2d3b28","type":"change","z":"ace6de74.2173f","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":140,"wires":[["fe3efdee.c6776","8e92e7f5.5e50a8"]]},{"id":"90a3ba50.d3e998","type":"change","z":"ace6de74.2173f","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":180,"wires":[["ea2e0109.7cb58","b11ef306.c0a7"]]},{"id":"fe3efdee.c6776","type":"change","z":"ace6de74.2173f","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":140,"wires":[["c5fa5f79.77352","b11ef306.c0a7"]]},{"id":"ea2e0109.7cb58","type":"change","z":"ace6de74.2173f","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":200,"wires":[["8e92e7f5.5e50a8","c5fa5f79.77352"]]},{"id":"bf8ee957.7cb018","type":"change","z":"ace6de74.2173f","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":80,"wires":[["8e92e7f5.5e50a8","b11ef306.c0a7"]]},{"id":"897619ba.244018","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/#","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":120,"y":1880,"wires":[["2f098034.b3cd8"]]},{"id":"2f098034.b3cd8","type":"function","z":"7303a768.70b7a8","name":"","func":"var place1 = msg.topic.indexOf('/');\nvar place2 = msg.topic.indexOf('/', place1 + 1);\nvar substring = msg.topic.substring(place1 + 1, place2);\n\nif (!substring.includes('Taster')) {\n    if (((msg.topic.includes('status'))) || (msg.topic.includes('pos')) || (msg.topic.includes('input')) || (msg.topic.endsWith('roller/0')) || (msg.topic.includes('power')) || (msg.topic.endsWith('relay/0'))) {\n        msg.target = substring;\n        return msg;\n    }\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":280,"y":1880,"wires":[["5f8091df.52069","c1f76240.f7459","22268bd9.bfbeb4"]]},{"id":"7ae965b9.b2749c","type":"delay","z":"7303a768.70b7a8","name":"delay 100ms","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":190,"y":1560,"wires":[["16dbae20.fe91c2"]]},{"id":"7c387e54.3529e","type":"change","z":"7303a768.70b7a8","name":"Roll close","rules":[{"t":"set","p":"payload","pt":"msg","to":"close","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":1600,"wires":[["324a56b2.211d0a"]]},{"id":"16dbae20.fe91c2","type":"change","z":"7303a768.70b7a8","name":"Roll stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":1560,"wires":[["324a56b2.211d0a"]]},{"id":"324a56b2.211d0a","type":"link out","z":"7303a768.70b7a8","name":"from ack on","links":["84cb51c2.07394"],"x":475,"y":1580,"wires":[]},{"id":"4f69041.c9fe8fc","type":"link in","z":"7303a768.70b7a8","name":"ack on","links":["2b01acf4.09c564","4ed3a053.8bfc3","e12fe5b.d71b218"],"x":75,"y":1600,"wires":[["7ae965b9.b2749c","7c387e54.3529e"]]},{"id":"ada56d36.85bbc","type":"comment","z":"7303a768.70b7a8","name":"ack on","info":"","x":110,"y":1520,"wires":[]},{"id":"e9f7350.8b15fc8","type":"link in","z":"7303a768.70b7a8","name":"ack off","links":["2e53717b.3bc5ce","3cd7d51f.804fca"],"x":555,"y":1580,"wires":[["77d8194a.827448","909bf267.b2df1"]]},{"id":"909bf267.b2df1","type":"delay","z":"7303a768.70b7a8","name":"delay 300","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":670,"y":1560,"wires":[["5fd04e2.53c9eb"]]},{"id":"f183d4df.1cb1c8","type":"comment","z":"7303a768.70b7a8","name":"ack off","info":"","x":590,"y":1520,"wires":[]},{"id":"84d209cc.0f6d78","type":"delay","z":"7303a768.70b7a8","name":"delay 150","pauseType":"delay","timeout":"150","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":830,"y":1600,"wires":[["cc673e9a.c47f"]]},{"id":"5fd04e2.53c9eb","type":"change","z":"7303a768.70b7a8","name":"Roll open","rules":[{"t":"set","p":"payload","pt":"msg","to":"open","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":1560,"wires":[["84d209cc.0f6d78","f0790873.d634d8"]]},{"id":"cc673e9a.c47f","type":"change","z":"7303a768.70b7a8","name":"Roll stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":1600,"wires":[["f0790873.d634d8"]]},{"id":"f0790873.d634d8","type":"link out","z":"7303a768.70b7a8","name":"from ack off","links":["84cb51c2.07394"],"x":1105,"y":1600,"wires":[]},{"id":"75de1a94.0a8674","type":"http in","z":"6715eb60.6ca494","name":"testhtml","url":"/testhtml","method":"get","upload":false,"swaggerDoc":"","x":100,"y":60,"wires":[["33f5d95f.ec68e6","477abd9b.432e14"]]},{"id":"db1f0581.41a618","type":"http response","z":"6715eb60.6ca494","name":"html response","statusCode":"","headers":{"content-type":"text/html"},"x":600,"y":100,"wires":[]},{"id":"477abd9b.432e14","type":"debug","z":"6715eb60.6ca494","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":270,"y":100,"wires":[]},{"id":"33f5d95f.ec68e6","type":"function","z":"6715eb60.6ca494","name":"Convert payload to html response","func":"\nmsg.payload = \"Hacked\"\n// other processing steps\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":60,"wires":[["db1f0581.41a618","ff48fd17.8ffe3"]]},{"id":"ff48fd17.8ffe3","type":"change","z":"6715eb60.6ca494","name":"WoZiDi toggle","rules":[{"t":"set","p":"payload","pt":"msg","to":"toggle","tot":"str"},{"t":"set","p":"target","pt":"msg","to":"WoZiDimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":60,"wires":[["4ddfdb03.775274"]]},{"id":"4ddfdb03.775274","type":"link out","z":"6715eb60.6ca494","name":"from Frank","links":["84cb51c2.07394"],"x":715,"y":60,"wires":[]},{"id":"4d09edff.f01b74","type":"ui_level","z":"1a552cef.53ca43","group":"43fc5119.3d3d","order":2,"width":1,"height":6,"name":"BueroRoll_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1020,"y":260,"wires":[]},{"id":"e503a1cb.c62af","type":"ui_level","z":"ace6de74.2173f","group":"919cc3b2.e130f","order":2,"width":1,"height":6,"name":"SchlaZiRoll1_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1030,"y":260,"wires":[]},{"id":"55dbabfc.4d8c34","type":"ui_level","z":"3e8cc585.ba24ea","group":"47048d84.487184","order":2,"width":1,"height":6,"name":"JoZiRoll_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1020,"y":260,"wires":[]},{"id":"5f8091df.52069","type":"switch","z":"7303a768.70b7a8","name":"","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"/roller/0/pos","vt":"str"},{"t":"cont","v":"/light/0/status","vt":"str"},{"t":"cont","v":"/roller/0","vt":"str"},{"t":"cont","v":"/relay/0","vt":"str"},{"t":"cont","v":"/light/0/power","vt":"str"},{"t":"cont","v":"/relay/0/power","vt":"str"},{"t":"cont","v":"/roller/0/power","vt":"str"}],"checkall":"false","repair":false,"outputs":7,"x":430,"y":1880,"wires":[["47e01a9c.2e6ae4"],["d79ed491.f22e38"],["85987b3c.6c6038"],["85987b3c.6c6038"],["15f77ffb.8f61d"],["15f77ffb.8f61d"],["15f77ffb.8f61d"]]},{"id":"47e01a9c.2e6ae4","type":"function","z":"7303a768.70b7a8","name":"Position_Roll","func":"global.set(msg.target + \"_pos\", parseInt(msg.payload));\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":590,"y":1800,"wires":[[]]},{"id":"85987b3c.6c6038","type":"function","z":"7303a768.70b7a8","name":"Status_Roll/Stecker","func":"if (msg.topic.endsWith('/relay/0')) {\n    if (msg.payload == 'on') {\n        msg.payload = true;\n    } else if (msg.payload == 'off') {\n        msg.payload = false;\n    }\n}\nglobal.set(msg.target + \"_status\", msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":610,"y":1880,"wires":[[]]},{"id":"7ec2f979.f73088","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/WoZiTaster1/input_event/#","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":820,"y":300,"wires":[["24d49415.1171fc"]]},{"id":"500d5957.5f3fe8","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/WoZiTaster2/input_event/#","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":820,"y":340,"wires":[["24d49415.1171fc"]]},{"id":"24d49415.1171fc","type":"function","z":"7303a768.70b7a8","name":"Ebenen/Shelly bestimmen","func":"msg.payload = JSON.parse(msg.payload);\nvar place1 = msg.topic.indexOf('/');\nvar place2 = msg.topic.indexOf('/', place1 + 1);\nvar substring = msg.topic.substring(place1 + 1, place2);\nvar number_input = parseInt(msg.topic.slice(-1));\nvar number_shelly = parseInt(substring.slice(-1));\nvar counter = global.get(substring + \"_\" + number_input) || 0;\nvar reboot = global.get(substring + '_reboot_' + number_input);\n\nif (reboot == undefined) {\n    reboot = true;\n}\n\nif (msg.payload.event !== \"\") {\n    if (reboot == false) {\n        if ((msg.payload.event_cnt > counter) || (msg.payload.event_cnt < counter)) {\n                global.set(substring + \"_\" + number_input, msg.payload.event_cnt);\n                if (msg.payload.event == 'S') {\n                    msg.payload = 1;\n                } else if (msg.payload.event == 'SS') {\n                    msg.payload = 2;\n                } else if (msg.payload.event == 'SSS') {\n                    msg.payload = 3;\n                } else if (msg.payload.event == 'L') {\n                    msg.payload = 4;\n                } else if (msg.payload.event == 'LS') {\n                    msg.payload = 5;\n                } else if (msg.payload.event == 'SL') {\n                    msg.payload = 6;\n                }\n                //node.warn(msg.payload);\n                msg.substring = substring;\n                msg.number_input = number_input;\n                msg.number_shelly = number_shelly;\n                msg.flow = global.get(substring + \"_\" + number_input);\n                return msg;\n        }\n    } else  if (reboot == true) {\n        global.set(substring + '_reboot_' + number_input, false);\n        global.set(substring + \"_\" + number_input, msg.payload.event_cnt);\n    }\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1120,"y":320,"wires":[["bbaee99f.328e88","c69376e7.9048c8"]]},{"id":"bbaee99f.328e88","type":"link out","z":"7303a768.70b7a8","name":"from WoZi Taster","links":["2122d769.aeda18"],"x":1295,"y":320,"wires":[]},{"id":"d79ed491.f22e38","type":"function","z":"7303a768.70b7a8","name":"Status/Helligkeit_Licht","func":"msg.payload = JSON.parse(msg.payload);\nglobal.set(msg.target + \"_status\", msg.payload.ison);\nglobal.set(msg.target + \"_brightness\", msg.payload.brightness);\nif (msg.payload.brightness < 100){\n    global.set(msg.target + \"_brightness_save\", msg.payload.brightness);    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":620,"y":1840,"wires":[[]]},{"id":"f459a130.defa8","type":"http request","z":"7303a768.70b7a8","name":"HTTP SEND/RECV","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","authType":"","x":1210,"y":1880,"wires":[["c36012ff.82f","9fa76d60.32c1c"]]},{"id":"b5b6032d.2d18a","type":"inject","z":"7303a768.70b7a8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"},{"p":"target","v":"","vt":"str"}],"repeat":"6","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":850,"y":1880,"wires":[["63657e45.b2938"]]},{"id":"63657e45.b2938","type":"function","z":"7303a768.70b7a8","name":"","func":"var Abfrage = [];\n\nif (msg.target == '') {\n    Abfrage = Abfrage.concat(global.get('Shelly_Lichter'), global.get('Shelly_Rolladen'), global.get('Shelly_Stecker'));\n} else {\n    Abfrage = msg.target.split(' ');\n}\n\nfor (var i = 0; i < Abfrage.length; i++) {\n    node.send({url:\"http://\" + Abfrage[i] + \"/status\", target:Abfrage[i]});\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1020,"y":1880,"wires":[["f459a130.defa8"]]},{"id":"7b9b39b6.54cb68","type":"switch","z":"7303a768.70b7a8","name":"","property":"responseUrl","propertyType":"msg","rules":[{"t":"cont","v":"roll","vt":"str"},{"t":"cont","v":"jal","vt":"str"},{"t":"cont","v":"dimmer","vt":"str"},{"t":"cont","v":"waschmaschine","vt":"str"},{"t":"cont","v":"beamer","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":1690,"y":1880,"wires":[["c67d2868.b02788"],["c67d2868.b02788"],["b3e3b615.2a0ae8"],["508b53ac.08f0dc"],["c5ea5178.61491"]]},{"id":"b3e3b615.2a0ae8","type":"function","z":"7303a768.70b7a8","name":"Dimmer","func":"msg.origin = \"Abfrage\";\nvar status = msg.payload.lights[0].ison;\nvar brightness = msg.payload.lights[0].brightness;\nglobal.set(msg.target + \"_status\", status);\nglobal.set(msg.target + \"_brightness\", brightness);\nif (brightness < 100){\n    global.set(msg.target + \"_brightness_save\", brightness);    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"// Code added here will be run once\n// whenever the node is deployed.\nglobal.set('BueroDimmer_brightness_save', 50);\nglobal.set('SchlaZiDimmer_brightness_save', 50);\nglobal.set('JoZiDimmer_brightness_save', 50);\nglobal.set('FloZiDimmer_brightness_save', 50);\nglobal.set('WoZiDimmer_brightness_save', 50);\nglobal.set('KuecheDimmer_brightness_save', 50);\n","finalize":"","x":1840,"y":1860,"wires":[["41a5b514.79178c"]]},{"id":"41a5b514.79178c","type":"debug","z":"7303a768.70b7a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1990,"y":1880,"wires":[]},{"id":"c67d2868.b02788","type":"function","z":"7303a768.70b7a8","name":"Jal/Rol","func":"var pos = parseInt(msg.payload.rollers[0].current_pos);\nvar status = msg.payload.rollers[0].state;\nvar lastdir = msg.payload.rollers[0].last_direction;\nmsg.origin = \"Abfrage\";\nglobal.set(msg.target + \"_status\", status);\nglobal.set(msg.target + \"_lastdir\", lastdir);\n\nif (global.get(msg.target + \"_skip\") === true) {\n    global.set(msg.target + \"_skip\", false);\n} else {\n    global.set(msg.target + \"_pos\", pos);\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1830,"y":1820,"wires":[["41a5b514.79178c"]]},{"id":"eafe5eda.62029","type":"function","z":"8e49a2eb.1c1a3","d":true,"name":"Roller_filter","func":"var payload = JSON.parse(msg.payload);\nvar pos = payload.rollers[0].current_pos;\nvar state = payload.rollers[0].state;\nmsg.state = state;\nmsg.origin = \"Abfrage\";\n\nif (state == \"stop\") {\n    msg.payload = parseInt(pos);\n} else {\n    msg.payload = null;\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":770,"y":30,"wires":[[]]},{"id":"932d0b7f.c9aa58","type":"change","z":"1a552cef.53ca43","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"BueroRoll_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"BueroRoll_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":260,"wires":[["2bea0bfc.0aeeb4","4d09edff.f01b74"]]},{"id":"92d979d6.8147f8","type":"change","z":"af6099cd.1244c8","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"FloZiRoll_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"FloZiRoll_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":80,"wires":[["e33279f.0b7f188","36516429.4f31dc"]]},{"id":"db8dfbb5.178588","type":"change","z":"ace6de74.2173f","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"SchlaZiRoll1_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"SchlaZiRoll1_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":260,"wires":[["e503a1cb.c62af","ba727036.2716b"]]},{"id":"f9713f60.51c1f","type":"change","z":"3e8cc585.ba24ea","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"JoZiRoll_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"JoZiRoll_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":260,"wires":[["55dbabfc.4d8c34","700854fa.3489ec"]]},{"id":"a1ffc706.642558","type":"ui_button","z":"fb38554.2fddea8","name":"SchlaZiRoll2_down","group":"b679594c.3706b8","order":19,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"SchlaZiRoll2","x":1030,"y":240,"wires":[["3eff26e8.112d8a"]]},{"id":"8114e5b3.b34e88","type":"ui_button","z":"fb38554.2fddea8","name":"SchlaZiRoll2_up","group":"b679594c.3706b8","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"SchlaZiRoll2","x":1020,"y":160,"wires":[["592e5381.2a53dc"]]},{"id":"821cb546.6cf288","type":"ui_button","z":"fb38554.2fddea8","name":"SchlaZiRoll2_stop","group":"b679594c.3706b8","order":10,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"SchlaZiRoll2","x":1030,"y":200,"wires":[["14794595.71295a"]]},{"id":"bf472578.dfa128","type":"switch","z":"fb38554.2fddea8","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":200,"wires":[["592e5381.2a53dc"],["14794595.71295a"],["3eff26e8.112d8a"]]},{"id":"1e7a7647.25777a","type":"ui_level","z":"fb38554.2fddea8","group":"b679594c.3706b8","order":2,"width":1,"height":6,"name":"SchlaZiRoll2_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1030,"y":80,"wires":[]},{"id":"8715a84c.ca4228","type":"change","z":"fb38554.2fddea8","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"SchlaZiRoll2_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"SchlaZiRoll2_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":80,"wires":[["1e7a7647.25777a","bf472578.dfa128"]]},{"id":"592e5381.2a53dc","type":"change","z":"fb38554.2fddea8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":160,"wires":[["fe760356.ea584","8114e5b3.b34e88"]]},{"id":"14794595.71295a","type":"change","z":"fb38554.2fddea8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":200,"wires":[["36739a3a.b56466","821cb546.6cf288"]]},{"id":"3eff26e8.112d8a","type":"change","z":"fb38554.2fddea8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":240,"wires":[["6371d4d8.9766ac","a1ffc706.642558"]]},{"id":"36739a3a.b56466","type":"change","z":"fb38554.2fddea8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":200,"wires":[["8114e5b3.b34e88","a1ffc706.642558"]]},{"id":"6371d4d8.9766ac","type":"change","z":"fb38554.2fddea8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":260,"wires":[["821cb546.6cf288","8114e5b3.b34e88"]]},{"id":"fe760356.ea584","type":"change","z":"fb38554.2fddea8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":140,"wires":[["821cb546.6cf288","a1ffc706.642558"]]},{"id":"2f629d65.9aa612","type":"comment","z":"7303a768.70b7a8","name":"Shelly Button1 (red)","info":"","x":150,"y":1160,"wires":[]},{"id":"92f0aa88.35c7b8","type":"comment","z":"7303a768.70b7a8","name":"Shelly Button2 (blue)","info":"","x":150,"y":1300,"wires":[]},{"id":"75082791.bf9508","type":"comment","z":"7303a768.70b7a8","name":"WoZiTaster1/2","info":"","x":750,"y":140,"wires":[]},{"id":"48da555e.fc7cfc","type":"comment","z":"7303a768.70b7a8","name":"Update Shelly status (Mqtt)","info":"Shelly zyklische Statusupdates mit z.B. \"power\",\"pos\",etc. über MQTT empfangen (30s)","x":170,"y":1820,"wires":[]},{"id":"673b4eb6.6b09b","type":"comment","z":"7303a768.70b7a8","name":"HTTP-Update-SEND/RECV (Shelly)","info":"Shelly Statusupdate zyklisch anfragen und verwerten (6s)","x":900,"y":1820,"wires":[]},{"id":"a386c4c.a888238","type":"comment","z":"7303a768.70b7a8","name":"Maincontrol","info":"","x":250,"y":700,"wires":[]},{"id":"5ff94466.94a6ec","type":"comment","z":"7303a768.70b7a8","name":"OG/DG-Taster zuordnen","info":"","x":170,"y":140,"wires":[]},{"id":"70d7ec4a.bd0534","type":"comment","z":"7303a768.70b7a8","name":"Jalousien schräg stellen","info":"","x":160,"y":520,"wires":[]},{"id":"ea7d158a.bcd738","type":"ui_button","z":"f6b971b2.d9803","name":"KlaZiRoll1_down","group":"30d60b64.06cf24","order":9,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"KlaZiRoll1","x":1030,"y":240,"wires":[["7e9a34de.748e7c"]]},{"id":"22d43971.da4776","type":"ui_button","z":"f6b971b2.d9803","name":"KlaZiRoll1_up","group":"30d60b64.06cf24","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"KlaZiRoll1","x":1020,"y":160,"wires":[["79de4299.95899c"]]},{"id":"3d3201eb.f9608e","type":"ui_button","z":"f6b971b2.d9803","name":"KlaZiRoll1_stop","group":"30d60b64.06cf24","order":7,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"KlaZiRoll1","x":1020,"y":200,"wires":[["69bdea30.a73694"]]},{"id":"86bea30.134ea6","type":"switch","z":"f6b971b2.d9803","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":200,"wires":[["79de4299.95899c"],["69bdea30.a73694"],["7e9a34de.748e7c"]]},{"id":"79de4299.95899c","type":"change","z":"f6b971b2.d9803","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":160,"wires":[["a952b7d2.39e2e8","22d43971.da4776"]]},{"id":"69bdea30.a73694","type":"change","z":"f6b971b2.d9803","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":200,"wires":[["d127258c.30baa8","3d3201eb.f9608e"]]},{"id":"7e9a34de.748e7c","type":"change","z":"f6b971b2.d9803","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":240,"wires":[["9084287e.e25958","ea7d158a.bcd738"]]},{"id":"d127258c.30baa8","type":"change","z":"f6b971b2.d9803","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":200,"wires":[["22d43971.da4776","ea7d158a.bcd738"]]},{"id":"9084287e.e25958","type":"change","z":"f6b971b2.d9803","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":260,"wires":[["3d3201eb.f9608e","22d43971.da4776"]]},{"id":"a952b7d2.39e2e8","type":"change","z":"f6b971b2.d9803","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":140,"wires":[["3d3201eb.f9608e","ea7d158a.bcd738"]]},{"id":"2ab23a27.9ec056","type":"ui_level","z":"f6b971b2.d9803","group":"30d60b64.06cf24","order":2,"width":1,"height":6,"name":"KlaZiRoll1_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":"0","max":"100","segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1020,"y":80,"wires":[]},{"id":"5450ebb0.0bfe54","type":"change","z":"f6b971b2.d9803","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"KlaZiRoll1_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"KlaZiRoll1_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":80,"wires":[["2ab23a27.9ec056","86bea30.134ea6"]]},{"id":"7ed95600.f89878","type":"ui_button","z":"b70a7c65.a34e1","name":"KlaZiRoll2_down","group":"aaca6777.20e428","order":9,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"KlaZiRoll2","x":1030,"y":180,"wires":[["8b9dc4fa.349e48"]]},{"id":"1988a066.e8888","type":"ui_button","z":"b70a7c65.a34e1","name":"KlaZiRoll2_up","group":"aaca6777.20e428","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"KlaZiRoll2","x":1020,"y":100,"wires":[["8a70798b.2a2428"]]},{"id":"a41b9386.f091","type":"ui_button","z":"b70a7c65.a34e1","name":"KlaZiRoll2_stop","group":"aaca6777.20e428","order":7,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"KlaZiRoll2","x":1020,"y":140,"wires":[["7d0dd8d9.9b19a8"]]},{"id":"9bf1ba75.01b1a8","type":"switch","z":"b70a7c65.a34e1","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":140,"wires":[["8a70798b.2a2428"],["7d0dd8d9.9b19a8"],["8b9dc4fa.349e48"]]},{"id":"8a70798b.2a2428","type":"change","z":"b70a7c65.a34e1","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":100,"wires":[["fb3c055c.cf15c8","1988a066.e8888"]]},{"id":"7d0dd8d9.9b19a8","type":"change","z":"b70a7c65.a34e1","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":140,"wires":[["bad6c098.d278e","a41b9386.f091"]]},{"id":"8b9dc4fa.349e48","type":"change","z":"b70a7c65.a34e1","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":180,"wires":[["ef8fc7bd.9a26d8","7ed95600.f89878"]]},{"id":"bad6c098.d278e","type":"change","z":"b70a7c65.a34e1","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":140,"wires":[["1988a066.e8888","7ed95600.f89878"]]},{"id":"ef8fc7bd.9a26d8","type":"change","z":"b70a7c65.a34e1","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":200,"wires":[["a41b9386.f091","1988a066.e8888"]]},{"id":"fb3c055c.cf15c8","type":"change","z":"b70a7c65.a34e1","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":80,"wires":[["a41b9386.f091","7ed95600.f89878"]]},{"id":"13fdda0f.882736","type":"ui_level","z":"b70a7c65.a34e1","group":"aaca6777.20e428","order":2,"width":1,"height":6,"name":"KlaZiRoll2_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1020,"y":260,"wires":[]},{"id":"2fa2a78f.9676c8","type":"change","z":"b70a7c65.a34e1","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"KlaZiRoll2_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"KlaZiRoll2_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":260,"wires":[["9bf1ba75.01b1a8","13fdda0f.882736"]]},{"id":"efd4066.354a3f8","type":"ui_button","z":"adeaed83.946a8","name":"WoZiRoll1_down","group":"aef54c72.37bed","order":7,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"WoZiRoll1","x":1030,"y":240,"wires":[["c15eb053.d0a4e"]]},{"id":"c0c3a1c3.77e96","type":"ui_button","z":"adeaed83.946a8","name":"WoZiRoll1_up","group":"aef54c72.37bed","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"WoZiRoll1","x":1020,"y":160,"wires":[["c8890d97.c3172"]]},{"id":"15bee5b7.eb078a","type":"ui_button","z":"adeaed83.946a8","name":"WoZiRoll1_stop","group":"aef54c72.37bed","order":5,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"WoZiRoll1","x":1020,"y":200,"wires":[["201ec84f.903df8"]]},{"id":"cc833434.2fb2b8","type":"switch","z":"adeaed83.946a8","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":200,"wires":[["c8890d97.c3172"],["201ec84f.903df8"],["c15eb053.d0a4e"]]},{"id":"cfcfe82e.14da18","type":"change","z":"adeaed83.946a8","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"WoZiRoll1_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"WoZiRoll1_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":80,"wires":[["cc833434.2fb2b8","d4fc2eb2.645b5"]]},{"id":"c8890d97.c3172","type":"change","z":"adeaed83.946a8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":160,"wires":[["cd5d8481.8a9378","c0c3a1c3.77e96"]]},{"id":"201ec84f.903df8","type":"change","z":"adeaed83.946a8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":200,"wires":[["da8b1277.bbaae","15bee5b7.eb078a"]]},{"id":"c15eb053.d0a4e","type":"change","z":"adeaed83.946a8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":240,"wires":[["577d2899.f99198","efd4066.354a3f8"]]},{"id":"da8b1277.bbaae","type":"change","z":"adeaed83.946a8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":200,"wires":[["c0c3a1c3.77e96","efd4066.354a3f8"]]},{"id":"577d2899.f99198","type":"change","z":"adeaed83.946a8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":260,"wires":[["15bee5b7.eb078a","c0c3a1c3.77e96"]]},{"id":"cd5d8481.8a9378","type":"change","z":"adeaed83.946a8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":140,"wires":[["15bee5b7.eb078a","efd4066.354a3f8"]]},{"id":"dbada083.3ed5d","type":"ui_button","z":"2af482f3.53472e","name":"WoZiRoll2_down","group":"3f3c3a9.277d9c6","order":7,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"WoZiRoll2","x":1030,"y":180,"wires":[["c1bcc906.22cb08"]]},{"id":"b20bf14a.45b01","type":"ui_button","z":"2af482f3.53472e","name":"WoZiRoll2_up","group":"3f3c3a9.277d9c6","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"WoZiRoll2","x":1020,"y":100,"wires":[["70767151.fc699"]]},{"id":"928249f6.b5d738","type":"ui_button","z":"2af482f3.53472e","name":"WoZiRoll2_stop","group":"3f3c3a9.277d9c6","order":5,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"WoZiRoll2","x":1020,"y":140,"wires":[["3338da12.e5ec46"]]},{"id":"4a4224d6.4cd5ec","type":"switch","z":"2af482f3.53472e","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":140,"wires":[["70767151.fc699"],["3338da12.e5ec46"],["c1bcc906.22cb08"]]},{"id":"70767151.fc699","type":"change","z":"2af482f3.53472e","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":100,"wires":[["a3167648.373138","b20bf14a.45b01"]]},{"id":"3338da12.e5ec46","type":"change","z":"2af482f3.53472e","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":140,"wires":[["5a1d3b51.d88524","928249f6.b5d738"]]},{"id":"c1bcc906.22cb08","type":"change","z":"2af482f3.53472e","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":180,"wires":[["dae62e82.b43bf","dbada083.3ed5d"]]},{"id":"5a1d3b51.d88524","type":"change","z":"2af482f3.53472e","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":140,"wires":[["dbada083.3ed5d","b20bf14a.45b01"]]},{"id":"dae62e82.b43bf","type":"change","z":"2af482f3.53472e","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":200,"wires":[["928249f6.b5d738","b20bf14a.45b01"]]},{"id":"a3167648.373138","type":"change","z":"2af482f3.53472e","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":80,"wires":[["928249f6.b5d738","dbada083.3ed5d"]]},{"id":"c4b85d7a.cbba7","type":"change","z":"2af482f3.53472e","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"WoZiRoll2_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"WoZiRoll2_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":260,"wires":[["4a4224d6.4cd5ec","5086934b.5f99fc"]]},{"id":"e899ff1e.87358","type":"ui_button","z":"56300865.a37df8","name":"WoZiJal1_down","group":"6ee02f2c.c5b84","order":7,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"WoZiJal1","x":1020,"y":240,"wires":[["b9575bfe.eb8ac8"]]},{"id":"6fa08687.92c508","type":"ui_button","z":"56300865.a37df8","name":"WoZiJal1_up","group":"6ee02f2c.c5b84","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"WoZiJal1","x":1010,"y":160,"wires":[["4e6fd0b7.a9ce4"]]},{"id":"a556f845.3a2db8","type":"ui_button","z":"56300865.a37df8","name":"WoZiJal1_stop","group":"6ee02f2c.c5b84","order":5,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"WoZiJal1","x":1020,"y":200,"wires":[["86ad959.73b2868"]]},{"id":"ff28906b.bdef6","type":"switch","z":"56300865.a37df8","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":200,"wires":[["4e6fd0b7.a9ce4"],["86ad959.73b2868"],["b9575bfe.eb8ac8"]]},{"id":"ea3b5560.9fe538","type":"change","z":"56300865.a37df8","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"WoZiJal1_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"WoZiJal1_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":80,"wires":[["ff28906b.bdef6","a4e0a241.8fda8"]]},{"id":"4e6fd0b7.a9ce4","type":"change","z":"56300865.a37df8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":160,"wires":[["76e43dbc.0b62a4","6fa08687.92c508"]]},{"id":"86ad959.73b2868","type":"change","z":"56300865.a37df8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":200,"wires":[["1a4b4b57.d2d735","a556f845.3a2db8"]]},{"id":"b9575bfe.eb8ac8","type":"change","z":"56300865.a37df8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":240,"wires":[["b16e0025.3314","e899ff1e.87358"]]},{"id":"1a4b4b57.d2d735","type":"change","z":"56300865.a37df8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":200,"wires":[["e899ff1e.87358","6fa08687.92c508"]]},{"id":"b16e0025.3314","type":"change","z":"56300865.a37df8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":260,"wires":[["a556f845.3a2db8","6fa08687.92c508"]]},{"id":"76e43dbc.0b62a4","type":"change","z":"56300865.a37df8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":140,"wires":[["a556f845.3a2db8","e899ff1e.87358"]]},{"id":"f8772a80.027148","type":"ui_button","z":"85faa65c.d841d8","name":"WoZiJal2_down","group":"ebdfd35c.8ac03","order":7,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"WoZiJal2","x":1000,"y":180,"wires":[["566f753f.2cc7ac"]]},{"id":"ae874e40.79b69","type":"ui_button","z":"85faa65c.d841d8","name":"WoZiJal2_up","group":"ebdfd35c.8ac03","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"WoZiJal2","x":990,"y":100,"wires":[["21a08951.f52546"]]},{"id":"ebb9177a.a6f708","type":"ui_button","z":"85faa65c.d841d8","name":"WoZiJal2_stop","group":"ebdfd35c.8ac03","order":5,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"WoZiJal2","x":1000,"y":140,"wires":[["e88e0357.8f99b"]]},{"id":"6292b84f.f6f4e8","type":"switch","z":"85faa65c.d841d8","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":350,"y":140,"wires":[["21a08951.f52546"],["e88e0357.8f99b"],["566f753f.2cc7ac"]]},{"id":"21a08951.f52546","type":"change","z":"85faa65c.d841d8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":100,"wires":[["606dc0fc.a981a","ae874e40.79b69"]]},{"id":"e88e0357.8f99b","type":"change","z":"85faa65c.d841d8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":140,"wires":[["d30d4cdc.05be5","ebb9177a.a6f708"]]},{"id":"566f753f.2cc7ac","type":"change","z":"85faa65c.d841d8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":180,"wires":[["cd647490.3ebb68","f8772a80.027148"]]},{"id":"d30d4cdc.05be5","type":"change","z":"85faa65c.d841d8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":140,"wires":[["f8772a80.027148","ae874e40.79b69"]]},{"id":"cd647490.3ebb68","type":"change","z":"85faa65c.d841d8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":200,"wires":[["ebb9177a.a6f708","ae874e40.79b69"]]},{"id":"606dc0fc.a981a","type":"change","z":"85faa65c.d841d8","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":80,"wires":[["ebb9177a.a6f708","f8772a80.027148"]]},{"id":"e71ade94.3f5de","type":"change","z":"85faa65c.d841d8","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"WoZiJal2_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"WoZiJal2_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":180,"y":260,"wires":[["6292b84f.f6f4e8","86f316e5.a3c8c8"]]},{"id":"3987777e.a6cda8","type":"switch","z":"7303a768.70b7a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":390,"y":620,"wires":[["acc214e5.12e278"]]},{"id":"acc214e5.12e278","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"},{"t":"set","p":"target","pt":"msg","to":"WoZiJal2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":620,"wires":[["7a18df2a.9a5ea"]]},{"id":"2122d769.aeda18","type":"link in","z":"bbfff52d.d471d8","name":"Szenen","links":["bbaee99f.328e88","6687827b.c67a0c","b61b0ba5.0d0a68","8a07b035.bc874","7422dae4.9cfb14","e74cf3c9.269f8","50313a65.5cb8f4"],"x":195,"y":360,"wires":[["cb93a7be.98d168"]]},{"id":"d4fc2eb2.645b5","type":"ui_level","z":"adeaed83.946a8","group":"aef54c72.37bed","order":2,"width":1,"height":6,"name":"WoZiRoll1_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1020,"y":80,"wires":[]},{"id":"5086934b.5f99fc","type":"ui_level","z":"2af482f3.53472e","group":"3f3c3a9.277d9c6","order":2,"width":1,"height":6,"name":"WoZiRoll2_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1020,"y":260,"wires":[]},{"id":"a4e0a241.8fda8","type":"ui_level","z":"56300865.a37df8","group":"6ee02f2c.c5b84","order":2,"width":1,"height":6,"name":"WoZiJal1_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1020,"y":80,"wires":[]},{"id":"86f316e5.a3c8c8","type":"ui_level","z":"85faa65c.d841d8","group":"ebdfd35c.8ac03","order":2,"width":1,"height":6,"name":"WoZiJal2_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1000,"y":260,"wires":[]},{"id":"36516429.4f31dc","type":"ui_level","z":"af6099cd.1244c8","group":"f98df529.ecd9c8","order":2,"width":1,"height":6,"name":"FloZiRoll_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1020,"y":80,"wires":[]},{"id":"b75b7e10.3b4db","type":"function","z":"7303a768.70b7a8","name":"Google","func":"Lichter = ['FloZiDimmer', 'JoZiDimmer', 'BueroDimmer', 'SchlaZiDimmer'];\n\nif (msg.operation.includes('OnOff')) {\n    if (msg.payload == 'on') {\n        msg.payload = true;\n    } else if (msg.payload == 'off') {\n        msg.payload = false;\n    }\n    msg.payload = {'command':msg.operation, params:{'on':msg.payload, 'online':true}}\n} else if (msg.operation.includes('BrightnessAbsolute')) {\n    msg.payload = {'command':msg.operation, params:{'brightness':msg.payload.brightness, 'online':true}}\n}\n\nfor (var i = 0; i < Lichter.length; i++) {\n    if (msg.topic.includes(Lichter[i])) {\n        if (i === 0) {\n            return [msg, null, null, null];\n        } else if (i == 1) {\n            return [null, msg, null, null];\n        } else if (i == 2) {\n            return [null, null, msg, null];\n        } else if (i == 3) {\n            return [null, null, null, msg];\n        }\n    }\n}","outputs":4,"noerr":0,"initialize":"","finalize":"","x":860,"y":860,"wires":[["279fb5.6838d04c","bbcddbfe.70c448"],["e95404dd.70a6d8"],["a7ab589e.09c388"],["99cadfae.d17e9"]]},{"id":"4ab1c398.2c806c","type":"ui_button","z":"66e4af74.b6da2","name":"FloZiRoll_down","group":"f98df529.ecd9c8","order":12,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"RollClosePos","payloadType":"global","topic":"FloZiRoll","x":1160,"y":960,"wires":[["78e45abd.1fdf34","2ae18012.23cc6"]]},{"id":"5120a95a.43b398","type":"link out","z":"66e4af74.b6da2","name":"from Rolläden/Jalousien","links":["84cb51c2.07394"],"x":1535,"y":1240,"wires":[]},{"id":"388f6c7.4b09c94","type":"ui_button","z":"66e4af74.b6da2","name":"FloZiRoll1_up","group":"f98df529.ecd9c8","order":3,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"FloZiRoll","x":1160,"y":880,"wires":[["78e45abd.1fdf34","565e0d1.23526f4"]]},{"id":"86371bfd.bd01b8","type":"inject","z":"66e4af74.b6da2","name":"","props":[{"p":"payload","v":"","vt":"str"},{"p":"topic","v":"","vt":"string"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":150,"y":1260,"wires":[["257e23bb.07aa8c","a5c98798.f01d48","4f0ca7a0.277ae8","ab95ec82.f5ddf","59b0f14b.f0898","8d5bb988.dd53e8","ecbd12a5.dee52","60e265b.8d5ff9c","7b1e4d1f.b9c074","49bf74d0.9b69fc","5dcce742.0077d8"]]},{"id":"f40268e3.878bd8","type":"ui_button","z":"66e4af74.b6da2","name":"SchlaZiRoll1_down","group":"919cc3b2.e130f","order":12,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"RollClosePos","payloadType":"global","topic":"SchlaZiRoll1","x":1170,"y":1160,"wires":[["78e45abd.1fdf34","c8458ec6.83adf"]]},{"id":"77b0120b.93004c","type":"ui_button","z":"66e4af74.b6da2","name":"SchlaZiRoll1_up","group":"919cc3b2.e130f","order":3,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"SchlaZiRoll1","x":1160,"y":1080,"wires":[["78e45abd.1fdf34","37ccfef1.46d532"]]},{"id":"2f0aad5a.422232","type":"ui_button","z":"66e4af74.b6da2","name":"SchlaZiRoll1_stop","group":"919cc3b2.e130f","order":8,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"SchlaZiRoll1","x":1170,"y":1120,"wires":[["78e45abd.1fdf34","9cacdc63.a937d"]]},{"id":"b2f049d4.e2c558","type":"ui_button","z":"66e4af74.b6da2","name":"FloZiRoll_stop","group":"f98df529.ecd9c8","order":8,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"FloZiRoll","x":1160,"y":920,"wires":[["78e45abd.1fdf34","2723271c.7789c8"]]},{"id":"fdcbf8c0.64d938","type":"ui_button","z":"66e4af74.b6da2","name":"JoZiRoll_down","group":"47048d84.487184","order":12,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"RollClosePos","payloadType":"global","topic":"JoZiRoll","x":1160,"y":1620,"wires":[["78e45abd.1fdf34","434a9ff0.af17c"]]},{"id":"77c94c72.6dec34","type":"ui_button","z":"66e4af74.b6da2","name":"JoZiRoll_up","group":"47048d84.487184","order":3,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"JoZiRoll","x":1150,"y":1540,"wires":[["78e45abd.1fdf34","bbb6627c.c915c"]]},{"id":"17cafb3c.784a25","type":"ui_button","z":"66e4af74.b6da2","name":"JoZiRoll_stop","group":"47048d84.487184","order":8,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"JoZiRoll","x":1160,"y":1580,"wires":[["78e45abd.1fdf34","f0596fc.6d1f69"]]},{"id":"94949be9.99a4a8","type":"ui_button","z":"66e4af74.b6da2","name":"BueroRoll_down","group":"43fc5119.3d3d","order":12,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"RollClosePos","payloadType":"global","topic":"BueroRoll","x":1160,"y":680,"wires":[["78e45abd.1fdf34","27058a80.e2bf86"]]},{"id":"98067237.18a06","type":"ui_button","z":"66e4af74.b6da2","name":"BueroRoll_up","group":"43fc5119.3d3d","order":3,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"BueroRoll","x":1160,"y":600,"wires":[["78e45abd.1fdf34","e7a7ca76.accc48"]]},{"id":"e3e0206.4b9d5e","type":"ui_button","z":"66e4af74.b6da2","name":"BueroRoll_stop","group":"43fc5119.3d3d","order":8,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"BueroRoll","x":1160,"y":640,"wires":[["78e45abd.1fdf34","80a691da.4d6c"]]},{"id":"c2f84ea9.bdf2b","type":"ui_button","z":"66e4af74.b6da2","name":"","group":"4b7d802d.c58bf","order":1,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"triggered","payloadType":"str","topic":"FloZiDimmer","x":910,"y":2880,"wires":[["eb86b386.6d7ea"]]},{"id":"af89c4c6.f052a8","type":"switch","z":"66e4af74.b6da2","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":920,"wires":[["565e0d1.23526f4"],["2723271c.7789c8"],["2ae18012.23cc6"]]},{"id":"565e0d1.23526f4","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":880,"wires":[["388f6c7.4b09c94","570bfad2.958014"]]},{"id":"2723271c.7789c8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":920,"wires":[["b2f049d4.e2c558","9e51a927.87bfd8"]]},{"id":"2ae18012.23cc6","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":960,"wires":[["4ab1c398.2c806c","a1ac0a2a.9746b8"]]},{"id":"9e51a927.87bfd8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":920,"wires":[["388f6c7.4b09c94","4ab1c398.2c806c"]]},{"id":"a1ac0a2a.9746b8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":980,"wires":[["b2f049d4.e2c558","388f6c7.4b09c94"]]},{"id":"570bfad2.958014","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":860,"wires":[["4ab1c398.2c806c","b2f049d4.e2c558"]]},{"id":"8be664fa.f7f818","type":"switch","z":"66e4af74.b6da2","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":640,"wires":[["e7a7ca76.accc48"],["80a691da.4d6c"],["27058a80.e2bf86"]]},{"id":"e7a7ca76.accc48","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":600,"wires":[["4cf999d7.8c4938","98067237.18a06"]]},{"id":"80a691da.4d6c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":640,"wires":[["9ab5327a.9240c","e3e0206.4b9d5e"]]},{"id":"27058a80.e2bf86","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":680,"wires":[["3d205901.e45da6","94949be9.99a4a8"]]},{"id":"9ab5327a.9240c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":640,"wires":[["98067237.18a06","94949be9.99a4a8"]]},{"id":"3d205901.e45da6","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":700,"wires":[["e3e0206.4b9d5e","98067237.18a06"]]},{"id":"4cf999d7.8c4938","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":580,"wires":[["e3e0206.4b9d5e","94949be9.99a4a8"]]},{"id":"c90ddf71.df40d","type":"switch","z":"66e4af74.b6da2","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":1580,"wires":[["bbb6627c.c915c"],["f0596fc.6d1f69"],["434a9ff0.af17c"]]},{"id":"bbb6627c.c915c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1540,"wires":[["d5310e72.5d606","77c94c72.6dec34"]]},{"id":"f0596fc.6d1f69","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1580,"wires":[["818a579c.096718","17cafb3c.784a25"]]},{"id":"434a9ff0.af17c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1620,"wires":[["6da2675f.57fa68","fdcbf8c0.64d938"]]},{"id":"818a579c.096718","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1580,"wires":[["fdcbf8c0.64d938","77c94c72.6dec34"]]},{"id":"6da2675f.57fa68","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1640,"wires":[["17cafb3c.784a25","77c94c72.6dec34"]]},{"id":"d5310e72.5d606","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1520,"wires":[["17cafb3c.784a25","fdcbf8c0.64d938"]]},{"id":"9ac28645.08a398","type":"switch","z":"66e4af74.b6da2","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":1120,"wires":[["37ccfef1.46d532"],["9cacdc63.a937d"],["c8458ec6.83adf"]]},{"id":"37ccfef1.46d532","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1080,"wires":[["c05bdea8.74d4a","77b0120b.93004c"]]},{"id":"9cacdc63.a937d","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1120,"wires":[["72b2fa4d.445254","2f0aad5a.422232"]]},{"id":"c8458ec6.83adf","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1160,"wires":[["e6f3f6b8.22caa8","f40268e3.878bd8"]]},{"id":"72b2fa4d.445254","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1120,"wires":[["77b0120b.93004c","f40268e3.878bd8"]]},{"id":"e6f3f6b8.22caa8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1180,"wires":[["2f0aad5a.422232","77b0120b.93004c"]]},{"id":"c05bdea8.74d4a","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1060,"wires":[["2f0aad5a.422232","f40268e3.878bd8"]]},{"id":"78e45abd.1fdf34","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"origin","pt":"msg","to":"input","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1400,"y":1260,"wires":[["5120a95a.43b398","3bb97bc8.e6eb74"]]},{"id":"504e7fd2.93008","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"FloZiDimmer_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":2880,"wires":[["3ccbd65b.011bfa"]]},{"id":"eb86b386.6d7ea","type":"switch","z":"66e4af74.b6da2","name":"","property":"FloZiDimmer_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1050,"y":2880,"wires":[["f219c093.b0887"],["e3ccedf4.c3573"]]},{"id":"f219c093.b0887","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2860,"wires":[["cad741c6.fc326","4cfd6381.1dc26c"]]},{"id":"e3ccedf4.c3573","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2900,"wires":[["157f0795.db2858","4cfd6381.1dc26c"]]},{"id":"3ccbd65b.011bfa","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":2880,"wires":[["157f0795.db2858"],["cad741c6.fc326"]]},{"id":"157f0795.db2858","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":2860,"wires":[["c2f84ea9.bdf2b"]]},{"id":"cad741c6.fc326","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":2900,"wires":[["c2f84ea9.bdf2b"]]},{"id":"3bb97bc8.e6eb74","type":"debug","z":"66e4af74.b6da2","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1570,"y":1280,"wires":[]},{"id":"a6ed96af.60ba98","type":"ui_level","z":"66e4af74.b6da2","group":"43fc5119.3d3d","order":4,"width":1,"height":6,"name":"BueroRoll_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1160,"y":760,"wires":[]},{"id":"ae7cee66.a21e1","type":"ui_level","z":"66e4af74.b6da2","group":"919cc3b2.e130f","order":4,"width":1,"height":6,"name":"SchlaZiRoll1_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1170,"y":1240,"wires":[]},{"id":"385dd262.60ffbe","type":"ui_level","z":"66e4af74.b6da2","group":"47048d84.487184","order":4,"width":1,"height":6,"name":"JoZiRoll_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1160,"y":1700,"wires":[]},{"id":"b495a845.b52908","type":"link out","z":"66e4af74.b6da2","name":"from Lichter","links":["84cb51c2.07394"],"x":1575,"y":3080,"wires":[]},{"id":"4cfd6381.1dc26c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"origin","pt":"msg","to":"input","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1440,"y":3080,"wires":[["b495a845.b52908"]]},{"id":"257e23bb.07aa8c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"BueroRoll_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"BueroRoll_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":760,"wires":[["8be664fa.f7f818","a6ed96af.60ba98"]]},{"id":"a5c98798.f01d48","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"FloZiRoll_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"FloZiRoll_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":800,"wires":[["af89c4c6.f052a8","bb4b7203.a754a"]]},{"id":"4f0ca7a0.277ae8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"SchlaZiRoll1_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"SchlaZiRoll1_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":1240,"wires":[["ae7cee66.a21e1","9ac28645.08a398"]]},{"id":"ab95ec82.f5ddf","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"JoZiRoll_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"JoZiRoll_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":1700,"wires":[["385dd262.60ffbe","c90ddf71.df40d"]]},{"id":"f910a03b.1a21e","type":"ui_button","z":"66e4af74.b6da2","name":"SchlaZiRoll2_down","group":"b679594c.3706b8","order":22,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"RollClosePos","payloadType":"global","topic":"SchlaZiRoll2","x":1170,"y":1440,"wires":[["78e45abd.1fdf34","a5031c1f.09333"]]},{"id":"414c2028.513fa","type":"ui_button","z":"66e4af74.b6da2","name":"SchlaZiRoll2_up","group":"b679594c.3706b8","order":4,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"SchlaZiRoll2","x":1160,"y":1360,"wires":[["78e45abd.1fdf34","a8a69d1.d8ad76"]]},{"id":"adda0c2b.5fc6","type":"ui_button","z":"66e4af74.b6da2","name":"SchlaZiRoll2_stop","group":"b679594c.3706b8","order":16,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"SchlaZiRoll2","x":1170,"y":1400,"wires":[["78e45abd.1fdf34","a0de3be8.283788"]]},{"id":"75649534.703a1c","type":"switch","z":"66e4af74.b6da2","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":1400,"wires":[["a8a69d1.d8ad76"],["a0de3be8.283788"],["a5031c1f.09333"]]},{"id":"d4dbae18.f5dad","type":"ui_level","z":"66e4af74.b6da2","group":"b679594c.3706b8","order":6,"width":1,"height":6,"name":"SchlaZiRoll2_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1170,"y":1280,"wires":[]},{"id":"59b0f14b.f0898","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"SchlaZiRoll2_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"SchlaZiRoll2_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":1280,"wires":[["d4dbae18.f5dad","75649534.703a1c"]]},{"id":"a8a69d1.d8ad76","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1360,"wires":[["15e9a5bf.763bda","414c2028.513fa"]]},{"id":"a0de3be8.283788","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1400,"wires":[["69d718d8.aaa4a8","adda0c2b.5fc6"]]},{"id":"a5031c1f.09333","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1440,"wires":[["a378cadf.b5d808","f910a03b.1a21e"]]},{"id":"69d718d8.aaa4a8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1400,"wires":[["414c2028.513fa","f910a03b.1a21e"]]},{"id":"a378cadf.b5d808","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1460,"wires":[["adda0c2b.5fc6","414c2028.513fa"]]},{"id":"15e9a5bf.763bda","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1340,"wires":[["adda0c2b.5fc6","f910a03b.1a21e"]]},{"id":"2a73b13a.9a966e","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"FloZiDimmer_brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":2940,"wires":[["b2d89766.9e5958"]]},{"id":"7ff87a81.44eb04","type":"inject","z":"66e4af74.b6da2","name":"","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":150,"y":3080,"wires":[["504e7fd2.93008","2a73b13a.9a966e","471a8225.dbabfc","810388af.006a28","30c9c18a.45011e","be1dc113.8bbc8","908bf465.c96148","53acbfaf.354aa","d294b10c.6af4e","a6166470.a86098","94780ae9.11da98","26f46dd4.f574a2"]]},{"id":"471a8225.dbabfc","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"SchlaZiDimmer_brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":2980,"wires":[["8a15993a.51b1f8"]]},{"id":"9159d753.e50d48","type":"ui_button","z":"66e4af74.b6da2","name":"","group":"be0c28c0.6b50b8","order":1,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"triggered","payloadType":"str","topic":"SchlaZiDimmer","x":910,"y":3040,"wires":[["d4e25f89.9b2e9"]]},{"id":"810388af.006a28","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"SchlaZiDimmer_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":3040,"wires":[["c9bac4e3.f89558"]]},{"id":"d4e25f89.9b2e9","type":"switch","z":"66e4af74.b6da2","name":"","property":"SchlaZiDimmer_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1050,"y":3040,"wires":[["48f6703a.e6254"],["f0adc0d9.82952"]]},{"id":"48f6703a.e6254","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":3020,"wires":[["4cfd6381.1dc26c","f58a91a3.0a52c"]]},{"id":"f0adc0d9.82952","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":3060,"wires":[["ed4fa9a8.c412a8","4cfd6381.1dc26c"]]},{"id":"c9bac4e3.f89558","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":3040,"wires":[["ed4fa9a8.c412a8"],["f58a91a3.0a52c"]]},{"id":"ed4fa9a8.c412a8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3020,"wires":[["9159d753.e50d48"]]},{"id":"f58a91a3.0a52c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3060,"wires":[["9159d753.e50d48"]]},{"id":"5f36ec90.887ac4","type":"ui_button","z":"66e4af74.b6da2","name":"KlaZiRoll1_down","group":"30d60b64.06cf24","order":12,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"RollClosePos","payloadType":"global","topic":"KlaZiRoll1","x":1170,"y":480,"wires":[["595580b2.1a282","78e45abd.1fdf34"]]},{"id":"f1069ab7.845f08","type":"ui_button","z":"66e4af74.b6da2","name":"KlaZiRoll1_up","group":"30d60b64.06cf24","order":3,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"KlaZiRoll1","x":1160,"y":400,"wires":[["552c6d4a.38a174","78e45abd.1fdf34"]]},{"id":"17ab9f74.1fd131","type":"ui_button","z":"66e4af74.b6da2","name":"KlaZiRoll1_stop","group":"30d60b64.06cf24","order":8,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"KlaZiRoll1","x":1160,"y":440,"wires":[["54c053d0.0555ec","78e45abd.1fdf34"]]},{"id":"e6416c01.f1f3b","type":"switch","z":"66e4af74.b6da2","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":440,"wires":[["552c6d4a.38a174"],["54c053d0.0555ec"],["595580b2.1a282"]]},{"id":"552c6d4a.38a174","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":400,"wires":[["423785c2.0817cc","f1069ab7.845f08"]]},{"id":"54c053d0.0555ec","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":440,"wires":[["7d2378e1.f03708","17ab9f74.1fd131"]]},{"id":"595580b2.1a282","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":480,"wires":[["dfb18bf7.af1178","5f36ec90.887ac4"]]},{"id":"7d2378e1.f03708","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":440,"wires":[["f1069ab7.845f08","5f36ec90.887ac4"]]},{"id":"dfb18bf7.af1178","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":500,"wires":[["17ab9f74.1fd131","f1069ab7.845f08"]]},{"id":"423785c2.0817cc","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":380,"wires":[["17ab9f74.1fd131","5f36ec90.887ac4"]]},{"id":"b594f2e.b2c641","type":"ui_level","z":"66e4af74.b6da2","group":"30d60b64.06cf24","order":4,"width":1,"height":6,"name":"KlaZiRoll1_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":"0","max":"100","segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1160,"y":320,"wires":[]},{"id":"8d5bb988.dd53e8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"KlaZiRoll1_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"KlaZiRoll1_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":320,"wires":[["b594f2e.b2c641","e6416c01.f1f3b"]]},{"id":"2a8fbb59.ef8df4","type":"ui_button","z":"66e4af74.b6da2","name":"KlaZiRoll2_down","group":"aaca6777.20e428","order":12,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"RollClosePos","payloadType":"global","topic":"KlaZiRoll2","x":1170,"y":200,"wires":[["338ae5da.fa346a","78e45abd.1fdf34"]]},{"id":"323e332c.a285fc","type":"ui_button","z":"66e4af74.b6da2","name":"KlaZiRoll2_up","group":"aaca6777.20e428","order":3,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"KlaZiRoll2","x":1160,"y":120,"wires":[["c92c5081.c8b3f","78e45abd.1fdf34"]]},{"id":"8b536728.3a7298","type":"ui_button","z":"66e4af74.b6da2","name":"KlaZiRoll2_stop","group":"aaca6777.20e428","order":8,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"KlaZiRoll2","x":1160,"y":160,"wires":[["17b005b9.3fb75a","78e45abd.1fdf34"]]},{"id":"2b78378.b2604c8","type":"switch","z":"66e4af74.b6da2","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":160,"wires":[["c92c5081.c8b3f"],["17b005b9.3fb75a"],["338ae5da.fa346a"]]},{"id":"c92c5081.c8b3f","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":120,"wires":[["ca5b7cd4.dbb87","323e332c.a285fc"]]},{"id":"17b005b9.3fb75a","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":160,"wires":[["30bf5e29.da9952","8b536728.3a7298"]]},{"id":"338ae5da.fa346a","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":200,"wires":[["90b77b27.74cb08","2a8fbb59.ef8df4"]]},{"id":"30bf5e29.da9952","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":160,"wires":[["323e332c.a285fc","2a8fbb59.ef8df4"]]},{"id":"90b77b27.74cb08","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":220,"wires":[["8b536728.3a7298","323e332c.a285fc"]]},{"id":"ca5b7cd4.dbb87","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":100,"wires":[["8b536728.3a7298","2a8fbb59.ef8df4"]]},{"id":"7403e05e.6b91f","type":"ui_level","z":"66e4af74.b6da2","group":"aaca6777.20e428","order":4,"width":1,"height":6,"name":"KlaZiRoll2_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1160,"y":280,"wires":[]},{"id":"ecbd12a5.dee52","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"KlaZiRoll2_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"KlaZiRoll2_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":280,"wires":[["2b78378.b2604c8","7403e05e.6b91f"]]},{"id":"8bc1e027.72fb9","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiRoll1_down","group":"aef54c72.37bed","order":8,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"RollClosePos","payloadType":"global","topic":"WoZiRoll1","x":1170,"y":1900,"wires":[["9ea7222c.7d568","78e45abd.1fdf34"]]},{"id":"cdd83555.7c1058","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiRoll1_up","group":"aef54c72.37bed","order":3,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"WoZiRoll1","x":1160,"y":1820,"wires":[["2ab9919c.7e59de","78e45abd.1fdf34"]]},{"id":"ca24c918.b059d8","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiRoll1_stop","group":"aef54c72.37bed","order":6,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"WoZiRoll1","x":1160,"y":1860,"wires":[["a213091d.a73e08","78e45abd.1fdf34"]]},{"id":"e1634dcd.5e014","type":"switch","z":"66e4af74.b6da2","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":1860,"wires":[["2ab9919c.7e59de"],["a213091d.a73e08"],["9ea7222c.7d568"]]},{"id":"60e265b.8d5ff9c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"WoZiRoll1_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"WoZiRoll1_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":1740,"wires":[["e1634dcd.5e014","93f2b650.c90ff8"]]},{"id":"2ab9919c.7e59de","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1820,"wires":[["cf6e0580.b20ca8","cdd83555.7c1058"]]},{"id":"a213091d.a73e08","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1860,"wires":[["933546c.058eeb8","ca24c918.b059d8"]]},{"id":"9ea7222c.7d568","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1900,"wires":[["61deb24.0d8f64c","8bc1e027.72fb9"]]},{"id":"933546c.058eeb8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1860,"wires":[["cdd83555.7c1058","8bc1e027.72fb9"]]},{"id":"61deb24.0d8f64c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1920,"wires":[["ca24c918.b059d8","cdd83555.7c1058"]]},{"id":"cf6e0580.b20ca8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1800,"wires":[["ca24c918.b059d8","8bc1e027.72fb9"]]},{"id":"4d3c2b09.520614","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiRoll2_down","group":"3f3c3a9.277d9c6","order":8,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"RollClosePos","payloadType":"global","topic":"WoZiRoll2","x":1170,"y":2060,"wires":[["7757eab.4787114","78e45abd.1fdf34"]]},{"id":"989f9a36.034b68","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiRoll2_up","group":"3f3c3a9.277d9c6","order":3,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"WoZiRoll2","x":1160,"y":1980,"wires":[["2180768f.39008a","78e45abd.1fdf34"]]},{"id":"993f4e99.9feb5","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiRoll2_stop","group":"3f3c3a9.277d9c6","order":6,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"WoZiRoll2","x":1160,"y":2020,"wires":[["73d25f5c.0c47f","78e45abd.1fdf34"]]},{"id":"ff924bfc.65acf8","type":"switch","z":"66e4af74.b6da2","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":2020,"wires":[["2180768f.39008a"],["73d25f5c.0c47f"],["7757eab.4787114"]]},{"id":"2180768f.39008a","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1980,"wires":[["1bb1c2f4.815bcd","989f9a36.034b68"]]},{"id":"73d25f5c.0c47f","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":2020,"wires":[["8d4aeff4.4e9db","993f4e99.9feb5"]]},{"id":"7757eab.4787114","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":2060,"wires":[["ef359aca.2567b8","4d3c2b09.520614"]]},{"id":"8d4aeff4.4e9db","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2020,"wires":[["4d3c2b09.520614","989f9a36.034b68"]]},{"id":"ef359aca.2567b8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2080,"wires":[["993f4e99.9feb5","989f9a36.034b68"]]},{"id":"1bb1c2f4.815bcd","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1960,"wires":[["993f4e99.9feb5","4d3c2b09.520614"]]},{"id":"7b1e4d1f.b9c074","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"WoZiRoll2_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"WoZiRoll2_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2140,"wires":[["ff924bfc.65acf8","fda49f36.f4bbb"]]},{"id":"37182f3a.e2d7b","type":"comment","z":"66e4af74.b6da2","name":"KlaZiRoll2","info":"","x":120,"y":280,"wires":[]},{"id":"6a655500.239f2c","type":"comment","z":"66e4af74.b6da2","name":"KlaZiRoll1","info":"","x":120,"y":320,"wires":[]},{"id":"4d235221.6eeb2c","type":"comment","z":"66e4af74.b6da2","name":"BueroRoll","info":"","x":120,"y":760,"wires":[]},{"id":"dc43a1f6.2f259","type":"comment","z":"66e4af74.b6da2","name":"FloZiRoll","info":"","x":120,"y":800,"wires":[]},{"id":"f58868c9.dc1ec8","type":"comment","z":"66e4af74.b6da2","name":"SchlaZiRoll1","info":"","x":130,"y":1220,"wires":[]},{"id":"3c914e2b.789642","type":"comment","z":"66e4af74.b6da2","name":"SchlaZiRoll2","info":"","x":130,"y":1300,"wires":[]},{"id":"2d1af3c8.da485c","type":"comment","z":"66e4af74.b6da2","name":"JoZiRoll","info":"","x":120,"y":1700,"wires":[]},{"id":"c53c23c.a49a5e","type":"comment","z":"66e4af74.b6da2","name":"WoZiRoll1","info":"","x":120,"y":1740,"wires":[]},{"id":"712d0aa1.572ad4","type":"comment","z":"66e4af74.b6da2","name":"WoZiRoll2","info":"","x":120,"y":2140,"wires":[]},{"id":"b3f8459d.596ef8","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiJal1_down","group":"6ee02f2c.c5b84","order":8,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"WoZiJal1","x":1160,"y":2340,"wires":[["80974d1a.4f15f","78e45abd.1fdf34"]]},{"id":"fb8f6072.b90cb","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiJal1_up","group":"6ee02f2c.c5b84","order":3,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"WoZiJal1","x":1150,"y":2260,"wires":[["cdcc013b.29b42","78e45abd.1fdf34"]]},{"id":"37456aff.2d90b6","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiJal1_stop","group":"6ee02f2c.c5b84","order":6,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"WoZiJal1","x":1160,"y":2300,"wires":[["c1bc9c8b.dd9a4","78e45abd.1fdf34"]]},{"id":"19089dac.6cd9f2","type":"switch","z":"66e4af74.b6da2","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":2300,"wires":[["cdcc013b.29b42"],["c1bc9c8b.dd9a4"],["80974d1a.4f15f"]]},{"id":"49bf74d0.9b69fc","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"WoZiJal1_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"WoZiJal1_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2180,"wires":[["19089dac.6cd9f2","475ee052.ca9d6"]]},{"id":"cdcc013b.29b42","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":2260,"wires":[["ffe3d0c.058323","fb8f6072.b90cb"]]},{"id":"c1bc9c8b.dd9a4","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":2300,"wires":[["18b6ecb4.218433","37456aff.2d90b6"]]},{"id":"80974d1a.4f15f","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":2340,"wires":[["92c25416.34b0f8","b3f8459d.596ef8"]]},{"id":"18b6ecb4.218433","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2300,"wires":[["b3f8459d.596ef8","fb8f6072.b90cb"]]},{"id":"92c25416.34b0f8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2360,"wires":[["37456aff.2d90b6","fb8f6072.b90cb"]]},{"id":"ffe3d0c.058323","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2240,"wires":[["37456aff.2d90b6","b3f8459d.596ef8"]]},{"id":"66a239f7.d59aa8","type":"comment","z":"66e4af74.b6da2","name":"WoZiJal1","info":"","x":120,"y":2180,"wires":[]},{"id":"c353bb54.5bc278","type":"comment","z":"66e4af74.b6da2","name":"WoZiJal2","info":"","x":120,"y":2580,"wires":[]},{"id":"f303a8ad.f1edd8","type":"comment","z":"66e4af74.b6da2","name":"FloZiDimmer","info":"","x":130,"y":2880,"wires":[]},{"id":"770f66f.3a8a098","type":"comment","z":"66e4af74.b6da2","name":"SchlaZiDimmer","info":"","x":140,"y":3040,"wires":[]},{"id":"30c9c18a.45011e","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"JoZiDimmer_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":3120,"wires":[["a81ec04d.ecf06"]]},{"id":"be1dc113.8bbc8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"JoZiDimmer_brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":3180,"wires":[["4ef340dc.819af"]]},{"id":"a81ec04d.ecf06","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":3120,"wires":[["b1c90182.54ef"],["d8d4a59d.d68b28"]]},{"id":"d8d4a59d.d68b28","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3140,"wires":[["79202c21.025904"]]},{"id":"b1c90182.54ef","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3100,"wires":[["79202c21.025904"]]},{"id":"79202c21.025904","type":"ui_button","z":"66e4af74.b6da2","name":"","group":"b6722eeb.fc02a","order":1,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"triggered","payloadType":"str","topic":"JoZiDimmer","x":910,"y":3120,"wires":[["b2a45ef4.e78a1"]]},{"id":"b2a45ef4.e78a1","type":"switch","z":"66e4af74.b6da2","name":"","property":"JoZiDimmer_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1050,"y":3120,"wires":[["212639d6.233796"],["83016a21.838828"]]},{"id":"212639d6.233796","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":3100,"wires":[["d8d4a59d.d68b28","4cfd6381.1dc26c"]]},{"id":"83016a21.838828","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":3140,"wires":[["b1c90182.54ef","4cfd6381.1dc26c"]]},{"id":"908bf465.c96148","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"BueroDimmer_brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":3220,"wires":[["f52f2a04.1c1118"]]},{"id":"14637210.bf67de","type":"ui_button","z":"66e4af74.b6da2","name":"","group":"3a8d5bc4.fd42b4","order":1,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"triggered","payloadType":"str","topic":"BueroDimmer","x":910,"y":3280,"wires":[["d32d7329.f20d8"]]},{"id":"53acbfaf.354aa","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"BueroDimmer_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":3280,"wires":[["b5c39cbe.62e6b"]]},{"id":"d32d7329.f20d8","type":"switch","z":"66e4af74.b6da2","name":"","property":"BueroDimmer_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1050,"y":3280,"wires":[["c4ddb888.f38b38"],["2e120474.97762c"]]},{"id":"c4ddb888.f38b38","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":3260,"wires":[["5265ff44.fef6e","4cfd6381.1dc26c"]]},{"id":"2e120474.97762c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":3300,"wires":[["458eb5bd.7932ac","4cfd6381.1dc26c"]]},{"id":"b5c39cbe.62e6b","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":3280,"wires":[["458eb5bd.7932ac"],["5265ff44.fef6e"]]},{"id":"458eb5bd.7932ac","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3260,"wires":[["14637210.bf67de"]]},{"id":"5265ff44.fef6e","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3300,"wires":[["14637210.bf67de"]]},{"id":"376a7641.cb043a","type":"comment","z":"66e4af74.b6da2","name":"JoZiDimmer","info":"","x":130,"y":3120,"wires":[]},{"id":"b8cc8fbb.cd9bd","type":"comment","z":"66e4af74.b6da2","name":"BueroDimmer","info":"","x":130,"y":3280,"wires":[]},{"id":"3ced2d67.5a3992","type":"DeviceStats","z":"66e4af74.b6da2","name":"","mem":true,"nw":true,"load":false,"hostname":true,"useString":false,"x":1950,"y":820,"wires":[["d04f06cd.397148"]]},{"id":"c2bf928d.7a25","type":"inject","z":"66e4af74.b6da2","name":"","props":[{"p":"payload"}],"repeat":"10","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":1770,"y":740,"wires":[["3ced2d67.5a3992","c885a8d9.b520a8","fe59d884.026b28","be1b2365.90cd8","ba707cdf.b06fd8","2d13fc77.43b49c","41555164.d7217","41c18b1.f438ef4","d000a4fc.04eed8"]]},{"id":"74742f14.d96b9","type":"ui_gauge","z":"66e4af74.b6da2","name":"RAM_Gauge","group":"ffa652c2.154ff","order":1,"width":"6","height":"6","gtype":"gage","title":"RAM","label":"KiloBytes","format":"{{value}}","min":0,"max":"4000000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"1333333","seg2":"2666666","x":2290,"y":800,"wires":[]},{"id":"d04f06cd.397148","type":"function","z":"66e4af74.b6da2","name":"","func":"msg.payload = msg.payload.mem.used;\nreturn msg;","outputs":1,"noerr":0,"x":2120,"y":820,"wires":[["74742f14.d96b9","76c008ae.de1608"]]},{"id":"c885a8d9.b520a8","type":"cpu","z":"66e4af74.b6da2","name":"","msgCore":false,"msgOverall":true,"msgArray":false,"msgTemp":false,"x":1950,"y":740,"wires":[["56da749c.cad33c","773007d3.67f948"]]},{"id":"56da749c.cad33c","type":"ui_gauge","z":"66e4af74.b6da2","name":"CPU_Gauge","group":"312cae34.432192","order":1,"width":"6","height":"6","gtype":"gage","title":"CPU","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"33","seg2":"66","x":2290,"y":720,"wires":[]},{"id":"773007d3.67f948","type":"ui_chart","z":"66e4af74.b6da2","name":"CPU_Chart","group":"312cae34.432192","order":1,"width":"6","height":"6","label":"CPU","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#44ff00","#5d8eea","#ff7f0e","#f42f2f","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2290,"y":760,"wires":[[]]},{"id":"76c008ae.de1608","type":"ui_chart","z":"66e4af74.b6da2","name":"RAM_Chart","group":"ffa652c2.154ff","order":2,"width":"6","height":"6","label":"RAM","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"4000000","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#44ff00","#3fca48","#ff7f0e","#f42f2f","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2290,"y":840,"wires":[[]]},{"id":"b2d89766.9e5958","type":"ui_slider","z":"66e4af74.b6da2","name":"","label":"","tooltip":"","group":"4b7d802d.c58bf","order":3,"width":"1","height":"5","passthru":true,"outs":"all","topic":"FloZiDimmer","min":0,"max":"100","step":1,"x":910,"y":2940,"wires":[["a420e6c0.cc1568"]]},{"id":"a420e6c0.cc1568","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"FloZiDimmer_brightness","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1150,"y":2940,"wires":[["4cfd6381.1dc26c"]]},{"id":"8a15993a.51b1f8","type":"ui_slider","z":"66e4af74.b6da2","name":"","label":"","tooltip":"","group":"be0c28c0.6b50b8","order":3,"width":"1","height":"5","passthru":true,"outs":"all","topic":"SchlaZiDimmer","min":0,"max":"100","step":1,"x":910,"y":2980,"wires":[["9f021362.cff53"]]},{"id":"9f021362.cff53","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"SchlaZiDimmer_brightness","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1160,"y":2980,"wires":[["4cfd6381.1dc26c"]]},{"id":"9acfa720.158028","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"JoZiDimmer_brightness","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1150,"y":3180,"wires":[["4cfd6381.1dc26c"]]},{"id":"b9d4b178.783ad","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"BueroDimmer_brightness","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1160,"y":3220,"wires":[["4cfd6381.1dc26c"]]},{"id":"4ef340dc.819af","type":"ui_slider","z":"66e4af74.b6da2","name":"","label":"","tooltip":"","group":"b6722eeb.fc02a","order":3,"width":"1","height":"5","passthru":true,"outs":"all","topic":"JoZiDimmer","min":0,"max":"100","step":1,"x":910,"y":3180,"wires":[["9acfa720.158028"]]},{"id":"f52f2a04.1c1118","type":"ui_slider","z":"66e4af74.b6da2","name":"","label":"","tooltip":"","group":"3a8d5bc4.fd42b4","order":3,"width":"1","height":"5","passthru":true,"outs":"all","topic":"BueroDimmer","min":0,"max":"100","step":1,"x":910,"y":3220,"wires":[["b9d4b178.783ad"]]},{"id":"93f2b650.c90ff8","type":"ui_level","z":"66e4af74.b6da2","group":"aef54c72.37bed","order":4,"width":1,"height":6,"name":"WoZiRoll1_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1160,"y":1740,"wires":[]},{"id":"fda49f36.f4bbb","type":"ui_level","z":"66e4af74.b6da2","group":"3f3c3a9.277d9c6","order":4,"width":1,"height":6,"name":"WoZiRoll2_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1160,"y":2140,"wires":[]},{"id":"475ee052.ca9d6","type":"ui_level","z":"66e4af74.b6da2","group":"6ee02f2c.c5b84","order":4,"width":1,"height":6,"name":"WoZiJal1_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1160,"y":2180,"wires":[]},{"id":"bb4b7203.a754a","type":"ui_level","z":"66e4af74.b6da2","group":"f98df529.ecd9c8","order":4,"width":1,"height":6,"name":"FloZiRoll_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1160,"y":800,"wires":[]},{"id":"4f0b8140.d169d","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiJal2_down","group":"ebdfd35c.8ac03","order":8,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-90 fa-2x fa-play","payload":"close","payloadType":"str","topic":"WoZiJal2","x":1160,"y":2500,"wires":[["e4884252.64667","78e45abd.1fdf34"]]},{"id":"3c9b89b2.9f5136","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiJal2_up","group":"ebdfd35c.8ac03","order":3,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-rotate-270 fa-2x fa-play","payload":"open","payloadType":"str","topic":"WoZiJal2","x":1150,"y":2420,"wires":[["ea5b1d11.2244","78e45abd.1fdf34"]]},{"id":"cec1017a.d39f9","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiJal2_stop","group":"ebdfd35c.8ac03","order":6,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-stop","payload":"stop","payloadType":"str","topic":"WoZiJal2","x":1160,"y":2460,"wires":[["27f74ec4.382d92","78e45abd.1fdf34"]]},{"id":"ac1c62bc.e10a7","type":"switch","z":"66e4af74.b6da2","name":"","property":"status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":2460,"wires":[["ea5b1d11.2244"],["27f74ec4.382d92"],["e4884252.64667"]]},{"id":"ea5b1d11.2244","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":2420,"wires":[["2968ede7.98bd72","3c9b89b2.9f5136"]]},{"id":"27f74ec4.382d92","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":2460,"wires":[["e02c59b.ed4e4a8","cec1017a.d39f9"]]},{"id":"e4884252.64667","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":2500,"wires":[["d40b567d.2f3e88","4f0b8140.d169d"]]},{"id":"e02c59b.ed4e4a8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2460,"wires":[["4f0b8140.d169d","3c9b89b2.9f5136"]]},{"id":"d40b567d.2f3e88","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2520,"wires":[["cec1017a.d39f9","3c9b89b2.9f5136"]]},{"id":"2968ede7.98bd72","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2400,"wires":[["cec1017a.d39f9","4f0b8140.d169d"]]},{"id":"5dcce742.0077d8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"status","pt":"msg","to":"WoZiJal2_status","tot":"global"},{"t":"set","p":"payload","pt":"msg","to":"WoZiJal2_pos","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2580,"wires":[["ac1c62bc.e10a7","87df25e7.6e4ad8"]]},{"id":"87df25e7.6e4ad8","type":"ui_level","z":"66e4af74.b6da2","group":"ebdfd35c.8ac03","order":4,"width":1,"height":6,"name":"WoZiJal2_level","label":"","colorHi":"#24c18b","colorWarn":"#24c18b","colorNormal":"#24c18b","colorOff":"#000000","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"custom","colorText":"#eeeeee","fontLabel":"0","fontValue":"0","fontSmall":"0","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":3000,"x":1160,"y":2580,"wires":[]},{"id":"279fb5.6838d04c","type":"google-home-response","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4222","name":"FlosDimmer","x":1030,"y":800,"wires":[]},{"id":"e95404dd.70a6d8","type":"google-home-response","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4223","name":"JonasDimmer","x":1040,"y":840,"wires":[]},{"id":"a7ab589e.09c388","type":"google-home-response","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4224","name":"BüroDimmer","x":1030,"y":880,"wires":[]},{"id":"99cadfae.d17e9","type":"google-home-response","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4227","name":"SchlafzimmerDimmer","x":1060,"y":920,"wires":[]},{"id":"9d5e5946.e22468","type":"google-home","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4222","acknowledge":true,"name":"FlosDimmer","topic":"FloZiDimmer","x":130,"y":2200,"wires":[["2b82ec53.ab7bf4"]]},{"id":"2b82ec53.ab7bf4","type":"switch","z":"7303a768.70b7a8","name":"","property":"payload.command","propertyType":"msg","rules":[{"t":"cont","v":"OnOff","vt":"str"},{"t":"cont","v":"Brightness","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":350,"y":2200,"wires":[["33f50d10.4cebe2"],["14807eb0.20ead1"]]},{"id":"33f50d10.4cebe2","type":"switch","z":"7303a768.70b7a8","name":"","property":"payload.params.on","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":490,"y":2140,"wires":[["b35e9956.9f89d8"],["3bee0b77.4fd094"]]},{"id":"b35e9956.9f89d8","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"},{"t":"set","p":"origin","pt":"msg","to":"Google","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":2120,"wires":[["78f4e1e1.0f7a4","fcaf4590.1f90d8"]]},{"id":"3bee0b77.4fd094","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"},{"t":"set","p":"origin","pt":"msg","to":"Google","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":2160,"wires":[["78f4e1e1.0f7a4","fcaf4590.1f90d8"]]},{"id":"78f4e1e1.0f7a4","type":"link out","z":"7303a768.70b7a8","name":"from Google-Di","links":["84cb51c2.07394"],"x":795,"y":2200,"wires":[]},{"id":"14807eb0.20ead1","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.params.brightness","tot":"msg"},{"t":"set","p":"origin","pt":"msg","to":"Google","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":2260,"wires":[["78f4e1e1.0f7a4","fcaf4590.1f90d8"]]},{"id":"5a496b57.69c944","type":"inject","z":"7303a768.70b7a8","name":"","props":[{"p":"payload"},{"p":"target","v":"","vt":"str"}],"repeat":"6","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":2190,"y":1880,"wires":[["4dcdf7ca.08be38","8ae82c16.94002"]]},{"id":"4dcdf7ca.08be38","type":"function","z":"7303a768.70b7a8","name":"Status aktualisieren","func":"var Abfrage = [];\nvar command = '';\n\nif (msg.target == '') {\n    Abfrage = global.get('Meross_plugs') || [];\n} else {\n    Abfrage = msg.target.split(' ');\n}\n\nif (msg.payload == '') {\n    command = 'getinfo';\n} else {\n    command = msg.payload;\n}\n\nfor (var i = 0; i < Abfrage.length; i++) {\n    node.send({payload:Abfrage[i] + ' ' + command, topic:'Hausautomation'});\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2390,"y":1900,"wires":[["b94a755d.e479a8"]]},{"id":"b94a755d.e479a8","type":"mqtt out","z":"7303a768.70b7a8","name":"","topic":"","qos":"0","retain":"false","broker":"cfb77cfe.81f87","x":2570,"y":1880,"wires":[]},{"id":"f4f6ac00.edb34","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"Hausautomation/#","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":3350,"y":1880,"wires":[["e057335b.f7429"]]},{"id":"e057335b.f7429","type":"function","z":"7303a768.70b7a8","name":"","func":"var Topics_Dev = global.get('Meross_plugs') || [];\nvar Topics_Info = ['Elements'];\nvar Topics_Stromsensor = ['/Keller/WoZiDimmer/'];\nvar Topics_End = ['voltage', 'medvoltage', 'current', 'watts', 'voltage_max', 'medvoltage_max', 'current_max', 'watts_max', 'cal', 'on', 'off'];\nvar Topics_Meross = ['Meross'];\n\nif (msg.topic.includes(Topics_Stromsensor)) {\n    var place1 = msg.topic.lastIndexOf('/');\n    var substring = msg.topic.substring(place1 + 1, msg.topic.length);\n    for (var i = 0; i < 4; i++) {\n        if (Topics_End[i] == substring) {\n            if (i < 3) { //floats\n                if(parseFloat(msg.payload) > global.get('Stromsensor_' + Topics_End[i+4]))\n                    global.set('Stromsensor_' + Topics_End[i+4], parseFloat(msg.payload));\n                global.set('Stromsensor_' + Topics_End[i], parseFloat(msg.payload));\n            } else if (isNaN(parseInt(msg.payload)) == false) { //ints\n                if(parseFloat(msg.payload) > global.get('Stromsensor_' + Topics_End[i+4]))\n                    global.set('Stromsensor_' + Topics_End[i+4], parseInt(msg.payload));\n                global.set('Stromsensor_' + Topics_End[i], parseInt(msg.payload));\n            }\n        }\n    }\n//    node.warn(msg.payload);\n}\n\nfor (var j = 0; j < Topics_Dev.length; j++) {\n    if (msg.topic.includes(Topics_Dev[j])) {\n        if (msg.payload == 'False') {\n            global.set(Topics_Dev[j] + '_status', false);\n        } else if (msg.payload == 'True') {\n            global.set(Topics_Dev[j] + '_status', true);\n        } else if (msg.payload == 'Offline')\n            global.set(Topics_Dev[j] + '_status', null);\n    }\n}\n\nfor (j = 0; j < Topics_Info.length; j++) {\n    if (msg.topic.includes(Topics_Info[j])) {\n        if (isNaN(parseInt(msg.payload)) == false) {\n            global.set(Topics_Info[j] + '_count', parseInt(msg.payload));\n            //return msg;\n        }\n    }\n}\n\n//Neue Plugs globaler Variable hinzufügen\nfor (j = 0; j < Topics_Meross.length; j++) {\n    if (msg.topic.includes(Topics_Meross[j])) {\n        if (isNaN(parseInt(msg.payload)) === true) {\n            //node.warn(msg.payload);\n            if (Topics_Dev.includes(msg.payload) == false) {\n                Topics_Dev.push(msg.payload);\n            }\n            global.set('Meross_plugs', Topics_Dev);\n        }\n    }\n}","outputs":1,"noerr":0,"initialize":"var Topics_End = ['voltage', 'medvoltage', 'current', 'watts', 'voltage_max', 'medvoltage_max', 'current_max', 'watts_max'];\n\nglobal.set('WoZiLicht_status', false);\n\nfor (var j = 0; j < 8; j++) {\n    global.set('Stromsensor_' + Topics_End[j], 0);\n}","finalize":"","x":3540,"y":1880,"wires":[["883517d8.020088"]]},{"id":"cb93a7be.98d168","type":"switch","z":"bbfff52d.d471d8","name":"","property":"number_shelly","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":310,"y":360,"wires":[["5d576195.febef"],["5c6a86ef.ffa528"]]},{"id":"5c6a86ef.ffa528","type":"switch","z":"bbfff52d.d471d8","name":"Shelly 2","property":"number_input","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"}],"checkall":"true","repair":false,"outputs":3,"x":460,"y":380,"wires":[["efbc3bdd.13fc18"],["cab0d2f0.ecf31"],["6188a47.22cb25c"]]},{"id":"5d576195.febef","type":"switch","z":"bbfff52d.d471d8","name":"Shelly 1","property":"number_input","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"}],"checkall":"true","repair":false,"outputs":3,"x":460,"y":320,"wires":[["6d6e3744.1ea508"],["c5159f5d.011a5"],["69ed55e.c3b3bac"]]},{"id":"efbc3bdd.13fc18","type":"switch","z":"bbfff52d.d471d8","name":"4er re.u.","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"},{"t":"eq","v":"5","vt":"num"},{"t":"eq","v":"6","vt":"num"}],"checkall":"true","repair":false,"outputs":6,"x":680,"y":420,"wires":[["88aefe96.c2fba","1299708f.54f89f"],["88aefe96.c2fba","a70b8de4.776c4"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"]]},{"id":"cab0d2f0.ecf31","type":"switch","z":"bbfff52d.d471d8","name":"4er re.o.","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"},{"t":"eq","v":"5","vt":"num"},{"t":"eq","v":"6","vt":"num"}],"checkall":"true","repair":false,"outputs":6,"x":680,"y":520,"wires":[["88aefe96.c2fba","90f2cf8b.47ca7"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"]]},{"id":"6188a47.22cb25c","type":"switch","z":"bbfff52d.d471d8","name":"4er li.u.","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"},{"t":"eq","v":"5","vt":"num"},{"t":"eq","v":"6","vt":"num"}],"checkall":"true","repair":false,"outputs":6,"x":680,"y":620,"wires":[["88aefe96.c2fba","c5585ceb.86224"],["88aefe96.c2fba","a8eae931.949868"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"]]},{"id":"6d6e3744.1ea508","type":"switch","z":"bbfff52d.d471d8","name":"2er li.","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"},{"t":"eq","v":"5","vt":"num"},{"t":"eq","v":"6","vt":"num"}],"checkall":"true","repair":false,"outputs":6,"x":670,"y":100,"wires":[["a6ea26d.3a57ad8","88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba","7f7a1c15.1f17c4"]]},{"id":"c5159f5d.011a5","type":"switch","z":"bbfff52d.d471d8","name":"2er re.","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"},{"t":"eq","v":"5","vt":"num"},{"t":"eq","v":"6","vt":"num"}],"checkall":"true","repair":false,"outputs":6,"x":670,"y":200,"wires":[["88aefe96.c2fba","8474dbcb.2983b8"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"]]},{"id":"69ed55e.c3b3bac","type":"switch","z":"bbfff52d.d471d8","name":"4er li.o.","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"},{"t":"eq","v":"5","vt":"num"},{"t":"eq","v":"6","vt":"num"}],"checkall":"true","repair":false,"outputs":6,"x":680,"y":300,"wires":[["88aefe96.c2fba","22ba7359.f184dc"],["88aefe96.c2fba","d5633d65.317f6"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"],["88aefe96.c2fba"]]},{"id":"88aefe96.c2fba","type":"debug","z":"bbfff52d.d471d8","d":true,"name":"Debug_Szene","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":700,"y":360,"wires":[]},{"id":"22ba7359.f184dc","type":"function","z":"bbfff52d.d471d8","name":"WoZiRoll1","func":"//WoZiRoll1\nvar states = ['close', 'stop', 'open', 'stop']\nvar counter = global.get('WoZiRoll1_counter_dyn') || 0;\nvar next_action = states[counter];\nvar pos = global.get('WoZiRoll1_pos');\nvar status = global.get('WoZiRoll1_status');\n\nif (status == 'stop') {\n    if ((pos === 0) && ((next_action == 'close') || (next_action == 'stop'))) {\n        next_action = 'open';\n        counter = 2;\n    } else if ((pos == 100) && ((next_action == 'open') || (next_action == 'stop'))) {\n        next_action = 'close';\n        counter = 0;\n    }\n}\n\nmsg.payload = next_action;\nmsg.target = 'WoZiRoll1';\n\nif (counter == 3) {\n    counter = 0;\n} else {\n    counter ++;\n}\n\nglobal.set('WoZiRoll1_counter_dyn', counter);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":850,"y":260,"wires":[["868c6ece.49ff5"]]},{"id":"90f2cf8b.47ca7","type":"function","z":"bbfff52d.d471d8","name":"WoZiRoll2","func":"//WoZiRoll2\nvar states = ['close', 'stop', 'open', 'stop']\nvar counter = global.get('WoZiRoll2_counter_dyn') || 0;\nvar next_action = states[counter];\nvar pos = global.get('WoZiRoll2_pos');\nvar status = global.get('WoZiRoll2_status');\n\nif (status == 'stop') {\n    if ((pos === 0) && ((next_action == 'close') || (next_action == 'stop'))) {\n        next_action = 'open';\n        counter = 2;\n    } else if ((pos == 100) && ((next_action == 'open') || (next_action == 'stop'))) {\n        next_action = 'close';\n        counter = 0;\n    }\n}\n\nmsg.payload = next_action;\nmsg.target = 'WoZiRoll2';\n\nif (counter == 3) {\n    counter = 0;\n} else {\n    counter ++;\n}\n\nglobal.set('WoZiRoll2_counter_dyn', counter);\n\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":480,"wires":[["868c6ece.49ff5"]]},{"id":"c5585ceb.86224","type":"function","z":"bbfff52d.d471d8","name":"WoZiJal1","func":"//WoZiJal1\nvar states = ['close', 'stop', 'open', 'stop']\nvar counter = global.get('WoZiJal1_counter_dyn') || 0;\nvar next_action = states[counter];\nvar pos = global.get('WoZiJal1_pos');\nvar status = global.get('WoZiJal1_status');\n\nif (status == 'stop') {\n    if (((pos === 0) || (pos == 1)) && ((next_action == 'close') || (next_action == 'stop'))) {\n        next_action = 'open';\n        counter = 2;\n    } else if ((pos == 100) && ((next_action == 'open') || (next_action == 'stop'))) {\n        next_action = 'close';\n        counter = 0;\n    }\n}\n\nmsg.payload = next_action;\nmsg.target = 'WoZiJal1';\n\nif (counter == 3) {\n    counter = 0;\n} else {\n    counter ++;\n}\n\nglobal.set('WoZiJal1_counter_dyn', counter);\n\nreturn msg;","outputs":1,"noerr":0,"x":840,"y":580,"wires":[["868c6ece.49ff5"]]},{"id":"1299708f.54f89f","type":"function","z":"bbfff52d.d471d8","name":"WoZiJal2","func":"//WoZiJal2\nvar states = ['close', 'stop', 'open', 'stop']\nvar counter = global.get('WoZiJal2_counter_dyn') || 0;\nvar next_action = states[counter];\nvar pos = global.get('WoZiJal2_pos');\nvar status = global.get('WoZiJal2_status');\n\nif (status == 'stop') {\n    if (((pos === 0) || (pos == 1)) && ((next_action == 'close') || (next_action == 'stop'))) {\n        next_action = 'open';\n        counter = 2;\n    } else if ((pos == 100) && ((next_action == 'open') || (next_action == 'stop'))) {\n        next_action = 'close';\n        counter = 0;\n    }\n}\n\nmsg.payload = next_action;\nmsg.target = 'WoZiJal2';\n\nif (counter == 3) {\n    counter = 0;\n} else {\n    counter ++;\n}\n\nglobal.set('WoZiJal2_counter_dyn', counter);\n\nreturn msg;","outputs":1,"noerr":0,"x":840,"y":380,"wires":[["868c6ece.49ff5"]]},{"id":"1537fd86.d83c02","type":"comment","z":"bbfff52d.d471d8","name":"2.kurz-kurz","info":"","x":90,"y":120,"wires":[]},{"id":"4a3b407.15d1fc","type":"comment","z":"bbfff52d.d471d8","name":"3.kurz-kurz-kurz","info":"","x":100,"y":160,"wires":[]},{"id":"87cc652d.287c58","type":"comment","z":"bbfff52d.d471d8","name":"4.lang","info":"","x":70,"y":200,"wires":[]},{"id":"4029ed87.4cd084","type":"comment","z":"bbfff52d.d471d8","name":"5.lang-kurz","info":"","x":90,"y":240,"wires":[]},{"id":"ca85d97.8ec5528","type":"comment","z":"bbfff52d.d471d8","name":"6.kurz-lang","info":"","x":90,"y":280,"wires":[]},{"id":"30e482f9.9944ce","type":"comment","z":"bbfff52d.d471d8","name":"1.kurz","info":"","x":70,"y":80,"wires":[]},{"id":"a6ea26d.3a57ad8","type":"function","z":"bbfff52d.d471d8","name":"Wand/Lichtkette/Kueche/WoZi","func":"var status = global.get('Wandschrank_status');\n\nif (status == true) {\n    msg.payload = 'off';\n    global.set('Wandschrank_status', false);\n} else {\n    msg.payload = 'on';\n    global.set('Wandschrank_status', true);\n}\n\nmsg.target = 'Wandschrank Lichterkette';\nnode.send(msg);\nmsg.target = 'KuecheDimmer WoZiDimmer';\nnode.send(msg);","outputs":1,"noerr":0,"initialize":"","finalize":"","x":910,"y":60,"wires":[["868c6ece.49ff5"]]},{"id":"55062adf.c327e4","type":"sunrise","z":"66e4af74.b6da2","name":"","lat":"50.149437","lon":"8.544286","start":"sunrise","end":"sunset","soff":0,"eoff":0,"x":1750,"y":1200,"wires":[["e8e3193b.6ad448","dbb2b71e.2ae6b8","8267bf86.07ed","9114ba37.2b0428"],[]]},{"id":"204cd2ff.289efe","type":"ui_text","z":"66e4af74.b6da2","group":"e1be4ca8.57f3f","order":6,"width":3,"height":1,"name":"","label":"Azimuth","format":"{{msg.payload}}°","layout":"row-spread","x":2300,"y":1140,"wires":[]},{"id":"e8e3193b.6ad448","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"sun.azimuth","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1950,"y":1140,"wires":[["c9f3772a.081cc8"]]},{"id":"bc52c8ea.3e7bb8","type":"ui_text","z":"66e4af74.b6da2","group":"e1be4ca8.57f3f","order":8,"width":3,"height":1,"name":"","label":"Höhe","format":"{{msg.payload}}°","layout":"row-spread","x":2290,"y":1180,"wires":[]},{"id":"dbb2b71e.2ae6b8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"sun.altitude","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1950,"y":1180,"wires":[["a7a56113.9854b"]]},{"id":"d5633d65.317f6","type":"function","z":"bbfff52d.d471d8","name":"WoZiWest","func":"//WoZiWest\nvar states = ['close', 'stop', 'open', 'stop']\nvar counter = global.get('WoZi_West_counter_dyn') || 0;\nvar next_action = states[counter];\nvar WoZiRoll1_pos = global.get('WoZiRoll1_pos');\nvar WoZiRoll1_status = global.get('WoZiRoll1_status');\nvar WoZiRoll2_pos = global.get('WoZiRoll2_pos');\nvar WoZiRoll2_status = global.get('WoZiRoll2_status');\n/*\nif ((WoZiRoll1_status == 'stop') && (WoZiRoll2_status == 'stop')) {\n    node.warn(next_action);\n    if ((WoZiRoll1_pos === 0) && (WoZiRoll2_pos === 0) && (next_action == 'close')) {\n        next_action = 'open';\n        counter = 2;\n        node.warn('Skipped');\n    } else if ((WoZiRoll1_pos === 0) && (WoZiRoll2_pos === 0) && (next_action == 'stop')) {\n        next_action = 'open';\n        counter = 2;\n    } else if ((WoZiRoll1_pos == 100) && (WoZiRoll2_pos === 100) && (next_action == 'open')) {\n        next_action = 'close';\n        counter = 0;\n        node.warn('Skipped');\n    } else if ((WoZiRoll1_pos == 100) && (WoZiRoll2_pos === 100) && (next_action == 'stop')) {\n        next_action = 'close';\n        counter = 0;\n        node.warn('Skipped');\n    }\n    node.warn(next_action);\n}\n*/\nif ((WoZiRoll1_status == 'stop') && (WoZiRoll2_status == 'stop')) {\n    if (((WoZiRoll1_pos === 0) && (WoZiRoll2_pos === 0)) && ((next_action == 'close') || (next_action == 'stop'))) {\n        next_action = 'open';\n        counter = 2;\n    } else if ((WoZiRoll1_pos == 100) && (WoZiRoll2_pos === 100) && ((next_action == 'open') || (next_action == 'stop'))) {\n        next_action = 'close';\n        counter = 0;\n    }\n}\n\nmsg.payload = next_action;\nmsg.target = 'WoZiRoll1 WoZiRoll2';\n\nif (counter == 3) {\n    counter = 0;\n} else {\n    counter ++;\n}\n\nglobal.set('WoZi_West_counter_dyn', counter);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":850,"y":300,"wires":[["868c6ece.49ff5"]]},{"id":"6fb15ec3.51f66","type":"inject","z":"259c4f3c.ca9f9","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"},{"p":"debug","v":"false","vt":"bool"},{"p":"days","v":"1","vt":"num"}],"repeat":"300","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":150,"y":520,"wires":[["2cd446ec.d04b5a","7c96309b.f8f69"]]},{"id":"c2dcc2f0.5b1b8","type":"openweathermap","z":"c4c66a25.1c39c8","name":"","wtype":"current","lon":"","lat":"","city":"Schwalbach am Taunus","country":"Germany","language":"de","x":210,"y":140,"wires":[["a9569008.cd5ee","4dcf564d.3c9358","14e5b3e1.e32a3c","27d50cba.0e3c24","ac78e2f1.7cf5f","289cded4.ef9902","8fb61455.400f58"]]},{"id":"a9569008.cd5ee","type":"change","z":"c4c66a25.1c39c8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.tempc","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":40,"wires":[[]]},{"id":"4dcf564d.3c9358","type":"change","z":"c4c66a25.1c39c8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.temp_maxc","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":80,"wires":[[]]},{"id":"14e5b3e1.e32a3c","type":"change","z":"c4c66a25.1c39c8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.temp_minc","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":120,"wires":[[]]},{"id":"2cd446ec.d04b5a","type":"subflow:c4c66a25.1c39c8","z":"259c4f3c.ca9f9","name":"","env":[],"x":310,"y":520,"wires":[["d4422fd9.134b5"],["88770ae2.39c848"],["f339335e.25378"],[],["d0729e85.90ae4"],[]],"outputLabels":["Temp","Temp_max","Temp_min","",""]},{"id":"d4422fd9.134b5","type":"ui_text","z":"259c4f3c.ca9f9","group":"b90f860.a3f5f78","order":1,"width":"3","height":"1","name":"Temperatur","label":"Temperatur","format":"{{msg.payload}}°","layout":"row-spread","x":470,"y":460,"wires":[]},{"id":"88770ae2.39c848","type":"ui_text","z":"259c4f3c.ca9f9","group":"b90f860.a3f5f78","order":4,"width":"3","height":"1","name":"Temperatur_max","label":"<font color= \"#c14b5f\" >Maximum</font>","format":"<font color= \"#c14b5f\" >{{msg.payload}}°</font>","layout":"row-spread","x":490,"y":500,"wires":[]},{"id":"f339335e.25378","type":"ui_text","z":"259c4f3c.ca9f9","group":"b90f860.a3f5f78","order":5,"width":"3","height":"1","name":"Temperatur_min","label":"<font color= \"#587fd2\">Minimum</font>","format":"<font color= \"#587fd2\">{{msg.payload}}°</font>","layout":"row-spread","x":480,"y":540,"wires":[]},{"id":"27d50cba.0e3c24","type":"change","z":"c4c66a25.1c39c8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.weather","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":160,"wires":[[]]},{"id":"ac78e2f1.7cf5f","type":"change","z":"c4c66a25.1c39c8","name":"","rules":[{"t":"set","p":"weather","pt":"msg","to":"payload.weather","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"payload.icon","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":200,"wires":[[]]},{"id":"3ebaa56a.ef630a","type":"ui_button","z":"259c4f3c.ca9f9","name":"","group":"b90f860.a3f5f78","order":3,"width":3,"height":3,"passthru":false,"label":"{{payload}}","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":770,"y":580,"wires":[[]]},{"id":"d0729e85.90ae4","type":"function","z":"259c4f3c.ca9f9","name":"","func":"icons = ['01d', '02d', '03d', '04d', '09d', '10d', '13d', '50d', '01n', '02n', '03n', '04n', '09n', '10n', '11n', '13n', '50n'];\n\nif (icons.includes(msg.payload)) {\n    icon = 'wi wi-owm-' + icons[icons.indexOf(msg.payload)] + ' wi-5x';\n    \n    if (msg.payload.includes('d')) {\n        msg.colour = '#dd9c2c';\n    } else if (msg.payload.includes('n')) {\n        msg.colour = '#918d87';\n    }\n    \n    msg.payload = icon;\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":460,"y":580,"wires":[["e006ae1d.bdbe9"]]},{"id":"e006ae1d.bdbe9","type":"template","z":"259c4f3c.ca9f9","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<i class=\"{{payload}}\"></i>{{weather}}","output":"str","x":620,"y":580,"wires":[["3ebaa56a.ef630a"]]},{"id":"a8eae931.949868","type":"function","z":"bbfff52d.d471d8","name":"WoZiSüd","func":"//WoZiSüd\nvar states = ['close', 'stop', 'open', 'stop']\nvar counter = global.get('WoZi_Sued_counter_dyn') || 0;\nvar next_action = states[counter];\nvar WoZiJal1_pos = global.get('WoZiJal1_pos');\nvar WoZiJal1_status = global.get('WoZiJal1_status');\nvar WoZiJal2_pos = global.get('WoZiJal2_pos');\nvar WoZiJal2_status = global.get('WoZiJal2_status');\n\nif ((WoZiJal1_status == 'stop') && (WoZiJal2_status == 'stop')) {\n    if ((((WoZiJal1_pos === 0) && (WoZiJal2_pos === 0)) || ((WoZiJal1_pos == 1) && (WoZiJal2_pos == 1))) && ((next_action == 'close') || (next_action == 'stop'))) {\n        next_action = 'open';\n        counter = 2;\n    } else if ((WoZiJal1_pos == 100) && (WoZiJal2_pos === 100) && ((next_action == 'open') || (next_action == 'stop'))) {\n        next_action = 'close';\n        counter = 0;\n    }\n}\n\nmsg.payload = next_action;\nmsg.target = 'WoZiJal1 WoZiJal2';\n\nif (counter == 3) {\n    counter = 0;\n} else {\n    counter ++;\n}\n\nglobal.set('WoZi_Sued_counter_dyn', counter);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":840,"y":620,"wires":[["868c6ece.49ff5"]]},{"id":"f25cc175.6ee74","type":"ui_button","z":"259c4f3c.ca9f9","name":"","group":"964ab349.2059f","order":5,"width":"2","height":"2","passthru":false,"label":"Zu","tooltip":"Schließen","color":"","bgcolor":"{{background}}","icon":"fa-arrow-down","payload":"close","payloadType":"str","topic":"FloZiRoll","x":1510,"y":1060,"wires":[["521d490.5ddc4b8","18039fbc.84be1"]]},{"id":"72273651.b03fa8","type":"ui_button","z":"259c4f3c.ca9f9","name":"","group":"964ab349.2059f","order":1,"width":"2","height":"2","passthru":false,"label":"Auf","tooltip":"Öffnen","color":"","bgcolor":"{{background}}","icon":"fa-arrow-up","payload":"open","payloadType":"str","topic":"FloZiRoll","x":1510,"y":980,"wires":[["564687ab.d85a38","18039fbc.84be1"]]},{"id":"7e5c01fc.d111f","type":"ui_button","z":"259c4f3c.ca9f9","name":"","group":"964ab349.2059f","order":4,"width":"2","height":"2","passthru":false,"label":"Stop","tooltip":"Stoppen","color":"","bgcolor":"{{background}}","icon":"fa-stop","payload":"stop","payloadType":"str","topic":"FloZiRoll","x":1510,"y":1020,"wires":[["14d60d7f.25bb73","18039fbc.84be1"]]},{"id":"fd8d97e3.efbf38","type":"switch","z":"259c4f3c.ca9f9","name":"","property":"payload.status","propertyType":"msg","rules":[{"t":"eq","v":"open","vt":"str"},{"t":"eq","v":"stop","vt":"str"},{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":890,"y":1020,"wires":[["564687ab.d85a38"],["14d60d7f.25bb73"],["521d490.5ddc4b8"]]},{"id":"564687ab.d85a38","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1080,"y":980,"wires":[["72273651.b03fa8","d7b985cc.f1ee38"]]},{"id":"14d60d7f.25bb73","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#c14b5f","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1080,"y":1020,"wires":[["7e5c01fc.d111f","4b001eb6.a49f5"]]},{"id":"521d490.5ddc4b8","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1080,"y":1060,"wires":[["f25cc175.6ee74","7add506a.7e9d5"]]},{"id":"4b001eb6.a49f5","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":1020,"wires":[["72273651.b03fa8","f25cc175.6ee74"]]},{"id":"7add506a.7e9d5","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":1080,"wires":[["7e5c01fc.d111f","72273651.b03fa8"]]},{"id":"d7b985cc.f1ee38","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":960,"wires":[["f25cc175.6ee74","7e5c01fc.d111f"]]},{"id":"ae0f4825.3a7d38","type":"inject","z":"259c4f3c.ca9f9","name":"","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":130,"y":900,"wires":[["a7d87d55.d8f99","d5d6ff08.86e1b"]]},{"id":"18039fbc.84be1","type":"link out","z":"259c4f3c.ca9f9","name":"from Flo","links":["84cb51c2.07394"],"x":1615,"y":900,"wires":[]},{"id":"aadffe39.fc054","type":"ui_slider","z":"259c4f3c.ca9f9","name":"","label":"","tooltip":"","group":"964ab349.2059f","order":1,"width":"1","height":"6","passthru":true,"outs":"end","topic":"FloZiRoll","min":0,"max":"100","step":1,"x":1170,"y":900,"wires":[["dcd1e4dc.3ee648"]]},{"id":"dcd1e4dc.3ee648","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"FloZiRoll.skip","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":900,"wires":[["18039fbc.84be1"]]},{"id":"3c358695.3b18fa","type":"switch","z":"259c4f3c.ca9f9","name":"","property":"FloZiRoll.skip","propertyType":"msg","rules":[{"t":"false"},{"t":"null"}],"checkall":"true","repair":false,"outputs":2,"x":750,"y":900,"wires":[["aadffe39.fc054"],["603b1791.138e98"]]},{"id":"93b4d4e7.0dd8c8","type":"inject","z":"de80a1bf.054a4","name":"","props":[{"p":"payload"}],"repeat":"30","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"aktiv","payloadType":"global","x":150,"y":280,"wires":[["66d8eb88.279284"]]},{"id":"3483db36.d13964","type":"link out","z":"de80a1bf.054a4","name":"from Anw.sim.","links":["84cb51c2.07394"],"x":815,"y":280,"wires":[]},{"id":"cba42ed9.5b41","type":"inject","z":"de80a1bf.054a4","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":130,"y":80,"wires":[["6b2f2696.b42168"]]},{"id":"eb84b029.5af01","type":"inject","z":"de80a1bf.054a4","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"false","payloadType":"bool","x":130,"y":120,"wires":[["6b2f2696.b42168"]]},{"id":"6b2f2696.b42168","type":"change","z":"de80a1bf.054a4","name":"","rules":[{"t":"set","p":"aktiv","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":100,"wires":[["ce89c5de.716b28"]]},{"id":"8b0c1c17.c489a","type":"inject","z":"7303a768.70b7a8","name":"WoZiWest","props":[{"p":"payload"},{"p":"number_shelly","v":"1","vt":"num"},{"p":"number_input","v":"2","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2","payloadType":"num","x":1060,"y":280,"wires":[["bbaee99f.328e88"]]},{"id":"6b684717.2ab2f8","type":"comment","z":"7303a768.70b7a8","name":"Google-Update-RECV (Dimmer)","info":"Kommandos von Google Cloud empfangen","x":190,"y":2060,"wires":[]},{"id":"868c6ece.49ff5","type":"link out","z":"bbfff52d.d471d8","name":"from Szenen","links":["84cb51c2.07394"],"x":1005,"y":360,"wires":[]},{"id":"bc2e98a3.d960b8","type":"inject","z":"7303a768.70b7a8","name":"WoZiSüd","props":[{"p":"payload"},{"p":"number_shelly","v":"2","vt":"num"},{"p":"number_input","v":"2","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2","payloadType":"num","x":1060,"y":240,"wires":[["bbaee99f.328e88"]]},{"id":"182ffe46.01faa2","type":"inject","z":"7303a768.70b7a8","name":"WoZiAlles","props":[{"p":"payload"},{"p":"number_shelly","v":"1","vt":"num"},{"p":"number_input","v":"0","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":1060,"y":200,"wires":[["bbaee99f.328e88"]]},{"id":"4ca5a1d1.fc84c","type":"comment","z":"66e4af74.b6da2","name":"System","info":"","x":1730,"y":420,"wires":[]},{"id":"d294b10c.6af4e","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"WoZiDimmer_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":3360,"wires":[["8e5dd9f6.300fe8"]]},{"id":"a6166470.a86098","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"WoZiDimmer_brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":3420,"wires":[["bf510ba8.7a5758"]]},{"id":"8e5dd9f6.300fe8","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":3360,"wires":[["446640f5.bc8c9"],["b0bbff32.2ff16"]]},{"id":"b0bbff32.2ff16","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3380,"wires":[["ab7d8cbf.95147"]]},{"id":"446640f5.bc8c9","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3340,"wires":[["ab7d8cbf.95147"]]},{"id":"ab7d8cbf.95147","type":"ui_button","z":"66e4af74.b6da2","name":"","group":"b0bb05c8.83c5b8","order":1,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"triggered","payloadType":"str","topic":"WoZiDimmer","x":910,"y":3360,"wires":[["5b46b603.549658"]]},{"id":"5b46b603.549658","type":"switch","z":"66e4af74.b6da2","name":"","property":"WoZiDimmer_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1050,"y":3360,"wires":[["8ad767ce.ce2ac8"],["24f6f3eb.a99e9c"]]},{"id":"8ad767ce.ce2ac8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":3340,"wires":[["b0bbff32.2ff16","4cfd6381.1dc26c"]]},{"id":"24f6f3eb.a99e9c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":3380,"wires":[["446640f5.bc8c9","4cfd6381.1dc26c"]]},{"id":"4fbb19c3.e5fad8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"WoZiDimmer_brightness","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1150,"y":3420,"wires":[["4cfd6381.1dc26c"]]},{"id":"bf510ba8.7a5758","type":"ui_slider","z":"66e4af74.b6da2","name":"","label":"","tooltip":"","group":"b0bb05c8.83c5b8","order":3,"width":"1","height":"5","passthru":true,"outs":"all","topic":"WoZiDimmer","min":0,"max":"100","step":1,"x":910,"y":3420,"wires":[["4fbb19c3.e5fad8"]]},{"id":"a6949f5.fbde36","type":"comment","z":"66e4af74.b6da2","name":"WoZiDimmer","info":"","x":130,"y":3360,"wires":[]},{"id":"c69376e7.9048c8","type":"debug","z":"7303a768.70b7a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1290,"y":420,"wires":[]},{"id":"26f46dd4.f574a2","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"KuecheDimmer_brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":2740,"wires":[["df8c0453.6b28c8"]]},{"id":"c6df3e4d.a9cb4","type":"ui_button","z":"66e4af74.b6da2","name":"","group":"a8d79222.7ddcc","order":1,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"triggered","payloadType":"str","topic":"KuecheDimmer","x":910,"y":2800,"wires":[["75a3144e.92701c"]]},{"id":"94780ae9.11da98","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"KuecheDimmer_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":2800,"wires":[["3775eb50.e87f44"]]},{"id":"75a3144e.92701c","type":"switch","z":"66e4af74.b6da2","name":"","property":"KuecheDimmer_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1050,"y":2800,"wires":[["2467b98c.5547f6"],["bb1de7d5.f7a808"]]},{"id":"2467b98c.5547f6","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2780,"wires":[["28892583.90ec2a","4cfd6381.1dc26c"]]},{"id":"bb1de7d5.f7a808","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2820,"wires":[["dea000a5.b1f43","4cfd6381.1dc26c"]]},{"id":"3775eb50.e87f44","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":2800,"wires":[["dea000a5.b1f43"],["28892583.90ec2a"]]},{"id":"dea000a5.b1f43","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":2780,"wires":[["c6df3e4d.a9cb4"]]},{"id":"28892583.90ec2a","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":2820,"wires":[["c6df3e4d.a9cb4"]]},{"id":"df8c0453.6b28c8","type":"ui_slider","z":"66e4af74.b6da2","name":"","label":"","tooltip":"","group":"a8d79222.7ddcc","order":3,"width":"1","height":"5","passthru":true,"outs":"all","topic":"KuecheDimmer","min":0,"max":"100","step":1,"x":910,"y":2740,"wires":[["778ea301.a0641c"]]},{"id":"778ea301.a0641c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"KuecheDimmer_brightness","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1160,"y":2740,"wires":[["4cfd6381.1dc26c"]]},{"id":"603b1791.138e98","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"FloZiRoll.skip","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":920,"wires":[["aadffe39.fc054"]]},{"id":"6c4d94f8.8409ac","type":"presence-faker","z":"de80a1bf.054a4","name":"","onPayload":"on","onPayloadType":"str","onTopic":"FloZiDimmer","offPayload":"off","offPayloadType":"str","offTopic":"FloZiDimmer","windowBegin":"12:50","windowEnd":"16:00","minDurationHours":0,"minDurationMinutes":"1","minDurationSeconds":"5","minDuration":"65","maxDurationHours":"1","maxDurationMinutes":"2","maxDurationSeconds":"10","maxDuration":"3730","minCount":1,"maxCount":"3","startupBehavior":"onMsg","actionOnDisable":"off","firstBlockType":"on","lastBlockType":"off","isLoggingEnabled":false,"x":480,"y":280,"wires":[["ea79ba8a.3a9cf8","ce8a305f.85627","3ed975a8.80668a"]]},{"id":"a7d36957.a404b8","type":"inject","z":"7303a768.70b7a8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"60","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":2750,"y":1880,"wires":[["67eb2359.838b0c"]]},{"id":"67eb2359.838b0c","type":"function","z":"7303a768.70b7a8","name":"Auslastung aktualisieren","func":"var Abfrage = ['getCount']\n\nfor (var i = 0; i < Abfrage.length; i++) {\n    node.send({payload:Abfrage[i] , topic:'Hausautomation/Elements'});\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2970,"y":1880,"wires":[["3e459bfd.bd1e44"]]},{"id":"3e459bfd.bd1e44","type":"mqtt out","z":"7303a768.70b7a8","name":"","topic":"","qos":"0","retain":"false","broker":"cfb77cfe.81f87","x":3170,"y":1880,"wires":[]},{"id":"354332da.a60a0e","type":"comment","z":"66e4af74.b6da2","name":"KuecheDimmer","info":"","x":140,"y":2800,"wires":[]},{"id":"be0cb76a.562ac8","type":"ui_button","z":"259c4f3c.ca9f9","name":"","group":"9a541a36.f1b9c8","order":1,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"triggered","payloadType":"str","topic":"FloZiDimmer","x":930,"y":780,"wires":[["27a0a55a.b72a1a"]]},{"id":"27a0a55a.b72a1a","type":"switch","z":"259c4f3c.ca9f9","name":"","property":"FloZiDimmer.status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1070,"y":780,"wires":[["6a230fe7.b47f"],["456c094.a6431f8"]]},{"id":"6a230fe7.b47f","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":760,"wires":[["63aff4b2.4b923c","18039fbc.84be1"]]},{"id":"456c094.a6431f8","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":800,"wires":[["6eb7e67e.ee8898","18039fbc.84be1"]]},{"id":"55cfae78.1edcc","type":"switch","z":"259c4f3c.ca9f9","name":"","property":"payload.status","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":780,"wires":[["6eb7e67e.ee8898"],["63aff4b2.4b923c"]]},{"id":"6eb7e67e.ee8898","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":760,"wires":[["be0cb76a.562ac8"]]},{"id":"63aff4b2.4b923c","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":800,"wires":[["be0cb76a.562ac8"]]},{"id":"a7d87d55.d8f99","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"FloZiDimmer","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":880,"wires":[["55cfae78.1edcc","24e2a80d.c38ed8","4cad3f2.008c9c"]]},{"id":"277e11c6.ec764e","type":"ui_slider","z":"259c4f3c.ca9f9","name":"","label":"","tooltip":"","group":"9a541a36.f1b9c8","order":3,"width":"1","height":"6","passthru":true,"outs":"all","topic":"FloZiDimmer","min":0,"max":"100","step":1,"x":930,"y":840,"wires":[["4c64cf9a.3961d"]]},{"id":"4c64cf9a.3961d","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"FloZiDimmer.brightness","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1170,"y":840,"wires":[["18039fbc.84be1"]]},{"id":"fd539b2c.958e38","type":"function","z":"7303a768.70b7a8","name":"Stecker","func":"var targets = msg.target.split(' ');\n\nfor (var i = 0; i < targets.length; i++) {\n    msg.topic = 'shellies/' + targets[i] + '/relay/0/command';\n    node.send(msg);\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":1020,"wires":[["18534853.7ad308","f85590cf.75715"]]},{"id":"fe59d884.026b28","type":"change","z":"66e4af74.b6da2","name":"WaMa","rules":[{"t":"set","p":"payload","pt":"msg","to":"WaschMaschine_power","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1930,"y":660,"wires":[["eade4c8b.55bfc","e5d927e2.d799f8"]]},{"id":"eade4c8b.55bfc","type":"ui_gauge","z":"66e4af74.b6da2","name":"Verbrauch_Gauge","group":"c4fb380.b02dcc8","order":1,"width":6,"height":6,"gtype":"gage","title":"Waschmaschine","label":"Watt","format":"{{value}}","min":0,"max":"2500","colors":["#00b500","#e6e600","#ca3838"],"seg1":"833","seg2":"1666","x":2310,"y":640,"wires":[]},{"id":"e5d927e2.d799f8","type":"ui_chart","z":"66e4af74.b6da2","name":"Verbrauch_Chart","group":"c4fb380.b02dcc8","order":2,"width":6,"height":6,"label":"Verbrauch","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"2500","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#44ff00","#5d8eea","#ff7f0e","#f42f2f","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2310,"y":680,"wires":[[]]},{"id":"33a88a7a.2c24c6","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Elements_count","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1970,"y":140,"wires":[["441b6325.912fac","3340d88a.b2d358"]]},{"id":"441b6325.912fac","type":"ui_gauge","z":"66e4af74.b6da2","name":"Auslastung_Gauge","group":"29c5ce64.28e552","order":1,"width":6,"height":6,"gtype":"gage","title":"Elements","label":"Personen","format":"{{value}}","min":0,"max":"300","colors":["#00b500","#e6e600","#ca3838"],"seg1":"100","seg2":"200","x":2270,"y":120,"wires":[]},{"id":"3340d88a.b2d358","type":"ui_chart","z":"66e4af74.b6da2","name":"Auslastung_Chart","group":"29c5ce64.28e552","order":2,"width":6,"height":6,"label":"Auslastung","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"300","removeOlder":"4","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#44ff00","#5d8eea","#ff7f0e","#f42f2f","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2270,"y":160,"wires":[[]]},{"id":"b6677782.c38798","type":"inject","z":"66e4af74.b6da2","name":"","props":[{"p":"payload"}],"repeat":"300","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":1770,"y":200,"wires":[["33a88a7a.2c24c6","d488e664.f4d968"]]},{"id":"508b53ac.08f0dc","type":"function","z":"7303a768.70b7a8","name":"WaMa","func":"msg.origin = \"Abfrage\";\nvar status = msg.payload.relays[0].ison;\nvar consumption = msg.payload.meters[0].power;\n\nglobal.set(msg.target + \"_status\", status);\nglobal.set(msg.target + \"_power\", consumption);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1830,"y":1900,"wires":[["41a5b514.79178c"]]},{"id":"d488e664.f4d968","type":"subflow:c4c66a25.1c39c8","z":"66e4af74.b6da2","name":"","env":[],"x":1930,"y":260,"wires":[["ee745ad5.00e5f8"],["8681a825.36d848"],["e1e6e86c.0c653"],[],["3f708421.683fdc"],[]],"outputLabels":["Temp","Temp_max","Temp_min","","",""]},{"id":"ee745ad5.00e5f8","type":"ui_text","z":"66e4af74.b6da2","group":"e1be4ca8.57f3f","order":1,"width":3,"height":1,"name":"Temperatur","label":"Temperatur","format":"{{msg.payload}}°","layout":"row-spread","x":2250,"y":200,"wires":[]},{"id":"d01e0bd5.f53638","type":"ui_text","z":"66e4af74.b6da2","group":"e1be4ca8.57f3f","order":3,"width":3,"height":1,"name":"Temp_max","label":"<font color=\"#c14b5f\">Maximum</font>","format":"<font color=\"#c14b5f\">{{msg.payload}}°</font>","layout":"row-spread","x":2250,"y":240,"wires":[]},{"id":"5a6c878.9366178","type":"ui_text","z":"66e4af74.b6da2","group":"e1be4ca8.57f3f","order":4,"width":3,"height":1,"name":"Temp_min","label":"<font color= \"#587fd2\">Minimum</font>","format":"<font color= \"#587fd2\">{{msg.payload}}°</font>","layout":"row-spread","x":2250,"y":280,"wires":[]},{"id":"2a8583ff.4fcf7c","type":"ui_button","z":"66e4af74.b6da2","name":"","group":"e1be4ca8.57f3f","order":2,"width":3,"height":3,"passthru":false,"label":"{{payload}}","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2390,"y":320,"wires":[[]]},{"id":"3f708421.683fdc","type":"function","z":"66e4af74.b6da2","name":"","func":"icons = ['01d', '02d', '03d', '04d', '09d', '10d', '13d', '50d', '01n', '02n', '03n', '04n', '09n', '10n', '11n', '13n', '50n'];\n\nif (icons.includes(msg.payload)) {\n    icon = 'wi wi-owm-' + icons[icons.indexOf(msg.payload)] + ' wi-5x';\n    \n    if (msg.payload.includes('d')) {\n        msg.colour = '#dd9c2c';\n    } else if (msg.payload.includes('n')) {\n        msg.colour = '#918d87';\n    }\n    \n    msg.payload = icon;\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2080,"y":320,"wires":[["eb7ea5fd.2bd2f8"]]},{"id":"eb7ea5fd.2bd2f8","type":"template","z":"66e4af74.b6da2","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<i class=\"{{payload}}\"></i>{{weather}}","output":"str","x":2240,"y":320,"wires":[["2a8583ff.4fcf7c"]]},{"id":"c097aa.9cf7f858","type":"listUpcomingEvents","z":"7303a768.70b7a8","name":"Test","googleCredentials":"e3af7047.2947b","calendarIds":"[{\"id\":\"rosi_fuchs@gmx.de\",\"name\":\"Termine für alle\"}]","numEvents":"20","timespan":"240","refreshInterval":0,"x":310,"y":2480,"wires":[["5d7b306c.46a5e","63d5005e.0f5a1"]]},{"id":"68698308.471f8c","type":"inject","z":"7303a768.70b7a8","name":"","props":[],"repeat":"","crontab":"00 05 * * 1,2,3,4,5","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":140,"y":2480,"wires":[["c097aa.9cf7f858"]]},{"id":"5d7b306c.46a5e","type":"function","z":"7303a768.70b7a8","name":"","func":"for (var i = 0; i < msg.payload.length; i++) {\n    if ((msg.payload[i].summary.includes('F')) && (msg.payload[i].summary.includes('['))) {\n        var place1 = msg.payload[i].start.dateTime.indexOf('+');\n        msg.start = msg.payload[i].start.dateTime.substring(0, place1);\n        msg.payload = msg.payload[i];\n        var start = new Date();\n        start.setHours(msg.start.substring(11,13), msg.start.substring(14,16));\n        schwellwert = new Date()\n        schwellwert.setHours(9, 0);\n        if (start < schwellwert) { //->früh\n            node.warn('Früh: ' + msg.start + ' (-2h)');\n            return[msg, null];\n        } else { //->spät\n            var t = msg.payload.start.dateTime.indexOf('T');\n            msg.start = msg.payload.start.dateTime.substring(0, t + 1) + '08:15';\n            node.warn('Spät: ' + msg.start);\n            return[null, msg];\n        }\n    }\n}","outputs":2,"noerr":0,"initialize":"","finalize":"","x":460,"y":2480,"wires":[["890ee778.af8e28"],["44ebea3e.fa9634"]]},{"id":"890ee778.af8e28","type":"moment","z":"7303a768.70b7a8","name":"","topic":"","input":"start","inputType":"msg","inTz":"Europe/Berlin","adjAmount":"2","adjType":"hours","adjDir":"subtract","format":"YYYY-MM-DDTHH:mm","locale":"de_DE","output":"start","outputType":"msg","outTz":"Europe/Berlin","x":660,"y":2460,"wires":[["4d5a13e5.ca284c"]]},{"id":"46d47d25.fcabd4","type":"inject","z":"7303a768.70b7a8","name":"","props":[{"p":"payload"}],"repeat":"30","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":2620,"wires":[["a97154cd.ade178"]]},{"id":"a97154cd.ade178","type":"moment","z":"7303a768.70b7a8","name":"","topic":"","input":"payload","inputType":"msg","inTz":"Europe/Berlin","adjAmount":"0","adjType":"days","adjDir":"add","format":"YYYY-MM-DDTHH:mm","locale":"de_DE","output":"payload","outputType":"msg","outTz":"Europe/Berlin","x":360,"y":2660,"wires":[["16a0d9f2.f46ee6"]]},{"id":"16a0d9f2.f46ee6","type":"switch","z":"7303a768.70b7a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"kaffee_an","vt":"global"},{"t":"neq","v":"kaffee_an","vt":"global"}],"checkall":"true","repair":false,"outputs":2,"x":550,"y":2660,"wires":[["6264e5f8.266aec"],["fb37ada8.7f50a"]]},{"id":"4d5a13e5.ca284c","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"kaffee_an","pt":"global","to":"start","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":2480,"wires":[["d4fadd1e.2b7ae"]]},{"id":"d4fadd1e.2b7ae","type":"debug","z":"7303a768.70b7a8","name":"Next time","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":2480,"wires":[]},{"id":"6264e5f8.266aec","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"},{"t":"set","p":"target","pt":"msg","to":"Kaffeemaschine","tot":"str"},{"t":"set","p":"origin","pt":"msg","to":"Zeitplan","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":2640,"wires":[["7591cd86.a9caa4","cd0fafe6.f1dbf"]]},{"id":"7591cd86.a9caa4","type":"link out","z":"7303a768.70b7a8","name":"from Kaffeemaschine","links":["84cb51c2.07394"],"x":855,"y":2640,"wires":[]},{"id":"200f7670.d49c7a","type":"inject","z":"7303a768.70b7a8","name":"Test","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2020-10-21T06:30","payloadType":"str","x":130,"y":2680,"wires":[["a97154cd.ade178"]]},{"id":"fb37ada8.7f50a","type":"debug","z":"7303a768.70b7a8","name":"Wrong time","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":2680,"wires":[]},{"id":"a0c3ab55.063428","type":"inject","z":"7303a768.70b7a8","name":"Früh","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[{\"summary\":\"F/K [08:30-13:00]\",\"start\":{\"dateTime\":\"2020-10-21T08:30:00+2:00\"}},{\"summary\":\"K (K)\",\"start\":{\"dateTime\":\"2020-10-23T16:30:00+2:00\"}}]","payloadType":"json","x":310,"y":2420,"wires":[["5d7b306c.46a5e"]]},{"id":"44ebea3e.fa9634","type":"moment","z":"7303a768.70b7a8","name":"","topic":"","input":"start","inputType":"msg","inTz":"Europe/Berlin","adjAmount":"0","adjType":"days","adjDir":"add","format":"YYYY-MM-DDTHH:mm","locale":"de_DE","output":"start","outputType":"msg","outTz":"Europe/Berlin","x":660,"y":2500,"wires":[["4d5a13e5.ca284c"]]},{"id":"7abb2f3d.ab7d7","type":"inject","z":"7303a768.70b7a8","name":"Spät","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[{\"summary\":\"F/K [16:30-19:00]\",\"start\":{\"dateTime\":\"2020-10-17T16:30:00+2:00\"}},{\"summary\":\"K (K)\",\"start\":{\"dateTime\":\"2020-10-23T16:30:00+2:00\"}}]","payloadType":"json","x":310,"y":2540,"wires":[["5d7b306c.46a5e"]]},{"id":"cd0fafe6.f1dbf","type":"debug","z":"7303a768.70b7a8","name":"Right Time","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":910,"y":2680,"wires":[]},{"id":"46ac0be2.eaf594","type":"comment","z":"7303a768.70b7a8","name":"Kaffeemaschine (Kalendar)","info":"","x":170,"y":2340,"wires":[]},{"id":"cc8e348e.8f1c58","type":"comment","z":"7303a768.70b7a8","name":"MQTT-Update-SEND (Meross)","info":"Sendet zyklisch Statusanfrage an Python-Script (6s)","x":2230,"y":1820,"wires":[]},{"id":"e66daad8.b93378","type":"comment","z":"7303a768.70b7a8","name":"Update-SEND (Elements)","info":"Sendet zyklisch Statusanfrage an Python-Script (6s)","x":2770,"y":1820,"wires":[]},{"id":"3548fc40.21a544","type":"comment","z":"66e4af74.b6da2","name":"Info","info":"","x":1730,"y":80,"wires":[]},{"id":"77d8194a.827448","type":"change","z":"7303a768.70b7a8","name":"Roll close","rules":[{"t":"set","p":"payload","pt":"msg","to":"close","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":1600,"wires":[["84d209cc.0f6d78","f0790873.d634d8"]]},{"id":"289cded4.ef9902","type":"switch","z":"c4c66a25.1c39c8","name":"","property":"debug","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":280,"wires":[["7d984246.3bbc9c"]]},{"id":"7d984246.3bbc9c","type":"debug","z":"c4c66a25.1c39c8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":630,"y":280,"wires":[]},{"id":"a70b8de4.776c4","type":"function","z":"bbfff52d.d471d8","name":"WoZi_Alles","func":"//WoZi Szene Alles runter\nvar states = ['close', 'open']\nvar counter = global.get('WoZi_counter_stat') || 0;\nvar next_action = states[counter];\nvar WoZiJal1_pos = global.get('WoZiJal1_pos');\nvar WoZiJal2_pos = global.get('WoZiJal2_pos');\nvar WoZiRoll1_pos = global.get('WoZiRoll1_pos');\nvar WoZiRoll2_pos = global.get('WoZiRoll2_pos');\nvar WoZiJal1_status = global.get('WoZiJal1_status');\nvar WoZiJal2_status = global.get('WoZiJal2_status');\nvar WoZiRoll1_status = global.get('WoZiRoll1_status');\nvar WoZiRoll2_status = global.get('WoZiRoll2_status');\n\nif ((WoZiJal1_pos === 0) && (WoZiJal2_pos === 0) && (WoZiRoll1_pos === 0) && (WoZiRoll2_pos === 0) && (WoZiJal1_status == 'stop') && (WoZiJal2_status == 'stop') && (WoZiRoll1_status == 'stop') && (WoZiRoll2_status == 'stop') && (next_action == 'close')) {\n    next_action == 'open';\n    counter = 1;\n} else if ((WoZiJal1_pos == 100) && (WoZiJal2_pos == 100) && (WoZiRoll1_pos == 100) && (WoZiRoll2_pos == 100) && (WoZiJal1_status == 'stop') && (WoZiJal2_status == 'stop') && (WoZiRoll1_status == 'stop') && (WoZiRoll2_status == 'stop') && (next_action == 'open')) {\n    next_action = 'close';\n    counter = 0;\n}\n\nmsg.payload = next_action;\nmsg.target = 'WoZiJal1 WoZiJal2 WoZiRoll1 WoZiRoll2';\n\nif (counter == 1) {\n    counter = 0;\n} else if (counter === 0) {\n    counter = 1;\n}\n\nglobal.set('WoZi_counter_stat', counter);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":850,"y":420,"wires":[["868c6ece.49ff5"]]},{"id":"9ed93288.f6476","type":"inject","z":"66e4af74.b6da2","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":150,"y":3680,"wires":[["5d2506ca.9225c8","ee7f58b5.8b9738","4752f9d9.e93498"]]},{"id":"5d2506ca.9225c8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Wandschrank_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":3600,"wires":[["ab343faf.77cb5"]]},{"id":"e900aa56.10ff48","type":"link out","z":"66e4af74.b6da2","name":"from WoZi Lichter","links":["84cb51c2.07394"],"x":1755,"y":3680,"wires":[]},{"id":"95a5d443.6aa008","type":"ui_button","z":"66e4af74.b6da2","name":"Wand/Licht","group":"c3cdc2de.3cea6","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"Wand/Licht","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"toggle","payloadType":"str","topic":"Wandschrank Lichterkette","x":930,"y":3600,"wires":[["bd7efe18.35ce6"]]},{"id":"ab343faf.77cb5","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":3600,"wires":[["dd088dc7.55ea"],["6b8f8e3b.fa7f6"]]},{"id":"dd088dc7.55ea","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3580,"wires":[["95a5d443.6aa008"]]},{"id":"6b8f8e3b.fa7f6","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3620,"wires":[["95a5d443.6aa008"]]},{"id":"bd7efe18.35ce6","type":"switch","z":"66e4af74.b6da2","name":"","property":"Wandschrank_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1110,"y":3600,"wires":[["6b8f8e3b.fa7f6","689fba1.eb37b44"],["dd088dc7.55ea","b24bf213.c708c"]]},{"id":"689fba1.eb37b44","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"Wandschrank_status","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":3580,"wires":[["1d9e31c5.5390de"]]},{"id":"b24bf213.c708c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"Wandschrank_status","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":3620,"wires":[["1d9e31c5.5390de"]]},{"id":"ee7f58b5.8b9738","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"WoZiSchalter_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":3680,"wires":[["30144e78.176452"]]},{"id":"e5c8af74.128f3","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiSchalter","group":"c3cdc2de.3cea6","order":5,"width":2,"height":2,"passthru":false,"label":"","tooltip":"WoZiSchalter","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"toggle","payloadType":"str","topic":"WoZiSchalter","x":940,"y":3680,"wires":[["2cb8b072.3b17c"]]},{"id":"30144e78.176452","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":3680,"wires":[["cd9aac30.beb4f"],["d991fe48.6533f"]]},{"id":"cd9aac30.beb4f","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3660,"wires":[["e5c8af74.128f3"]]},{"id":"d991fe48.6533f","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3700,"wires":[["e5c8af74.128f3"]]},{"id":"2cb8b072.3b17c","type":"switch","z":"66e4af74.b6da2","name":"","property":"WoZiSchalter_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1110,"y":3680,"wires":[["d991fe48.6533f","1c0481d3.3f665e"],["cd9aac30.beb4f","32f45a05.5df396"]]},{"id":"1c0481d3.3f665e","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"WoZiSchalter_status","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":3660,"wires":[["1d9e31c5.5390de"]]},{"id":"32f45a05.5df396","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"WoZiSchalter_status","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":3700,"wires":[["1d9e31c5.5390de"]]},{"id":"d8af29ec.e71b68","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiAlles","group":"c3cdc2de.3cea6","order":3,"width":2,"height":2,"passthru":false,"label":"","tooltip":"WoZiAlles","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-power-off","payload":"","payloadType":"str","topic":"triggered","x":550,"y":4080,"wires":[["25ab89a0.bb7346","4a0722db.a27edc"]]},{"id":"25ab89a0.bb7346","type":"function","z":"66e4af74.b6da2","name":"","func":"msg.payload = 2;\nmsg.number_shelly = 2;\nmsg.number_input = 0;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1160,"y":4080,"wires":[["e5f2effe.34965"]],"info":"msg.number_shelly = 1   -> Shelly Nr.1\n\nmsg.number_input = 0    -> Leitung 1 (2er, links)\n\nmsg.payload = 1         -> Ebene 1"},{"id":"2dafc00.b96f04","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"black","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":4080,"wires":[["d8af29ec.e71b68"]]},{"id":"4a0722db.a27edc","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":4080,"wires":[["eeb9a94c.d9ee78","d8af29ec.e71b68"]]},{"id":"eeb9a94c.d9ee78","type":"delay","z":"66e4af74.b6da2","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":4080,"wires":[["2dafc00.b96f04"]]},{"id":"1e7ec776.61be39","type":"inject","z":"66e4af74.b6da2","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":140,"y":4000,"wires":[["4bf09377.2319bc"]]},{"id":"4bf09377.2319bc","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"Szene1_counter","pt":"global","to":"0","tot":"num"},{"t":"set","p":"Szene2_counter","pt":"global","to":"0","tot":"num"},{"t":"set","p":"Szene3_counter","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":4000,"wires":[[]]},{"id":"1a5b42a0.901d4d","type":"inject","z":"66e4af74.b6da2","name":"","props":[{"p":"payload","v":"","vt":"str"},{"p":"topic","v":"","vt":"string"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":150,"y":4580,"wires":[["1bba6a1.1f03896","e96c195.8cf0de8","e4cde9df.cce668","821b9436.5be9c8","6b6dd2e.fd4152c","5b2f7abd.62d2f4","26f36cce.609d44"]]},{"id":"1bba6a1.1f03896","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Wandschrank_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":4540,"wires":[["5a1519.ad174ae8"]]},{"id":"8db74d2d.21927","type":"ui_button","z":"66e4af74.b6da2","name":"Wand/Licht","group":"36bd1bf0.ec7384","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"toggle","payloadType":"str","topic":"Wandschrank Lichterkette","x":930,"y":4540,"wires":[["53f0f073.b08d5"]]},{"id":"5a1519.ad174ae8","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":4540,"wires":[["c742b095.9819f"],["ad304ad4.a3e978"]]},{"id":"c742b095.9819f","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4520,"wires":[["8db74d2d.21927"]]},{"id":"ad304ad4.a3e978","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"black","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4560,"wires":[["8db74d2d.21927"]]},{"id":"53f0f073.b08d5","type":"switch","z":"66e4af74.b6da2","name":"","property":"Wandschrank_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1110,"y":4540,"wires":[["8b7b9ceb.eb36d","ad304ad4.a3e978"],["806eaab2.4ae5e8","c742b095.9819f"]]},{"id":"8b7b9ceb.eb36d","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"Wandschrank_status","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":4520,"wires":[["18d1a174.3231bf"]]},{"id":"806eaab2.4ae5e8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"Wandschrank_status","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":4560,"wires":[["18d1a174.3231bf"]]},{"id":"e4cde9df.cce668","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"FlosNachttischlampe_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":4620,"wires":[["256e9cab.02f274"]]},{"id":"94b77de0.93624","type":"ui_button","z":"66e4af74.b6da2","name":"Nachtlampe F","group":"97b586bd.9d2f68","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-plug","payload":"toggle","payloadType":"str","topic":"FlosNachttischlampe","x":940,"y":4620,"wires":[["8f0a1eed.1c6eb"]]},{"id":"256e9cab.02f274","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":4620,"wires":[["69d03db0.a937f4"],["908fe3b8.d239e"]]},{"id":"69d03db0.a937f4","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4600,"wires":[["94b77de0.93624"]]},{"id":"908fe3b8.d239e","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"black","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4640,"wires":[["94b77de0.93624"]]},{"id":"8f0a1eed.1c6eb","type":"switch","z":"66e4af74.b6da2","name":"","property":"FlosNachttischlampe_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1110,"y":4620,"wires":[["908fe3b8.d239e","51d8c49d.68938c"],["69d03db0.a937f4","9503a498.0d1f88"]]},{"id":"51d8c49d.68938c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"FlosNachttischlampe_status","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1360,"y":4600,"wires":[["18d1a174.3231bf"]]},{"id":"9503a498.0d1f88","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"FlosNachttischlampe_status","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1360,"y":4640,"wires":[["18d1a174.3231bf"]]},{"id":"e96c195.8cf0de8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"StehlampeWeiss_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":4460,"wires":[["e60012d1.7787f"]]},{"id":"80385037.dab9a","type":"ui_button","z":"66e4af74.b6da2","name":"Steh W","group":"3570f019.47a02","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"toggle","payloadType":"str","topic":"StehlampeWeiss","x":920,"y":4460,"wires":[["f2990830.86e4b8"]]},{"id":"e60012d1.7787f","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":4460,"wires":[["a1547f8f.36c81"],["4bf1bc19.fff3c4"]]},{"id":"a1547f8f.36c81","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4440,"wires":[["80385037.dab9a"]]},{"id":"4bf1bc19.fff3c4","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"black","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4480,"wires":[["80385037.dab9a"]]},{"id":"f2990830.86e4b8","type":"switch","z":"66e4af74.b6da2","name":"","property":"StehlampeWeiss_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1110,"y":4460,"wires":[["4bf1bc19.fff3c4","4736adfd.755404"],["a1547f8f.36c81","6cac13b2.9b2d5c"]]},{"id":"4736adfd.755404","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"StehlampeWeiss_status","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":4440,"wires":[["18d1a174.3231bf"]]},{"id":"6cac13b2.9b2d5c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"StehlampeWeiss_status","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":4480,"wires":[["18d1a174.3231bf"]]},{"id":"36bd663b.18ddda","type":"link out","z":"66e4af74.b6da2","name":"from Meross","links":["84cb51c2.07394"],"x":1795,"y":4620,"wires":[]},{"id":"529f1461.9ace3c","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiWest","group":"c3cdc2de.3cea6","order":8,"width":2,"height":2,"passthru":false,"label":"","tooltip":"WoZiWest","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-power-off","payload":"triggered","payloadType":"str","topic":"","x":550,"y":4140,"wires":[["7177324d.09bb1c","3671d3f4.db9f4c"]]},{"id":"7177324d.09bb1c","type":"function","z":"66e4af74.b6da2","name":"","func":"msg.payload = 2;\nmsg.number_shelly = 1;\nmsg.number_input = 2;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1160,"y":4140,"wires":[["e5f2effe.34965"]],"info":"msg.number_shelly = 1   -> Shelly Nr.1\n\nmsg.number_input = 2    -> Leitung 3 (4er, links oben)\n\nmsg.payload = 2         -> Ebene 2"},{"id":"bd0f8f3e.12626","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"black","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":4140,"wires":[["529f1461.9ace3c"]]},{"id":"3671d3f4.db9f4c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":4140,"wires":[["57e74db9.dac234","529f1461.9ace3c"]]},{"id":"57e74db9.dac234","type":"delay","z":"66e4af74.b6da2","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":4140,"wires":[["bd0f8f3e.12626"]]},{"id":"a87d7f94.2f248","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiSüd","group":"c3cdc2de.3cea6","order":10,"width":2,"height":2,"passthru":false,"label":"","tooltip":"WoZiSüd","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-power-off","payload":"triggered","payloadType":"str","topic":"","x":540,"y":4200,"wires":[["bacc548a.f16628","94b8d717.2e3588"]]},{"id":"bacc548a.f16628","type":"function","z":"66e4af74.b6da2","name":"","func":"msg.payload = 2;\nmsg.number_shelly = 2;\nmsg.number_input = 2;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1160,"y":4200,"wires":[["e5f2effe.34965"]],"info":"msg.number_shelly = 2   -> Shelly Nr.2\n\nmsg.number_input = 2    -> Leitung 3 (4er, links unten)\n\nmsg.payload = 2         -> Ebene 2"},{"id":"a515fb6f.a49c08","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"black","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":4200,"wires":[["a87d7f94.2f248"]]},{"id":"94b8d717.2e3588","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":4200,"wires":[["596a22d2.34c28c","a87d7f94.2f248"]]},{"id":"596a22d2.34c28c","type":"delay","z":"66e4af74.b6da2","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":4200,"wires":[["a515fb6f.a49c08"]]},{"id":"c19ef818.d73748","type":"inject","z":"66e4af74.b6da2","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":140,"y":4140,"wires":[["a515fb6f.a49c08","bd0f8f3e.12626","2dafc00.b96f04"]]},{"id":"821b9436.5be9c8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Kaffeemaschine_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":4700,"wires":[["c89d6114.84c53"]]},{"id":"c0a06506.89b128","type":"ui_button","z":"66e4af74.b6da2","name":"Kaffeemaschine","group":"ed5a35e7.890178","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-coffee","payload":"toggle","payloadType":"str","topic":"Kaffeemaschine","x":940,"y":4700,"wires":[["eb661d0b.7387f"]]},{"id":"c89d6114.84c53","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":4700,"wires":[["13bdba37.edb656"],["7d74e74d.2b2f08"]]},{"id":"13bdba37.edb656","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4680,"wires":[["c0a06506.89b128"]]},{"id":"7d74e74d.2b2f08","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"black","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4720,"wires":[["c0a06506.89b128"]]},{"id":"eb661d0b.7387f","type":"switch","z":"66e4af74.b6da2","name":"","property":"Kaffeemaschine_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1110,"y":4700,"wires":[["7d74e74d.2b2f08","a550939.851b87"],["13bdba37.edb656","9be260f6.06265"]]},{"id":"a550939.851b87","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"Kaffeemaschine_status","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":4680,"wires":[["18d1a174.3231bf"]]},{"id":"9be260f6.06265","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"Kaffeemaschine_status","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":4720,"wires":[["18d1a174.3231bf"]]},{"id":"6b6dd2e.fd4152c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"FlosMediacenter_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":4780,"wires":[["377cc1d3.ae01be"]]},{"id":"d8b8cc8b.ffc72","type":"ui_button","z":"66e4af74.b6da2","name":"Media F","group":"4974cb0b.a77eb4","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-plug","payload":"toggle","payloadType":"str","topic":"FlosMediacenter","x":920,"y":4780,"wires":[["c5a744b3.f80998"]]},{"id":"377cc1d3.ae01be","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":4780,"wires":[["2ca9cf87.aec09"],["b0d01d56.596da"]]},{"id":"2ca9cf87.aec09","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4760,"wires":[["d8b8cc8b.ffc72"]]},{"id":"b0d01d56.596da","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"black","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4800,"wires":[["d8b8cc8b.ffc72"]]},{"id":"c5a744b3.f80998","type":"switch","z":"66e4af74.b6da2","name":"","property":"FlosMediacenter_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1110,"y":4780,"wires":[["b0d01d56.596da","2c0296b3.bfe91a"],["2ca9cf87.aec09","2972ef82.851fc"]]},{"id":"2c0296b3.bfe91a","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"FlosMediacenter_status","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":4760,"wires":[["18d1a174.3231bf"]]},{"id":"2972ef82.851fc","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"FlosMediacenter_status","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":4800,"wires":[["18d1a174.3231bf"]]},{"id":"5b2f7abd.62d2f4","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"JonasHiFi_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":4380,"wires":[["187ba818.51a6a8"]]},{"id":"48e1ca76.2feb14","type":"ui_button","z":"66e4af74.b6da2","name":"JonasHiFi","group":"e23f0254.591a4","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-plug","payload":"toggle","payloadType":"str","topic":"JonasHiFi","x":920,"y":4380,"wires":[["8383c2e4.dd803"]]},{"id":"187ba818.51a6a8","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":4380,"wires":[["4d84823a.f00b9c"],["bc37b9d3.d53a68"]]},{"id":"4d84823a.f00b9c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#24c18b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4360,"wires":[["48e1ca76.2feb14"]]},{"id":"bc37b9d3.d53a68","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"black","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4400,"wires":[["48e1ca76.2feb14"]]},{"id":"8383c2e4.dd803","type":"switch","z":"66e4af74.b6da2","name":"","property":"JonasHiFi_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1110,"y":4380,"wires":[["bc37b9d3.d53a68","a79cd730.a9cb18"],["4d84823a.f00b9c","e7ac5387.7efc9"]]},{"id":"a79cd730.a9cb18","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"JonasHiFi_status","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":4360,"wires":[["18d1a174.3231bf"]]},{"id":"e7ac5387.7efc9","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"JonasHiFi_status","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":4400,"wires":[["18d1a174.3231bf"]]},{"id":"26f36cce.609d44","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"WoZiSchalter_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":4860,"wires":[["5a82d41e.468c2c"]]},{"id":"72a11568.89f3fc","type":"ui_button","z":"66e4af74.b6da2","name":"WoZiSchalter","group":"bc49ad0d.db0e9","order":1,"width":2,"height":2,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"toggle","payloadType":"str","topic":"WoZiSchalter","x":930,"y":4860,"wires":[["8e1718e8.78bb08"]]},{"id":"5a82d41e.468c2c","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":4860,"wires":[["f12a9db2.2166f"],["b3e9142.21db6e8"]]},{"id":"f12a9db2.2166f","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4840,"wires":[["72a11568.89f3fc"]]},{"id":"b3e9142.21db6e8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4880,"wires":[["72a11568.89f3fc"]]},{"id":"8e1718e8.78bb08","type":"switch","z":"66e4af74.b6da2","name":"","property":"WoZiSchalter_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1110,"y":4860,"wires":[["b3e9142.21db6e8","47764b85.778ae4"],["f12a9db2.2166f","ecbca44b.ce6a58"]]},{"id":"47764b85.778ae4","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"WoZiSchalter_status","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":4840,"wires":[["18d1a174.3231bf"]]},{"id":"ecbca44b.ce6a58","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"WoZiSchalter_status","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":4880,"wires":[["18d1a174.3231bf"]]},{"id":"4752f9d9.e93498","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"KuecheDimmer_status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":3760,"wires":[["111137ed.dc3e38"]]},{"id":"a0351a18.15efa8","type":"ui_button","z":"66e4af74.b6da2","name":"KuecheDimmer","group":"c3cdc2de.3cea6","order":9,"width":2,"height":2,"passthru":false,"label":"","tooltip":"KücheDimmer","color":"","bgcolor":"{{background}}","icon":"wi-2x wi-wu-sunny","payload":"triggered","payloadType":"str","topic":"KuecheDimmer","x":940,"y":3760,"wires":[["f8c8023b.a648c"]]},{"id":"111137ed.dc3e38","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":3760,"wires":[["30ebbd04.6ea512"],["d5ec45e8.57d398"]]},{"id":"30ebbd04.6ea512","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3740,"wires":[["a0351a18.15efa8"]]},{"id":"d5ec45e8.57d398","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3780,"wires":[["a0351a18.15efa8"]]},{"id":"f8c8023b.a648c","type":"switch","z":"66e4af74.b6da2","name":"","property":"KuecheDimmer_status","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1110,"y":3760,"wires":[["d5ec45e8.57d398","8c165942.d7fa18"],["30ebbd04.6ea512","ee712735.701ad8"]]},{"id":"8c165942.d7fa18","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"KuecheDimmer_status","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1280,"y":3740,"wires":[["1d9e31c5.5390de"]]},{"id":"ee712735.701ad8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"KuecheDimmer_status","pt":"global","to":"true","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1280,"y":3780,"wires":[["1d9e31c5.5390de"]]},{"id":"50313a65.5cb8f4","type":"link out","z":"66e4af74.b6da2","name":"from Szenen","links":["2122d769.aeda18"],"x":1475,"y":4140,"wires":[]},{"id":"1c98cf46.948171","type":"comment","z":"66e4af74.b6da2","name":"Szenen (Home)","info":"","x":140,"y":3940,"wires":[]},{"id":"46356e15.f3455","type":"comment","z":"66e4af74.b6da2","name":"WoZiLichter (Home)","info":"","x":150,"y":3520,"wires":[]},{"id":"6bbb1462.c175cc","type":"comment","z":"66e4af74.b6da2","name":"Meross","info":"","x":110,"y":4320,"wires":[]},{"id":"ee530187.cc875","type":"comment","z":"66e4af74.b6da2","name":"Home","info":"","x":110,"y":60,"wires":[]},{"id":"e1dc48c8.866378","type":"comment","z":"66e4af74.b6da2","name":"Lichter","info":"","x":110,"y":2680,"wires":[]},{"id":"bcc61966.d5e988","type":"comment","z":"bbfff52d.d471d8","name":"EBENEN","info":"","x":80,"y":40,"wires":[]},{"id":"c9f3772a.081cc8","type":"function","z":"66e4af74.b6da2","name":"azimuth","func":"\nmsg.payload = (msg.payload).toFixed(2)\nglobal.set('sun_azimuth', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2140,"y":1140,"wires":[["204cd2ff.289efe"]]},{"id":"7f7a1c15.1f17c4","type":"function","z":"bbfff52d.d471d8","name":"BueroDimmer","func":"var status = global.get('BueroDimmer_status');\n\nif (status == true) {\n    msg.payload = 'off';\n} else {\n    msg.payload = 'on';\n}\n\nmsg.target = 'BueroDimmer';\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":860,"y":120,"wires":[["868c6ece.49ff5"]]},{"id":"ee946ab0.4c2138","type":"mqtt in","z":"8e49a2eb.1c1a3","name":"","topic":"shellies/WoZiTaster1/input_event/#","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":280,"y":440,"wires":[["3d91bd2f.c244c2"]]},{"id":"1fbffb1d.83cae5","type":"mqtt in","z":"8e49a2eb.1c1a3","name":"","topic":"shellies/WoZiTaster2/input/#","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":260,"y":480,"wires":[[]]},{"id":"dead865f.2e3138","type":"debug","z":"8e49a2eb.1c1a3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1070,"y":500,"wires":[]},{"id":"f1a77861.7923b8","type":"http request","z":"8e49a2eb.1c1a3","name":"","method":"GET","ret":"txt","paytoqs":"ignore","url":"http://192.168.100.167/status","tls":"","persist":false,"proxy":"","authType":"","x":710,"y":440,"wires":[["5cb3aa2c.c1d344"]]},{"id":"3d91bd2f.c244c2","type":"function","z":"8e49a2eb.1c1a3","name":"","func":"if (msg.topic.includes('input_event/0')) {\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":520,"y":440,"wires":[["f1a77861.7923b8","dead865f.2e3138"]]},{"id":"5cb3aa2c.c1d344","type":"function","z":"8e49a2eb.1c1a3","name":"","func":"msg.payload = JSON.parse(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":900,"y":440,"wires":[["dead865f.2e3138"]]},{"id":"8474dbcb.2983b8","type":"function","z":"bbfff52d.d471d8","name":"Wand/Lichtkette","func":"var status = global.get('Wandschrank_status');\n\nif (status == true) {\n    msg.payload = 'off';\n    global.set('Wandschrank_status', false);\n} else {\n    msg.payload = 'on';\n    global.set('Wandschrank_status', true);\n}\nmsg.target = 'Wandschrank Lichterkette';\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":860,"y":160,"wires":[["868c6ece.49ff5"]]},{"id":"aa4e50e5.684c3","type":"function","z":"8e49a2eb.1c1a3","d":true,"name":"","func":"if (msg.payload == 0)\n    if (global.get(\"WoZiJal1_lastdir\") != close)\n        msg.payload = 1;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":280,"y":740,"wires":[[]]},{"id":"a7a56113.9854b","type":"function","z":"66e4af74.b6da2","name":"level","func":"\nmsg.payload = (msg.payload).toFixed(2)\nglobal.set('sun_level', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2130,"y":1180,"wires":[["bc52c8ea.3e7bb8"]]},{"id":"e73521d5.d4f8d","type":"function","z":"7303a768.70b7a8","name":"SchlaZi toggle","func":"var status = global.get('SchlaZiDimmer_status');\n\nif (status == true) {\n    msg.payload = 'off';\n} else {\n    msg.payload = 'on';\n}\n\nmsg.target = 'SchlaZiDimmer';\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":780,"y":1160,"wires":[["71c7a219.5132bc"]]},{"id":"13f302a7.b2d11d","type":"function","z":"7303a768.70b7a8","name":"SchlaZi toggle dimmlevel","func":"var level = global.get('SchlaZiDimmer_brightness');\n\nif (level == 50) {\n    msg.payload = 10;\n} else if (level == 100) {\n    msg.payload = 50;\n} else {\n    msg.payload = 100;\n}\n\nmsg.target = 'SchlaZiDimmer';\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":810,"y":1200,"wires":[["71c7a219.5132bc"]]},{"id":"b686c884.ca9c58","type":"function","z":"6715eb60.6ca494","name":"","func":"if (global.get('SchlaZiTaster_pressed') == false) {\n    msg.topic = '';\n    global.set('SchlaZiTaster_pressed', true);\n} else if ((global.get('SchlaZiTaster_pressed') === true)) {\n    global.set('SchlaZiTaster_pressed', false);\n    msg.target = 'SchlaZiDimmer';\n    msg.payload = global.get('SchlaZiDimmer_brightness_save');\n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"// Code added here will be run once\n// whenever the node is deployed.\nglobal.set('SchlaZiDimmer_brightness_save', 50);\nglobal.set('SchlaZiTaster_pressed', false);","finalize":"","x":520,"y":200,"wires":[["90b3beac.fc8eb","1d732f74.8ce261","3d63f179.b6d3de"]]},{"id":"12209f6f.97ef11","type":"mqtt in","z":"6715eb60.6ca494","d":true,"name":"","topic":"shellies/SchlaZiTaster/input/#","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":160,"y":200,"wires":[["db8653a9.d041e"]]},{"id":"1d732f74.8ce261","type":"debug","z":"6715eb60.6ca494","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":670,"y":240,"wires":[]},{"id":"db8653a9.d041e","type":"switch","z":"6715eb60.6ca494","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":370,"y":200,"wires":[["b686c884.ca9c58"]]},{"id":"90b3beac.fc8eb","type":"delay","z":"6715eb60.6ca494","name":"","pauseType":"delay","timeout":"700","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":720,"y":200,"wires":[["11aa14b6.2e0dfb"]]},{"id":"11aa14b6.2e0dfb","type":"function","z":"6715eb60.6ca494","name":"","func":"global.set('SchlaZiTaster_pressed', false);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":920,"y":200,"wires":[[]]},{"id":"3d63f179.b6d3de","type":"link out","z":"6715eb60.6ca494","name":"von Frank_test1","links":["84cb51c2.07394"],"x":615,"y":280,"wires":[]},{"id":"d0213cbd.fdade","type":"sunrise","z":"6715eb60.6ca494","name":"SunCalc","lat":"50.149437","lon":"8.544286","start":"sunrise","end":"sunsetStart","soff":"30","eoff":"-30","x":100,"y":580,"wires":[["d3d1d637.a8e698","7714ead5.cae924"],[]]},{"id":"d3d1d637.a8e698","type":"function","z":"6715eb60.6ca494","name":"DaylightSwitch","func":"var srise = (\"0\" + msg.start.getHours()).slice(-2) + ':' + (\"0\" + msg.start.getMinutes()).slice(-2);\nvar sset = (\"0\" + msg.end.getHours()).slice(-2) + ':' + (\"0\" + msg.end.getMinutes()).slice(-2);\nvar ctime = (\"0\" + msg.now.getHours()).slice(-2) + ':' + (\"0\" + msg.now.getMinutes()).slice(-2);\nvar dflag = global.get('daytime_flag');\nvar dscnt = global.get('DaylightSwitchCounter');\n\n\nglobal.set('DaylightSwitchCounter', dscnt);\nglobal.set('daytime_flag', dflag);\n\ntime_now = msg.now.getTime(); // in miliseconds\ntime_rise = msg.start.getTime(); // 30 Min. = 1.800.000\ntime_set = msg.end.getTime();\n\nif (time_now > time_rise){\n    if (time_now < time_set) { //morning lights off\n        if(dflag == false) {\n           global.set('daytime_flag', true);\n           global.set('lights_switch_on', false);\n           global.set('lights_switch_trigger', true);\n           global.set('DaylightSwitchTime_' + global.get('DaylightSwitchCounter'), ctime + 'a');\n           global.set('DaylightSwitchCounter', global.get('DaylightSwitchCounter') + 1);\n        }\n    }\n    else { //evening lights on\n        if(dflag == true) {\n           global.set('daytime_flag', false);\n           global.set('lights_switch_on', true);\n           global.set('lights_switch_trigger', true);\n           global.set('DaylightSwitchTime_' + global.get('DaylightSwitchCounter'), ctime + 'b');\n           global.set('DaylightSwitchCounter', global.get('DaylightSwitchCounter') + 1);\n        }\n    }\n}\n\nif ((ctime < \"02:00\") && (ctime > \"01:30\")) { //off during night\n    if (global.get('lights_switch_on')) {\n       global.set('lights_switch_on', false);\n       global.set('lights_switch_trigger', true);\n       global.set('DaylightSwitchTime_' + global.get('DaylightSwitchCounter'), ctime + 'c');\n       global.set('DaylightSwitchCounter', global.get('DaylightSwitchCounter') + 1);\n    }\n}\n\n//if (ctime > sset){\n//    node.warn(\"\\rDunkel\\r\" + time_now + \"\\r\" + time_rise + \"\\r\" + time_set);\n//}\n//else{\n//    node.warn(\"\\rNoch helle\");\n//}\n//node.warn(\"\\rSonnenaufgang: \"+ srise + \"\\rSonnenuntergang: \"+ sset + \"\\rUhrzeit: \"+ ctime);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":280,"y":580,"wires":[[]]},{"id":"d065fba7.59bbc8","type":"function","z":"66e4af74.b6da2","name":"SunUp","func":"var srise = (\"0\" + msg.start.getHours()).slice(-2) + ':' + (\"0\" + msg.start.getMinutes()).slice(-2);\nmsg.payload = srise;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2130,"y":1220,"wires":[["21860045.42d27"]]},{"id":"21860045.42d27","type":"ui_text","z":"66e4af74.b6da2","group":"e1be4ca8.57f3f","order":7,"width":3,"height":1,"name":"","label":"Sun up: ","format":"{{msg.payload}}","layout":"row-spread","x":2300,"y":1220,"wires":[]},{"id":"488ff973.9064d8","type":"function","z":"66e4af74.b6da2","name":"SunDown","func":"var sset = (\"0\" + msg.end.getHours()).slice(-2) + ':' + (\"0\" + msg.end.getMinutes()).slice(-2);\n\nmsg.payload = sset;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2140,"y":1260,"wires":[["82d4cc3.40d573"]]},{"id":"82d4cc3.40d573","type":"ui_text","z":"66e4af74.b6da2","group":"e1be4ca8.57f3f","order":9,"width":3,"height":1,"name":"","label":"Sun down: ","format":"{{msg.payload}}","layout":"row-spread","x":2310,"y":1260,"wires":[]},{"id":"8267bf86.07ed","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"start","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1950,"y":1220,"wires":[["d065fba7.59bbc8"]]},{"id":"9114ba37.2b0428","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"end","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1950,"y":1260,"wires":[["488ff973.9064d8"]]},{"id":"70bf36c8.27b698","type":"inject","z":"7303a768.70b7a8","name":"Kueche","props":[{"p":"payload"},{"p":"number_shelly","v":"1","vt":"num"},{"p":"number_input","v":"0","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":1050,"y":360,"wires":[["bbaee99f.328e88","c69376e7.9048c8"]]},{"id":"c1f76240.f7459","type":"debug","z":"7303a768.70b7a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":430,"y":1800,"wires":[]},{"id":"bf2d001d.0aeb1","type":"comment","z":"6715eb60.6ca494","name":"Jalousien schräg stellen","info":"","x":710,"y":500,"wires":[]},{"id":"196ee8d0.4ffcb7","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"},{"t":"set","p":"target","pt":"msg","to":"WoZiJal1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":580,"wires":[["7a18df2a.9a5ea"]]},{"id":"bb36623b.307d3","type":"comment","z":"6715eb60.6ca494","name":"Tag/Nachtschalter","info":"","x":130,"y":440,"wires":[]},{"id":"91a8c668.4e9258","type":"debug","z":"6715eb60.6ca494","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1580,"y":780,"wires":[]},{"id":"3fde602b.41c3d","type":"function","z":"6715eb60.6ca494","name":"http prep","func":"var topic = msg.topic;\n/*\nif (topic.search('WoZiJal1/roller/0/pos') > 0) {\n    msg.payload = 'WoZiJal1';\n    node.send({url:\"http://WoZiJal1/roller/0\", target:'WoZiJal1'});\n}\nelse if (topic.search('WoZiJal2/roller/0/pos') > 0) {\n    msg.payload = 'WoZiJal2';\n    node.send({url:\"http://WoZiJal2/roller/0\", target:'WoZiJal2'});\n}\n*/\nif (topic.search('SchlaZiRoll2/roller/0/pos') > 0) {\n    msg.payload = 'SchlaZiRoll2';\n    node.send({url:\"http://SchlaZiRoll2/roller/0\", target:'SchlaZiRoll2'});\n}\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":830,"y":780,"wires":[["e4862788.6628e8"]]},{"id":"6bc32f8b.fffab","type":"mqtt in","z":"6715eb60.6ca494","d":true,"name":"","topic":"shellies/#","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":670,"y":780,"wires":[["3fde602b.41c3d"]]},{"id":"3460e2c1.c6adfe","type":"function","z":"6715eb60.6ca494","name":"extract pos/dir","func":"flow.set(('last_direction'), JSON.parse(msg.payload).last_direction);\nflow.set(('current_pos'), JSON.parse(msg.payload).current_pos);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1310,"y":780,"wires":[["476a5b5f.bf1464","91a8c668.4e9258"]]},{"id":"14c38297.abfc7d","type":"http request","z":"6715eb60.6ca494","name":"get status","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","authType":"","x":1130,"y":780,"wires":[["3460e2c1.c6adfe"]]},{"id":"e4862788.6628e8","type":"delay","z":"6715eb60.6ca494","name":"delay","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":780,"wires":[["14c38297.abfc7d"]]},{"id":"676f2f2e.ee752","type":"link out","z":"6715eb60.6ca494","d":true,"name":"from Jal.schräg","links":["84cb51c2.07394"],"x":1565,"y":840,"wires":[]},{"id":"684c1bd7.e25914","type":"switch","z":"6715eb60.6ca494","name":"last_dir open?","property":"last_direction","propertyType":"flow","rules":[{"t":"eq","v":"open","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1110,"y":840,"wires":[["ae2dc389.0e953","23f8c1b.373f43e"]]},{"id":"23f8c1b.373f43e","type":"change","z":"6715eb60.6ca494","name":"close","rules":[{"t":"set","p":"payload","pt":"msg","to":"close","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1280,"y":840,"wires":[["676f2f2e.ee752","91a8c668.4e9258"]]},{"id":"ae2dc389.0e953","type":"delay","z":"6715eb60.6ca494","name":"delay 200","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1290,"y":900,"wires":[["46c4d3d6.66cfec"]]},{"id":"46c4d3d6.66cfec","type":"change","z":"6715eb60.6ca494","name":"stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1440,"y":900,"wires":[["676f2f2e.ee752","91a8c668.4e9258"]]},{"id":"476a5b5f.bf1464","type":"switch","z":"6715eb60.6ca494","name":"current_pos up?","property":"current_pos","propertyType":"flow","rules":[{"t":"eq","v":"100","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":910,"y":840,"wires":[["684c1bd7.e25914"]]},{"id":"95b2e528.a327d8","type":"debug","z":"6715eb60.6ca494","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1580,"y":560,"wires":[]},{"id":"d9fb1616.6d8738","type":"function","z":"6715eb60.6ca494","name":"http prep","func":"var topic = msg.topic;\n\nif (topic.search('WoZiJal1/roller/0/pos') > 0) {\n    msg.payload = 'WoZiJal1';\n    node.send({url:\"http://WoZiJal1/roller/0\", target:'WoZiJal1'});\n}\n\n/*\nelse if (topic.search('WoZiJal2/roller/0/pos') > 0) {\n    msg.payload = 'WoZiJal2';\n    node.send({url:\"http://WoZiJal2/roller/0\", target:'WoZiJal2'});\n}\n*/","outputs":1,"noerr":0,"initialize":"","finalize":"","x":830,"y":560,"wires":[["cc383fd.fe927c"]]},{"id":"9099.928acf677","type":"mqtt in","z":"6715eb60.6ca494","d":true,"name":"","topic":"shellies/#","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":670,"y":560,"wires":[["d9fb1616.6d8738"]]},{"id":"c3e3a034.6cb0e","type":"function","z":"6715eb60.6ca494","name":"extract pos/dir","func":"flow.set(('last_direction'), JSON.parse(msg.payload).last_direction);\nflow.set(('current_pos'), JSON.parse(msg.payload).current_pos);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1310,"y":560,"wires":[["976efbb2.16a398","95b2e528.a327d8"]]},{"id":"31a5f1e5.5b9b1e","type":"http request","z":"6715eb60.6ca494","name":"get status","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","authType":"","x":1130,"y":560,"wires":[["c3e3a034.6cb0e"]]},{"id":"cc383fd.fe927c","type":"delay","z":"6715eb60.6ca494","name":"delay","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":560,"wires":[["31a5f1e5.5b9b1e"]]},{"id":"a3b8bd3e.19ea6","type":"link out","z":"6715eb60.6ca494","name":"from Jal.schräg","links":["84cb51c2.07394"],"x":1565,"y":620,"wires":[]},{"id":"20a3d120.90ccbe","type":"switch","z":"6715eb60.6ca494","name":"last_dir close?","property":"last_direction","propertyType":"flow","rules":[{"t":"eq","v":"close","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1110,"y":620,"wires":[["e8b4f320.98ded","5857d7b7.419c48"]]},{"id":"5857d7b7.419c48","type":"change","z":"6715eb60.6ca494","name":"open","rules":[{"t":"set","p":"payload","pt":"msg","to":"open","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1280,"y":620,"wires":[["a3b8bd3e.19ea6","95b2e528.a327d8"]]},{"id":"e8b4f320.98ded","type":"delay","z":"6715eb60.6ca494","name":"delay 200","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1290,"y":680,"wires":[["a70d2630.35a8b8"]]},{"id":"a70d2630.35a8b8","type":"change","z":"6715eb60.6ca494","name":"stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1440,"y":680,"wires":[["a3b8bd3e.19ea6","95b2e528.a327d8"]]},{"id":"976efbb2.16a398","type":"switch","z":"6715eb60.6ca494","name":"current_pos down?","property":"current_pos","propertyType":"flow","rules":[{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":900,"y":620,"wires":[["20a3d120.90ccbe"]]},{"id":"1438d0b2.68146f","type":"mqtt in","z":"6715eb60.6ca494","d":true,"name":"","topic":"Hausautomation/Keller/WoZiDimmer/#","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":950,"y":380,"wires":[["b54acc75.ec243"]]},{"id":"9ba2eca9.493d5","type":"debug","z":"6715eb60.6ca494","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1370,"y":440,"wires":[]},{"id":"b54acc75.ec243","type":"switch","z":"6715eb60.6ca494","name":"","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"/on","vt":"str"},{"t":"cont","v":"/off","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1190,"y":380,"wires":[["3cd8bdea.23eb82","9ba2eca9.493d5"],["3449a4e4.7c251c","9ba2eca9.493d5"]]},{"id":"5d594b4.c8d5db4","type":"mqtt in","z":"7303a768.70b7a8","name":"","topic":"shellies/#","qos":"0","datatype":"auto","broker":"cfb77cfe.81f87","x":120,"y":2860,"wires":[["b5e5b024.aac58","169ee9f5.0807b6"]]},{"id":"169ee9f5.0807b6","type":"delay","z":"7303a768.70b7a8","name":"delay 700ms","pauseType":"delay","timeout":"700","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":290,"y":2900,"wires":[["b14b5f89.f0bc9"]]},{"id":"b14b5f89.f0bc9","type":"function","z":"7303a768.70b7a8","name":"","func":"if (msg.topic.includes('Dimmer') && (msg.topic.endsWith('input/0') || (msg.topic.endsWith('input/1')))) {\n    var substring = msg.topic.substring(msg.topic.indexOf('/') + 1, msg.topic.indexOf('/', msg.topic.indexOf('/') + 1));\n    var number = msg.topic.slice(-1);\n    var room = substring.replace('Dimmer', '')\n    var counter_0 = global.get(room + '_counter_' + number) || 0;\n    var status = global.get(substring + '_status') || 0;\n    var secondtime = global.get('second_time_' + substring.slice(0,1)) || false;\n    var brightness = global.get(substring + '_brightness') || 0;\n    var save = global.get(substring + '_brightness_save') || 0;\n    \n    if (msg.payload == 1) {\n        if (counter_0 == 2) {\n            msg.topic = '';\n            msg.target = substring;\n            if (status) {\n                if (brightness == 100) {\n                    if (secondtime) {\n                        msg.payload = save;\n                        global.set('second_time_' + substring.slice(0,1), false);\n                    } else {\n                        msg.payload = null;\n                        global.set('second_time_' + substring.slice(0,1), true);\n                    }\n                }\n                return msg;\n            }\n        }\n    }\n    global.set(room + '_counter_' + number, 0)\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":460,"y":2900,"wires":[["27113848.5899e8","8e416239.dd04f"]]},{"id":"b5e5b024.aac58","type":"function","z":"7303a768.70b7a8","name":"","func":"if (msg.topic.includes('Dimmer') && (msg.topic.endsWith('input/0') || (msg.topic.endsWith('input/1')))) {\n    var place1 = msg.topic.indexOf('/');\n    var place2 = msg.topic.indexOf('/', place1 + 1);\n    var substring = msg.topic.substring(place1 + 1, place2);\n    var number = msg.topic.slice(-1);\n    var room = substring.replace('Dimmer', '')\n    var counter_0 = global.get(room + '_counter_' + number) || 0;\n\n    if (msg.payload == 1) {\n        if (msg.topic.endsWith('input/' + number)) {\n            if (counter_0 < 2) {\n                global.set(room + '_counter_' + number, counter_0 + parseInt(msg.payload));\n            }\n            return msg;\n        }\n    }\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":280,"y":2860,"wires":[["5b950715.7d9168"]]},{"id":"27113848.5899e8","type":"link out","z":"7303a768.70b7a8","name":"Dimmer Doppelklick","links":["84cb51c2.07394"],"x":575,"y":2900,"wires":[]},{"id":"8e416239.dd04f","type":"debug","z":"7303a768.70b7a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":630,"y":2940,"wires":[]},{"id":"1ccfa96c.227f87","type":"comment","z":"7303a768.70b7a8","name":"Dimmertaste Doppelklick Helligkeitsspeicher","info":"","x":230,"y":2800,"wires":[]},{"id":"12457702.85a4a9","type":"http in","z":"7303a768.70b7a8","name":"","url":"/home","method":"get","upload":false,"swaggerDoc":"","x":130,"y":3060,"wires":[["e6807e67.c7985"]]},{"id":"c7126f93.6a5b","type":"http response","z":"7303a768.70b7a8","name":"","statusCode":"","headers":{"content-type":"text/html"},"x":730,"y":3060,"wires":[]},{"id":"e6807e67.c7985","type":"function","z":"7303a768.70b7a8","name":"Http->Main_Filter","func":"if ('target' in msg.payload) {\n    msg.target = msg.payload.target;\n}\nif ('command' in msg.payload) {\n    if (isNaN(parseInt(msg.payload)) === true) {\n        msg.payload = msg.payload.command;\n    } else {\n        msg.payload = parseInt(msg.payload.command);\n    }\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":330,"y":3060,"wires":[["a982b510.77e568","decfb523.bbe438"]]},{"id":"a982b510.77e568","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Thx :P","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":3060,"wires":[["c7126f93.6a5b"]]},{"id":"decfb523.bbe438","type":"link out","z":"7303a768.70b7a8","name":"from Webserver","links":["84cb51c2.07394"],"x":475,"y":3100,"wires":[]},{"id":"530c4849.2fdb88","type":"comment","z":"7303a768.70b7a8","name":"Webserver für Steuerung über http","info":"An main Kommandos über http senden z.B. ``http://192.168.100.98:1880/home/?target=FloZiDimmer&command=on``","x":200,"y":3000,"wires":[]},{"id":"c13ff04.947531","type":"inject","z":"7303a768.70b7a8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"2","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":3890,"y":1880,"wires":[["8a5621ab.091cb"]]},{"id":"8a5621ab.091cb","type":"function","z":"7303a768.70b7a8","name":"","func":"var Abfrage = ['getCurrent','getMedVoltage','getVoltage','getWatts'];\n\nfor (var i = 0; i < Abfrage.length; i++) {\n    node.send({payload:Abfrage[i] , topic:'Hausautomation/Keller/WoZiDimmer/command'});\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":4060,"y":1880,"wires":[["9d23ce37.2f836"]]},{"id":"9d23ce37.2f836","type":"mqtt out","z":"7303a768.70b7a8","name":"","topic":"","qos":"0","retain":"false","broker":"cfb77cfe.81f87","x":4210,"y":1880,"wires":[]},{"id":"b121b74c.f784d8","type":"comment","z":"7303a768.70b7a8","name":"Update (Stromsensor)","info":"","x":3900,"y":1820,"wires":[]},{"id":"79490cab.1d7ee4","type":"link out","z":"6715eb60.6ca494","name":"von switch WoZiDimmer","links":["84cb51c2.07394"],"x":1495,"y":380,"wires":[]},{"id":"3cd8bdea.23eb82","type":"change","z":"6715eb60.6ca494","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"},{"t":"set","p":"target","pt":"msg","to":"WoZiDimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1360,"y":360,"wires":[["79490cab.1d7ee4"]]},{"id":"3449a4e4.7c251c","type":"change","z":"6715eb60.6ca494","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"},{"t":"set","p":"target","pt":"msg","to":"WoZiDimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1360,"y":400,"wires":[["79490cab.1d7ee4"]]},{"id":"a9edef43.4ff62","type":"range","z":"6715eb60.6ca494","minin":"0","maxin":"100","minout":"0","maxout":"100","action":"scale","round":false,"property":"payload","name":"","x":1200,"y":420,"wires":[[]]},{"id":"561e2b98.1e3f64","type":"change","z":"7303a768.70b7a8","name":"Kaffee an","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"},{"t":"set","p":"target","pt":"msg","to":"Kaffeemaschine","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":1300,"wires":[["4d4ecb4a.2b98f4","f35bca21.ac7338"]]},{"id":"81622cfd.a1cd5","type":"link in","z":"7303a768.70b7a8","name":"Meross Update","links":["54f4499c.7b9448"],"x":2235,"y":1920,"wires":[["4dcdf7ca.08be38"]]},{"id":"60daad6f.eca884","type":"change","z":"7303a768.70b7a8","name":"HiFi toggle","rules":[{"t":"set","p":"payload","pt":"msg","to":"toggle","tot":"str"},{"t":"set","p":"target","pt":"msg","to":"JonasHiFi","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":1340,"wires":[["4d4ecb4a.2b98f4"]]},{"id":"a8d4fab0.dc20a8","type":"function","z":"7303a768.70b7a8","name":"Dimmer","func":"var targets = msg.target.split(' ');\nvar command = msg.payload;\n\nfor (var i = 0; i < targets.length; i++) {\n    if (isNaN(parseInt(command)) === true) {\n        if (command == 'toggle') {\n            if (global.get(targets[i] + '_status') === true) {\n                msg.payload = 'off';\n            } else if (global.get(targets[i] + '_status') == false) {\n                msg.payload = 'on';\n            }\n        }\n        msg.topic = 'shellies/' + targets[i] + '/light/0/command';\n        msg.operation = \"action.devices.commands.OnOff\";\n    } else {\n        command = parseInt(command);\n        if ((command >= 0) && (command <= 100)) {\n            msg.payload = {\"brightness\":command};\n            msg.topic = 'shellies/' + targets[i] + '/light/0/set';\n            msg.operation = \"action.devices.commands.BrightnessAbsolute\";\n        }\n    }\n    node.send(msg);\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":860,"wires":[["b75b7e10.3b4db","18534853.7ad308","f85590cf.75715"]]},{"id":"55a6def5.85327","type":"function","z":"7303a768.70b7a8","name":"Rolläden","func":"var targets = msg.target.split(' ');\n\nfor (var i = 0; i < targets.length; i++) {\n    if (isNaN(parseInt(msg.payload)) === true) {\n        msg.topic = 'shellies/' + targets[i] + '/roller/0/command';\n    } else {\n        msg.payload = parseInt(msg.payload);\n        if ((msg.payload >= 0) && (msg.payload <= 100)) {\n            msg.topic = 'shellies/' + targets[i] + '/roller/0/command/pos';\n        }\n    }\n    node.send(msg);\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":900,"wires":[["18534853.7ad308","f85590cf.75715"]]},{"id":"5b86ad4e.8e6894","type":"function","z":"8e49a2eb.1c1a3","d":true,"name":"Dimmer","func":"var targets = msg.target.split(' ');\nvar messages = [];\n\nfunction copy(mainObject) {\n  let objectCopy = {};\n  let key;\n  for (key in mainObject) {\n    objectCopy[key] = mainObject[key];\n  }\n  return objectCopy;\n}\n\nfor (var i = 0; i < targets.length; i++) {\n    messages[i] = copy(msg);\n    \n    if (isNaN(parseInt(msg.payload)) === true) {\n        if (msg.payload == 'toggle') {\n            if (global.get(targets[i] + '_status') === true) {\n                messages[i].payload = 'off';\n            } else if (global.get(targets[i] + '_status') == false) {\n                messages[i].payload = 'on';\n            }\n        }\n        messages[i].topic = 'shellies/' + targets[i] + '/light/0/command';\n        messages[i].operation = \"action.devices.commands.OnOff\";\n    } else {\n        if ((msg.payload >= 0) && (msg.payload <= 100)) {\n            messages[i].topic = 'shellies/' + targets[i] + '/light/0/set';\n            messages[i][\"payload\"] = {\"brightness\":msg.payload};\n            messages[i].operation = \"action.devices.commands.BrightnessAbsolute\";\n        }\n    }\n}\n\nreturn messages;","outputs":4,"noerr":0,"initialize":"","finalize":"","x":380,"y":1060,"wires":[[],[],[],[]]},{"id":"ff7e15e2.bd4498","type":"function","z":"8e49a2eb.1c1a3","d":true,"name":"Rolläden","func":"var targets = msg.target.split(' ');\nvar messages = [];\n\nfunction copy(mainObject) {\n  let objectCopy = {};\n  let key;\n  for (key in mainObject) {\n    objectCopy[key] = mainObject[key];\n  }\n  return objectCopy;\n}\n\nfor (var i = 0; i < targets.length; i++) {\n    messages[i] = copy(msg);\n    if (isNaN(parseInt(msg.payload)) === true) {\n        messages[i].topic = 'shellies/' + targets[i] + '/roller/0/command';\n    } else {\n        messages[i].topic = 'shellies/' + msg.target + '/roller/0/command/pos';\n    }\n}\n\nreturn messages;","outputs":11,"noerr":0,"initialize":"","finalize":"","x":540,"y":1060,"wires":[[],[],[],[],[],[],[],[],[],[],[]]},{"id":"6f048598.89da6c","type":"function","z":"7303a768.70b7a8","name":"Taster","func":"var targets = msg.target.split(' ');\n\nfor (var i = 0; i < targets.length; i++) {\n    if (isNaN(parseInt(msg.payload)) === true) {\n        msg.topic = 'shellies/' + targets[i] + '/roller/0/command';\n    } else {\n        msg.payload = parseInt(msg.payload);\n        if ((msg.payload >= 0) && (msg.payload <= 100)) {\n            msg.topic = 'shellies/' + targets[i] + '/roller/0/command/pos';\n        }\n    }\n    node.send(msg);\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":690,"y":940,"wires":[["18534853.7ad308","f85590cf.75715"]]},{"id":"8efad23d.711a","type":"function","z":"8e49a2eb.1c1a3","d":true,"name":"Taster","func":"var targets = msg.target.split(' ');\nvar messages = [];\n\nfunction copy(mainObject) {\n  let objectCopy = {};\n  let key;\n  for (key in mainObject) {\n    objectCopy[key] = mainObject[key];\n  }\n  return objectCopy;\n}\n\nfor (var i = 0; i < targets.length; i++) {\n    messages[i] = copy(msg);\n    if (isNaN(parseInt(msg.payload)) === true) {\n        messages[i].topic = 'shellies/' + targets[i] + '/roller/0/command';\n    } else {\n        messages[i].topic = 'shellies/' + msg.target + '/roller/0/command/pos';\n    }\n}\n\nreturn messages;","outputs":5,"noerr":0,"initialize":"","finalize":"","x":690,"y":1060,"wires":[[],[],[],[],[]]},{"id":"cee6daf2.df4678","type":"function","z":"7303a768.70b7a8","name":"Meross","func":"var targets = msg.target.split(' ');\nvar command = msg.payload;\nmsg.topic = \"Hausautomation\";\n\n\nfor (var i = 0; i < targets.length; i++) {\n    msg.payload = targets[i] + \" \" + command;\n    node.send(msg);\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":980,"wires":[["18534853.7ad308","f85590cf.75715"]]},{"id":"ed86a234.69068","type":"function","z":"8e49a2eb.1c1a3","d":true,"name":"Meross","func":"var targets = msg.target.split(' ');\nvar messages = [];\nmsg.topic = \"Hausautomation\";\n\nfunction copy(mainObject) {\n  let objectCopy = {};\n  let key;\n  for (key in mainObject) {\n    objectCopy[key] = mainObject[key];\n  }\n  return objectCopy;\n}\n\nfor (var i = 0; i < targets.length; i++) {\n    messages[i] = copy(msg);\n    messages[i].payload = targets[i] + \" \" + msg.payload;\n}\n\nreturn messages;","outputs":8,"noerr":0,"initialize":"","finalize":"","x":840,"y":1060,"wires":[[],[],[],[],[],[],[],[]]},{"id":"e12fe5b.d71b218","type":"link out","z":"7303a768.70b7a8","name":"to ack on","links":["4f69041.c9fe8fc"],"x":1075,"y":1300,"wires":[]},{"id":"f35bca21.ac7338","type":"change","z":"7303a768.70b7a8","name":"ack on prep","rules":[{"t":"set","p":"target","pt":"msg","to":"WoZiRoll1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":1300,"wires":[["e12fe5b.d71b218"]]},{"id":"7033bf5.8ddee4","type":"file","z":"8e49a2eb.1c1a3","name":"","filename":"/home/pi/Documents/Node-Red/Status_log.json","appendNewline":true,"createDir":true,"overwriteFile":"false","encoding":"none","x":810,"y":1240,"wires":[[]]},{"id":"ee04c434.ca9ac8","type":"function","z":"8e49a2eb.1c1a3","d":true,"name":"Unbenannt function","func":"function copy(mainObject) {\n  let objectCopy = {};\n  let key;\n  for (key in mainObject) {\n    objectCopy[key] = mainObject[key];\n  }\n  return objectCopy;\n}\n\nmsg2 = copy(msg);\nmsg2.payload = msg.topic;\nmsg3 = copy(msg);\nmsg3.payload = new Date().getTime();\nreturn[msg3, msg2, msg];","outputs":3,"noerr":0,"initialize":"","finalize":"","x":260,"y":1240,"wires":[["76b3f33f.f23c8c"],["701ca1d1.e7989"],["16aece20.ec9032"]]},{"id":"76b3f33f.f23c8c","type":"moment","z":"8e49a2eb.1c1a3","name":"","topic":"","input":"payload","inputType":"msg","inTz":"Europe/Berlin","adjAmount":0,"adjType":"days","adjDir":"add","format":"hh:mm:ss","locale":"de_DE","output":"payload","outputType":"msg","outTz":"Europe/Berlin","x":490,"y":1200,"wires":[["7033bf5.8ddee4"]]},{"id":"701ca1d1.e7989","type":"delay","z":"8e49a2eb.1c1a3","name":"","pauseType":"delay","timeout":"45","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":1240,"wires":[["7033bf5.8ddee4"]]},{"id":"16aece20.ec9032","type":"delay","z":"8e49a2eb.1c1a3","name":"","pauseType":"delay","timeout":"50","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":1280,"wires":[["7033bf5.8ddee4"]]},{"id":"ea79ba8a.3a9cf8","type":"debug","z":"de80a1bf.054a4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":650,"y":320,"wires":[]},{"id":"883517d8.020088","type":"debug","z":"7303a768.70b7a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":3690,"y":1880,"wires":[]},{"id":"78a8d6f2.afe638","type":"inject","z":"7303a768.70b7a8","name":"Calibration","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":3880,"y":2020,"wires":[["2085e3a1.102fbc"]]},{"id":"2085e3a1.102fbc","type":"function","z":"7303a768.70b7a8","name":"","func":"var Abfrage = ['cal'];\n\nfor (var i = 0; i < Abfrage.length; i++) {\n    node.send({payload:Abfrage[i] , topic:'Hausautomation/Keller/WoZiDimmer/command'});\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":4040,"y":2020,"wires":[["fce72b49.977cd8","3e1ddfdb.c29a8"]]},{"id":"fce72b49.977cd8","type":"mqtt out","z":"7303a768.70b7a8","name":"","topic":"","qos":"0","retain":"false","broker":"cfb77cfe.81f87","x":4190,"y":2020,"wires":[]},{"id":"8af352ad.98f54","type":"comment","z":"7303a768.70b7a8","name":"Update (Stromsensor)","info":"","x":3900,"y":1960,"wires":[]},{"id":"98729ddd.354b8","type":"ui_button","z":"66e4af74.b6da2","name":"menu_up","group":"66f8d9f4.25d918","order":9,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-arrow-circle-up","payload":"menu_up","payloadType":"str","topic":"","x":2360,"y":1580,"wires":[["8bffbb33.70fa88"]]},{"id":"8bffbb33.70fa88","type":"mqtt out","z":"66e4af74.b6da2","name":"","topic":"Hausautomation/ir_server","qos":"0","retain":"false","broker":"cfb77cfe.81f87","x":2890,"y":1580,"wires":[]},{"id":"742ef8cf.d38088","type":"ui_button","z":"66e4af74.b6da2","name":"menu_down","group":"66f8d9f4.25d918","order":15,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-arrow-circle-down","payload":"menu_down","payloadType":"str","topic":"","x":2370,"y":1620,"wires":[["8bffbb33.70fa88"]]},{"id":"2960bfb.8bd9d4","type":"ui_button","z":"66e4af74.b6da2","name":"menu_right","group":"66f8d9f4.25d918","order":13,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-arrow-circle-right","payload":"menu_right","payloadType":"str","topic":"","x":2370,"y":1660,"wires":[["8bffbb33.70fa88"]]},{"id":"c745f364.33302","type":"ui_button","z":"66e4af74.b6da2","name":"menu_left","group":"66f8d9f4.25d918","order":11,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-arrow-circle-left","payload":"menu_left","payloadType":"str","topic":"","x":2360,"y":1700,"wires":[["8bffbb33.70fa88"]]},{"id":"8279f88f.d24b98","type":"ui_button","z":"66e4af74.b6da2","name":"menu","group":"66f8d9f4.25d918","order":8,"width":"2","height":"2","passthru":false,"label":"Menu","tooltip":"","color":"","bgcolor":"black","icon":"","payload":"menu","payloadType":"str","topic":"","x":2350,"y":1460,"wires":[["8bffbb33.70fa88"]]},{"id":"c2309b0e.573418","type":"ui_button","z":"66e4af74.b6da2","name":"menu_ok","group":"66f8d9f4.25d918","order":12,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-times-circle","payload":"menu_ok","payloadType":"str","topic":"","x":2360,"y":1740,"wires":[["8bffbb33.70fa88"]]},{"id":"df11a53e.d2bba8","type":"ui_button","z":"66e4af74.b6da2","name":"volume_down","group":"66f8d9f4.25d918","order":17,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-volume-down","payload":"volume_down","payloadType":"str","topic":"","x":2380,"y":1780,"wires":[["8bffbb33.70fa88"]]},{"id":"8057753b.6c33d8","type":"ui_button","z":"66e4af74.b6da2","name":"volume_up","group":"66f8d9f4.25d918","order":19,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-volume-up","payload":"volume_up","payloadType":"str","topic":"","x":2370,"y":1820,"wires":[["8bffbb33.70fa88"]]},{"id":"aafc53eb.ca5c8","type":"ui_button","z":"66e4af74.b6da2","name":"volume_mute","group":"66f8d9f4.25d918","order":18,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-volume-off","payload":"volume_mute","payloadType":"str","topic":"","x":2380,"y":1860,"wires":[["8bffbb33.70fa88"]]},{"id":"3c0ff8c6.c2efa8","type":"ui_button","z":"66e4af74.b6da2","name":"toggle","group":"66f8d9f4.25d918","order":2,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-power-off","payload":"triggered","payloadType":"str","topic":"","x":2350,"y":1420,"wires":[["2fb9acb0.2652e4"]]},{"id":"ddc3722b.a2674","type":"ui_button","z":"66e4af74.b6da2","name":"menu_esc","group":"66f8d9f4.25d918","order":10,"width":"2","height":"2","passthru":false,"label":"Esc","tooltip":"","color":"","bgcolor":"black","icon":"","payload":"menu_esc","payloadType":"str","topic":"","x":2370,"y":1540,"wires":[["8bffbb33.70fa88"]]},{"id":"f9b66172.75c34","type":"inject","z":"7303a768.70b7a8","name":"Voltage","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":3870,"y":2080,"wires":[["3e1ddfdb.c29a8"]]},{"id":"3e1ddfdb.c29a8","type":"function","z":"7303a768.70b7a8","name":"","func":"var Abfrage = ['getCurrent','getMedVoltage','getVoltage','getWatts'];\n\nfor (var i = 0; i < Abfrage.length; i++) {\n    node.send({payload:Abfrage[i] , topic:'Hausautomation/Keller/WoZiDimmer/command'});\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":4040,"y":2080,"wires":[["92e65aab.082958"]]},{"id":"92e65aab.082958","type":"mqtt out","z":"7303a768.70b7a8","name":"","topic":"","qos":"0","retain":"false","broker":"cfb77cfe.81f87","x":4190,"y":2080,"wires":[]},{"id":"babd9806.9ab5f8","type":"inject","z":"7303a768.70b7a8","name":"getDevices","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"3600","crontab":"","once":false,"onceDelay":0.1,"topic":"Hausautomation","payload":"getDevices","payloadType":"str","x":3890,"y":2220,"wires":[["c302b52f.739e38"]]},{"id":"c302b52f.739e38","type":"mqtt out","z":"7303a768.70b7a8","name":"","topic":"","qos":"0","retain":"false","broker":"cfb77cfe.81f87","x":4050,"y":2220,"wires":[]},{"id":"bdb6e4e.ef5a518","type":"comment","z":"7303a768.70b7a8","name":"Update (Meross_Devices)","info":"","x":3910,"y":2160,"wires":[]},{"id":"c89ebf33.24ad2","type":"comment","z":"6715eb60.6ca494","name":"WoZiDimmer steuern","info":"","x":900,"y":320,"wires":[]},{"id":"8ae82c16.94002","type":"function","z":"7303a768.70b7a8","name":"Liste aktualisieren","func":"var Meross_plugs = global.get('Meross_plugs') || null;\n\nif (Meross_plugs == null) {\n    msg.payload = 'getDevices';\n    msg.topic = 'Hausautomation';\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2390,"y":1860,"wires":[["b94a755d.e479a8"]]},{"id":"66d8eb88.279284","type":"switch","z":"de80a1bf.054a4","name":"","property":"check_FloZiDimmer","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":310,"y":280,"wires":[["6c4d94f8.8409ac"]]},{"id":"ce8a305f.85627","type":"change","z":"de80a1bf.054a4","name":"","rules":[{"t":"set","p":"check_FloZiDimmer","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":240,"wires":[[]]},{"id":"baf0c1d7.0b13f","type":"inject","z":"de80a1bf.054a4","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"00 00 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":150,"y":180,"wires":[["413d10c.ed37df"]]},{"id":"413d10c.ed37df","type":"change","z":"de80a1bf.054a4","name":"","rules":[{"t":"set","p":"check_FloZiDimmer","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":180,"wires":[[]]},{"id":"bb02a04b.b96f4","type":"ui_button","z":"66e4af74.b6da2","name":"menu_up","group":"fb3506b8.c26738","order":5,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-arrow-circle-up","payload":"up","payloadType":"str","topic":"","x":2360,"y":2060,"wires":[["5f5fd93c.e21dd8"]]},{"id":"829441a6.a123","type":"ui_button","z":"66e4af74.b6da2","name":"menu_down","group":"fb3506b8.c26738","order":11,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-arrow-circle-down","payload":"down","payloadType":"str","topic":"","x":2370,"y":2100,"wires":[["5f5fd93c.e21dd8"]]},{"id":"da6317c8.117268","type":"ui_button","z":"66e4af74.b6da2","name":"menu_right","group":"fb3506b8.c26738","order":9,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-arrow-circle-right","payload":"right","payloadType":"str","topic":"","x":2370,"y":2140,"wires":[["5f5fd93c.e21dd8"]]},{"id":"1f426290.4aeedd","type":"ui_button","z":"66e4af74.b6da2","name":"menu_left","group":"fb3506b8.c26738","order":7,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-arrow-circle-left","payload":"left","payloadType":"str","topic":"","x":2360,"y":2180,"wires":[["5f5fd93c.e21dd8"]]},{"id":"c8189e1a.aafae","type":"ui_button","z":"66e4af74.b6da2","name":"menu","group":"fb3506b8.c26738","order":4,"width":"2","height":"2","passthru":false,"label":"Menu","tooltip":"","color":"","bgcolor":"black","icon":"","payload":"menu","payloadType":"str","topic":"","x":2350,"y":1980,"wires":[["5f5fd93c.e21dd8"]]},{"id":"4a50d73a.ca2f88","type":"ui_button","z":"66e4af74.b6da2","name":"menu_ok","group":"fb3506b8.c26738","order":8,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-times-circle","payload":"enter","payloadType":"str","topic":"","x":2360,"y":2220,"wires":[["5f5fd93c.e21dd8"]]},{"id":"de93deb9.d9197","type":"ui_button","z":"66e4af74.b6da2","name":"volume_down","group":"fb3506b8.c26738","order":16,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-volume-down","payload":"volume_down","payloadType":"str","topic":"","x":2380,"y":2340,"wires":[["2b44d04f.05935"]]},{"id":"6ecd1bf4.ade324","type":"ui_button","z":"66e4af74.b6da2","name":"volume_up","group":"fb3506b8.c26738","order":18,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-volume-up","payload":"volume_up","payloadType":"str","topic":"","x":2370,"y":2380,"wires":[["8d7fca89.bc18f8"]]},{"id":"de15aedc.b8519","type":"ui_button","z":"66e4af74.b6da2","name":"volume_mute","group":"fb3506b8.c26738","order":17,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-volume-off","payload":"volume_mute","payloadType":"str","topic":"","x":2380,"y":2420,"wires":[["7d61cbb7.cb8074"]]},{"id":"49b0aff3.86d45","type":"ui_button","z":"66e4af74.b6da2","name":"turn_off","group":"fb3506b8.c26738","order":2,"width":"2","height":"2","passthru":false,"label":"<font size=6>0</font>","tooltip":"","color":"","bgcolor":"black","icon":"","payload":"power","payloadType":"str","topic":"","x":2360,"y":1940,"wires":[["5f5fd93c.e21dd8"]]},{"id":"71b49cc8.a02424","type":"ui_button","z":"66e4af74.b6da2","name":"menu_esc","group":"fb3506b8.c26738","order":6,"width":"2","height":"2","passthru":false,"label":"Esc","tooltip":"","color":"","bgcolor":"black","icon":"","payload":"cancel","payloadType":"str","topic":"","x":2370,"y":2020,"wires":[["5f5fd93c.e21dd8"]]},{"id":"5f5fd93c.e21dd8","type":"viera write","z":"66e4af74.b6da2","name":"sendCommand","host":"192.168.100.29","function":"sendCommand","x":2560,"y":2120,"wires":[]},{"id":"2b44d04f.05935","type":"viera read","z":"66e4af74.b6da2","name":"","host":"192.168.100.29","function":"getVolume","x":2550,"y":2340,"wires":[["32fdf319.74cc3c"]]},{"id":"8d7fca89.bc18f8","type":"viera read","z":"66e4af74.b6da2","name":"","host":"192.168.100.29","function":"getVolume","x":2550,"y":2380,"wires":[["d8052746.e87338"]]},{"id":"7d61cbb7.cb8074","type":"viera read","z":"66e4af74.b6da2","name":"getMute","host":"192.168.100.29","function":"getMute","x":2560,"y":2420,"wires":[["89669cb3.7cdbd"]]},{"id":"32fdf319.74cc3c","type":"function","z":"66e4af74.b6da2","name":"","func":"msg.payload = parseInt(msg.payload) - 10;\n\nif (msg.payload < 0) {\n    msg.payload = 0;\n}\nmsg.payload = String(msg.payload);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2720,"y":2340,"wires":[["3245eae6.934c86"]]},{"id":"d8052746.e87338","type":"function","z":"66e4af74.b6da2","name":"","func":"msg.payload = parseInt(msg.payload) + 10;\n\nif (msg.payload > 100) {\n    msg.payload = 100;\n}\nmsg.payload = String(msg.payload);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2720,"y":2380,"wires":[["3245eae6.934c86"]]},{"id":"3245eae6.934c86","type":"viera write","z":"66e4af74.b6da2","name":"","host":"192.168.100.29","function":"setVolume","x":2870,"y":2360,"wires":[]},{"id":"89669cb3.7cdbd","type":"function","z":"66e4af74.b6da2","name":"","func":"if (msg.payload === true) {\n    msg.payload = false;\n} else if (msg.payload == false) {\n    msg.payload = true;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2720,"y":2420,"wires":[["f279c1de.df234"]]},{"id":"f279c1de.df234","type":"viera write","z":"66e4af74.b6da2","name":"","host":"192.168.100.29","function":"setMute","x":2870,"y":2420,"wires":[]},{"id":"b6892af3.b72928","type":"ui_button","z":"66e4af74.b6da2","name":"channel_down","group":"fb3506b8.c26738","order":13,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-chevron-circle-down","payload":"CH_DOWN","payloadType":"str","topic":"","x":2380,"y":2260,"wires":[["5f5fd93c.e21dd8"]]},{"id":"a878f894.de58b8","type":"ui_button","z":"66e4af74.b6da2","name":"channel_up","group":"fb3506b8.c26738","order":15,"width":"2","height":"2","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"black","icon":"fa-2x fa-chevron-circle-up","payload":"CH_UP","payloadType":"str","topic":"","x":2370,"y":2300,"wires":[["5f5fd93c.e21dd8"]]},{"id":"8fb61455.400f58","type":"change","z":"c4c66a25.1c39c8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.clouds","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":240,"wires":[[]]},{"id":"e75ce9e5.c68768","type":"openweathermap","z":"33f5e83a.90c548","name":"","wtype":"forecast","lon":"","lat":"","city":"Schwalbach am Taunus","country":"Germany","language":"de","x":170,"y":120,"wires":[["271d3c93.23ad44"]]},{"id":"362cf437.4d511c","type":"comment","z":"7303a768.70b7a8","name":"Beamer Status","info":"","x":140,"y":3160,"wires":[]},{"id":"98741925.2225f8","type":"function","z":"7303a768.70b7a8","name":"","func":"var threshold = global.get('Beamer_threshold') || 5;\n\nif (parseInt(msg.payload) > threshold) {\n    global.set('Beamer_on', true);\n} else if (parseInt(msg.payload) < threshold) {\n    global.set('Beamer_on', false);\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":400,"y":3220,"wires":[[]]},{"id":"c1a0d763.2a6ac8","type":"inject","z":"7303a768.70b7a8","name":"","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Beamer_power","payloadType":"global","x":190,"y":3220,"wires":[["98741925.2225f8"]]},{"id":"2fb9acb0.2652e4","type":"switch","z":"66e4af74.b6da2","name":"","property":"Beamer_on","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":2490,"y":1420,"wires":[["e3773a0b.4abf68"],["fe3a0bcd.2c15b8"]]},{"id":"a33e7a0c.f07818","type":"inject","z":"66e4af74.b6da2","name":"","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Beamer_on","payloadType":"global","x":1790,"y":1420,"wires":[["9c119304.2f764"]]},{"id":"9c119304.2f764","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1970,"y":1420,"wires":[["446e8af6.83c004"],["dc7dc608.28e9d8"]]},{"id":"446e8af6.83c004","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2160,"y":1400,"wires":[["3c0ff8c6.c2efa8"]]},{"id":"dc7dc608.28e9d8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2160,"y":1440,"wires":[["3c0ff8c6.c2efa8"]]},{"id":"e3773a0b.4abf68","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"turn_off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2660,"y":1400,"wires":[["8bffbb33.70fa88","dc7dc608.28e9d8"]]},{"id":"fe3a0bcd.2c15b8","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"turn_on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2660,"y":1440,"wires":[["8bffbb33.70fa88","446e8af6.83c004"]]},{"id":"c5ea5178.61491","type":"function","z":"7303a768.70b7a8","name":"Beamer","func":"msg.origin = \"Abfrage\";\nvar status = msg.payload.relays[0].ison;\nvar consumption = msg.payload.meters[0].power;\n\nglobal.set(msg.target + \"_status\", status);\nglobal.set(msg.target + \"_power\", consumption);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1840,"y":1940,"wires":[["41a5b514.79178c"]]},{"id":"ce89c5de.716b28","type":"change","z":"de80a1bf.054a4","name":"","rules":[{"t":"set","p":"check_FloZiDimmer","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":100,"wires":[[]]},{"id":"1cbd444e.0c377c","type":"comment","z":"7303a768.70b7a8","name":"Initalisierung","info":"","x":130,"y":20,"wires":[]},{"id":"f764e7c6.dad768","type":"function","z":"7303a768.70b7a8","name":"Initialisierung","func":"//<--siehe Setup","outputs":1,"noerr":0,"initialize":"global.set('Shelly_Lichter', ['BueroDimmer', 'SchlaZiDimmer', 'JoZiDimmer', 'FloZiDimmer', 'KuecheDimmer', 'WoZiDimmer']);\nglobal.set('Shelly_Rolladen', ['WoZiJal1', 'WoZiJal2', 'WoZiRoll1', 'WoZiRoll2', 'BueroRoll', 'SchlaZiRoll1', 'SchlaZiRoll2', 'JoZiRoll', 'KlaZiRoll1', 'KlaZiRoll2', 'FloZiRoll']);\nglobal.set('Shelly_Taster', ['BueroTaster', 'SchlaZiTaster', 'JoZiTaster', 'FloZiTaster', 'KlaZiTaster']);\nglobal.set('Shelly_Stecker', [/*'WaschMaschine', */'Beamer']);\nglobal.set('Beamer_threshold', 5);\nglobal.set('Beamer_on', false);\nglobal.set('shelly_keys', ['power', 'status', 'brightness', 'pos', 'lastdir']);\n//global.set('News_Sources', ['STERN.de', 'Faz.net', 'Spiegel Online', 'tagesschau.de']);\n//global.set('lights_switch_trigger', false);\n//global.set('lights_switch_on', false);\nif (global.get('daytime_flag') == undefined) {\n    global.set(('daytime_flag'), true);\n}\nif (global.get('DaylightSwitchCounter') == undefined) {\n    global.set('DaylightSwitchCounter', 0);\n}\nglobal.set('RollClosePos',24);","finalize":"","x":130,"y":80,"wires":[[]]},{"id":"1d9e31c5.5390de","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"origin","pt":"msg","to":"input","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1620,"y":3680,"wires":[["e900aa56.10ff48"]]},{"id":"e5f2effe.34965","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"origin","pt":"msg","to":"input","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":4140,"wires":[["50313a65.5cb8f4"]]},{"id":"18d1a174.3231bf","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"origin","pt":"msg","to":"input","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1660,"y":4620,"wires":[["36bd663b.18ddda"]]},{"id":"3ed975a8.80668a","type":"change","z":"de80a1bf.054a4","name":"","rules":[{"t":"set","p":"origin","pt":"msg","to":"Presence Faker","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":280,"wires":[["3483db36.d13964"]]},{"id":"9d816ed8.cebd98","type":"ui_text","z":"66e4af74.b6da2","group":"15d9c580.8ac2db","order":1,"width":6,"height":1,"name":"","label":"Median:","format":"{{msg.payload}} max)","layout":"row-spread","x":2280,"y":880,"wires":[]},{"id":"ba707cdf.b06fd8","type":"function","z":"66e4af74.b6da2","name":"Stromsensor_medvoltage","func":"msg.payload = global.get('Stromsensor_medvoltage') + ' V (' + global.get('Stromsensor_medvoltage_max');\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1990,"y":880,"wires":[["9d816ed8.cebd98"]]},{"id":"ac565e1.a7de9a","type":"ui_text","z":"66e4af74.b6da2","group":"15d9c580.8ac2db","order":3,"width":6,"height":1,"name":"","label":"Current:","format":"{{msg.payload}} max)","layout":"row-spread","x":2280,"y":920,"wires":[]},{"id":"2d13fc77.43b49c","type":"function","z":"66e4af74.b6da2","name":"Stromsensor_current","func":"msg.payload = global.get('Stromsensor_current') + ' A (' + global.get('Stromsensor_current_max');\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1980,"y":920,"wires":[["ac565e1.a7de9a"]]},{"id":"12684df6.00cfba","type":"ui_text","z":"66e4af74.b6da2","group":"15d9c580.8ac2db","order":2,"width":6,"height":1,"name":"","label":"Voltage:","format":"{{msg.payload}} max)","layout":"row-spread","x":2280,"y":960,"wires":[]},{"id":"41555164.d7217","type":"function","z":"66e4af74.b6da2","name":"Stromsensor_voltage","func":"msg.payload = global.get('Stromsensor_voltage') + ' mV (' + global.get('Stromsensor_voltage_max');\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1980,"y":960,"wires":[["12684df6.00cfba"]]},{"id":"2c803dd4.8f5a0a","type":"ui_text","z":"66e4af74.b6da2","group":"15d9c580.8ac2db","order":4,"width":6,"height":1,"name":"","label":"Power:","format":"{{msg.payload}} max)","layout":"row-spread","x":2270,"y":1000,"wires":[]},{"id":"41c18b1.f438ef4","type":"function","z":"66e4af74.b6da2","name":"Stromsensor_watts","func":"msg.payload = global.get('Stromsensor_watts') + ' W (' + global.get('Stromsensor_watts_max');\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1970,"y":1000,"wires":[["2c803dd4.8f5a0a"]]},{"id":"be1b2365.90cd8","type":"change","z":"66e4af74.b6da2","name":"Beamer","rules":[{"t":"set","p":"payload","pt":"msg","to":"Beamer_power","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1940,"y":580,"wires":[["e384b4e.5959048","b2630b88.20e4a8"]]},{"id":"e384b4e.5959048","type":"ui_gauge","z":"66e4af74.b6da2","name":"Verbrauch_Gauge","group":"f9637c71.6424a","order":1,"width":6,"height":6,"gtype":"gage","title":"Beamer","label":"Watt","format":"{{value}}","min":0,"max":"400","colors":["#00b500","#e6e600","#ca3838"],"seg1":"83","seg2":"400","x":2310,"y":560,"wires":[]},{"id":"b2630b88.20e4a8","type":"ui_chart","z":"66e4af74.b6da2","name":"Verbrauch_Chart","group":"f9637c71.6424a","order":2,"width":6,"height":6,"label":"Verbrauch","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"400","removeOlder":"10","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#44ff00","#5d8eea","#ff7f0e","#f42f2f","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2310,"y":600,"wires":[[]]},{"id":"5b950715.7d9168","type":"debug","z":"7303a768.70b7a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":430,"y":2860,"wires":[]},{"id":"b6774086.262fa","type":"link in","z":"7303a768.70b7a8","name":"Shelly Update","links":[],"x":895,"y":1920,"wires":[["63657e45.b2938"]]},{"id":"4212e8ec.d9c1b8","type":"ui_button","z":"66e4af74.b6da2","name":"macro_normal","group":"66f8d9f4.25d918","order":5,"width":"2","height":"2","passthru":false,"label":"Macro1","tooltip":"Switch Normal/Eco","color":"","bgcolor":"black","icon":"","payload":"macro_normal","payloadType":"str","topic":"","x":2380,"y":1500,"wires":[[]]},{"id":"bbcddbfe.70c448","type":"debug","z":"7303a768.70b7a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1010,"y":760,"wires":[]},{"id":"6caf3644.f4f6b8","type":"google-home","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4223","acknowledge":true,"name":"JonasDimmer","topic":"JoZiDimmer","x":130,"y":2160,"wires":[["2b82ec53.ab7bf4"]]},{"id":"91a06fc8.619e","type":"google-home","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4224","acknowledge":true,"name":"BüroDimmer","topic":"BueroDimmer","x":130,"y":2120,"wires":[["2b82ec53.ab7bf4"]]},{"id":"7cb42f03.f95c1","type":"google-home","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4227","acknowledge":true,"name":"SchlafzimmerDimmer","topic":"SchlaZiDimmer","x":160,"y":2240,"wires":[["2b82ec53.ab7bf4"]]},{"id":"1883e14f.4fef8f","type":"google-home","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4874","acknowledge":true,"name":"FlosRolladen","topic":"FloZiRoll","x":1030,"y":2120,"wires":[["eea13f38.b81f7"]]},{"id":"201e89a4.af6806","type":"debug","z":"7303a768.70b7a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1630,"y":2220,"wires":[]},{"id":"eea13f38.b81f7","type":"switch","z":"7303a768.70b7a8","name":"","property":"payload.command","propertyType":"msg","rules":[{"t":"cont","v":"OpenClose","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1270,"y":2180,"wires":[["bde8958d.7572b8"]]},{"id":"bde8958d.7572b8","type":"change","z":"7303a768.70b7a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.params.openPercent","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1450,"y":2180,"wires":[["201e89a4.af6806","865e897c.3ce328"]]},{"id":"865e897c.3ce328","type":"link out","z":"7303a768.70b7a8","name":"from Google-Ro","links":["84cb51c2.07394"],"x":1595,"y":2180,"wires":[]},{"id":"fcaf4590.1f90d8","type":"debug","z":"7303a768.70b7a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":820,"y":2240,"wires":[]},{"id":"ab31871d.6ee4c8","type":"google-home","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4876","acknowledge":true,"name":"JonasRolladen","topic":"JoZiRoll","x":1040,"y":2160,"wires":[["eea13f38.b81f7"]]},{"id":"86c6713b.c9534","type":"google-home","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4879","acknowledge":true,"name":"Schlafzimmer Rolladen 1","topic":"SchlaZiRoll1","x":1070,"y":2200,"wires":[["eea13f38.b81f7"]]},{"id":"3a74d62f.cbf8ca","type":"google-home","z":"7303a768.70b7a8","conf":"56c315a4.4bff8c","device":"4880","acknowledge":true,"name":"Schlafzimmer Rolladen 2","topic":"SchlaZiRoll2","x":1070,"y":2240,"wires":[["eea13f38.b81f7"]]},{"id":"b987d5a9.b287a8","type":"http request","z":"259c4f3c.ca9f9","name":"","method":"GET","ret":"obj","paytoqs":"ignore","url":"http://newsapi.org/v2/top-headlines?country=de&apiKey=e5e9db2258824b948726c31f7d72dc9e","tls":"","persist":false,"proxy":"","authType":"","x":320,"y":1240,"wires":[["4fe25c80.766e74"]]},{"id":"d326c8cc.482ab8","type":"inject","z":"259c4f3c.ca9f9","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":120,"y":1240,"wires":[["b987d5a9.b287a8"]]},{"id":"4fe25c80.766e74","type":"function","z":"259c4f3c.ca9f9","name":"","func":"var articles = [];\nvar x = 0;\n\nfor (var i = 0; i < msg.payload.articles.length; i++) {\n    if (global.get('News_Sources').includes(msg.payload.articles[i].source.name)) {\n        msg.payload.articles[i].title = msg.payload.articles[i].title.substring(0, msg.payload.articles[i].title.indexOf(' -'))\n        //msg.payload.articles[i].icon = msg.payload.articles[i].urlToImage;\n        msg.payload.articles[i].description = 'Veröffentlicht am ' + msg.payload.articles[i].publishedAt.replace('Z', '') +  '\\r\\nAutor: ' + msg.payload.articles[i].author;// + '\\r\\n' + msg.payload.articles[i].description;\n        articles[x] = (msg.payload.articles[i]);\n        x++;\n    }\n}\n\nreturn {payload:articles}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":510,"y":1240,"wires":[["7d0ff690.1f1818","13327fd0.69598"]]},{"id":"7d0ff690.1f1818","type":"debug","z":"259c4f3c.ca9f9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":960,"y":1240,"wires":[]},{"id":"13327fd0.69598","type":"ui_list","z":"259c4f3c.ca9f9","d":true,"group":"1145aa5e.5d0b16","name":"News","order":1,"width":"10","height":"4","lineType":"two","actionType":"click","allowHTML":true,"outputs":1,"topic":"List_Viewer","x":660,"y":1280,"wires":[["83a5201c.de805"]]},{"id":"83a5201c.de805","type":"function","z":"259c4f3c.ca9f9","name":"","func":"return {url:msg.payload.url};","outputs":1,"noerr":0,"initialize":"","finalize":"","x":810,"y":1280,"wires":[["7d0ff690.1f1818"]]},{"id":"271d3c93.23ad44","type":"function","z":"33f5e83a.90c548","name":"","func":"var current_date = new Date();\nvar forecast_date = new Date();\nvar forecast_days = msg.days || 1;\nvar next_day = [];\n\nfor (var i = 0; i < msg.payload.length; i++) {\n    forecast_date = new Date(msg.payload[i].dt_txt);\n    if (forecast_date.getDate() == current_date.getDate() + forecast_days) {\n        //next_day = next_day.concat(msg.payload[i]);\n        if (forecast_date.getHours() % 6 == 0) {\n            next_day = next_day.concat(msg.payload[i]);\n        }\n    } else if ((forecast_date.getDate() == current_date.getDate() + 2) && (forecast_date.getHours() == 0)) {\n        next_day = next_day.concat(msg.payload[i]);\n    }\n}\n\nreturn next_day;","outputs":5,"noerr":0,"initialize":"","finalize":"","x":380,"y":120,"wires":[[],[],[],[],[]]},{"id":"7c96309b.f8f69","type":"subflow:33f5e83a.90c548","z":"259c4f3c.ca9f9","name":"","env":[],"x":320,"y":240,"wires":[["59ec7af2.81c5d4","e22434ce.4c4638"],["79327a14.5e4994","57a7134.9e510ec"],["72c9ef87.1629","52980c92.4e0e54"],["f5cc37fc.7982d8","8d04f896.0c0638"],["35ae8af2.ad4ac6","ece8f5ba.661d48"]]},{"id":"59ec7af2.81c5d4","type":"ui_text","z":"259c4f3c.ca9f9","group":"c010c74a.fa5588","order":7,"width":"2","height":"2","name":"0_Uhr","label":"","format":"{{msg.main.temp}}","layout":"col-center","x":470,"y":80,"wires":[]},{"id":"5ccda27e.e9db2c","type":"ui_text","z":"259c4f3c.ca9f9","group":"c010c74a.fa5588","order":1,"width":"2","height":"1","name":"0_Uhr_Label","label":"0 Uhr","format":"","layout":"col-center","x":1150,"y":40,"wires":[]},{"id":"66b4c2ff.e42cac","type":"ui_text","z":"259c4f3c.ca9f9","group":"c010c74a.fa5588","order":2,"width":"2","height":"1","name":"6_Uhr_Label","label":"6 Uhr","format":"","layout":"col-center","x":1150,"y":80,"wires":[]},{"id":"8c527301.6dc9b","type":"ui_text","z":"259c4f3c.ca9f9","group":"c010c74a.fa5588","order":3,"width":"2","height":"1","name":"12_Uhr_Label","label":"12 Uhr","format":"","layout":"col-center","x":1160,"y":120,"wires":[]},{"id":"22885f91.baae1","type":"ui_text","z":"259c4f3c.ca9f9","group":"c010c74a.fa5588","order":10,"width":"2","height":"1","name":"18_Uhr_Label","label":"18 Uhr","format":"","layout":"col-center","x":1160,"y":160,"wires":[]},{"id":"27d3a605.000f7a","type":"ui_button","z":"259c4f3c.ca9f9","name":"0_Uhr_Icon","group":"c010c74a.fa5588","order":4,"width":"2","height":"2","passthru":false,"label":"{{payload}}","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":40,"wires":[[]]},{"id":"4c435892.860e68","type":"function","z":"259c4f3c.ca9f9","name":"","func":"icons = ['01d', '02d', '03d', '04d', '09d', '10d', '13d', '50d', '01n', '02n', '03n', '04n', '09n', '10n', '11n', '13n', '50n'];\n\nif (icons.includes(msg.payload)) {\n    icon = 'wi wi-owm-' + icons[icons.indexOf(msg.payload)] + ' wi-5x';\n    \n    if (msg.payload.includes('d')) {\n        msg.colour = '#dd9c2c';\n    } else if (msg.payload.includes('n')) {\n        msg.colour = '#918d87';\n    }\n    \n    msg.payload = icon;\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":40,"wires":[["2e676a8c.c0dc16"]]},{"id":"2e676a8c.c0dc16","type":"template","z":"259c4f3c.ca9f9","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<i class=\"{{payload}}\"></i>{{weather}}","output":"str","x":800,"y":40,"wires":[["27d3a605.000f7a"]]},{"id":"e22434ce.4c4638","type":"function","z":"259c4f3c.ca9f9","name":"","func":"return {payload : msg.weather[0].icon};","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":40,"wires":[["4c435892.860e68"]]},{"id":"79327a14.5e4994","type":"ui_text","z":"259c4f3c.ca9f9","group":"c010c74a.fa5588","order":8,"width":"2","height":"2","name":"6_Uhr","label":"","format":"{{msg.main.temp}}","layout":"col-center","x":470,"y":160,"wires":[]},{"id":"72c9ef87.1629","type":"ui_text","z":"259c4f3c.ca9f9","group":"c010c74a.fa5588","order":9,"width":"2","height":"2","name":"12_Uhr","label":"","format":"{{msg.main.temp}}","layout":"col-center","x":480,"y":240,"wires":[]},{"id":"f5cc37fc.7982d8","type":"ui_text","z":"259c4f3c.ca9f9","group":"c010c74a.fa5588","order":13,"width":"2","height":"2","name":"18_Uhr","label":"","format":"{{msg.main.temp}}","layout":"col-center","x":480,"y":320,"wires":[]},{"id":"772d3482.ba7c0c","type":"ui_button","z":"259c4f3c.ca9f9","name":"6_Uhr_Icon","group":"c010c74a.fa5588","order":5,"width":"2","height":"2","passthru":false,"label":"{{payload}}","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":120,"wires":[[]]},{"id":"6733254b.d190bc","type":"function","z":"259c4f3c.ca9f9","name":"","func":"icons = ['01d', '02d', '03d', '04d', '09d', '10d', '13d', '50d', '01n', '02n', '03n', '04n', '09n', '10n', '11n', '13n', '50n'];\n\nif (icons.includes(msg.payload)) {\n    icon = 'wi wi-owm-' + icons[icons.indexOf(msg.payload)] + ' wi-5x';\n    \n    if (msg.payload.includes('d')) {\n        msg.colour = '#dd9c2c';\n    } else if (msg.payload.includes('n')) {\n        msg.colour = '#918d87';\n    }\n    \n    msg.payload = icon;\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":120,"wires":[["fb98ffd7.12331"]]},{"id":"fb98ffd7.12331","type":"template","z":"259c4f3c.ca9f9","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<i class=\"{{payload}}\"></i>{{weather}}","output":"str","x":800,"y":120,"wires":[["772d3482.ba7c0c"]]},{"id":"57a7134.9e510ec","type":"function","z":"259c4f3c.ca9f9","name":"","func":"return {payload : msg.weather[0].icon};","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":120,"wires":[["6733254b.d190bc"]]},{"id":"50a9d95d.45a7b8","type":"ui_button","z":"259c4f3c.ca9f9","name":"12_Uhr_Icon","group":"c010c74a.fa5588","order":6,"width":"2","height":"2","passthru":false,"label":"{{payload}}","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":200,"wires":[[]]},{"id":"54f35002.ecb1d","type":"function","z":"259c4f3c.ca9f9","name":"","func":"icons = ['01d', '02d', '03d', '04d', '09d', '10d', '13d', '50d', '01n', '02n', '03n', '04n', '09n', '10n', '11n', '13n', '50n'];\n\nif (icons.includes(msg.payload)) {\n    icon = 'wi wi-owm-' + icons[icons.indexOf(msg.payload)] + ' wi-5x';\n    \n    if (msg.payload.includes('d')) {\n        msg.colour = '#dd9c2c';\n    } else if (msg.payload.includes('n')) {\n        msg.colour = '#918d87';\n    }\n    \n    msg.payload = icon;\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":200,"wires":[["4ebb0296.7458dc"]]},{"id":"4ebb0296.7458dc","type":"template","z":"259c4f3c.ca9f9","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<i class=\"{{payload}}\"></i>{{weather}}","output":"str","x":800,"y":200,"wires":[["50a9d95d.45a7b8"]]},{"id":"52980c92.4e0e54","type":"function","z":"259c4f3c.ca9f9","name":"","func":"return {payload : msg.weather[0].icon};","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":200,"wires":[["54f35002.ecb1d"]]},{"id":"9c4a5b01.366ba8","type":"ui_button","z":"259c4f3c.ca9f9","name":"18_Uhr_Icon","group":"c010c74a.fa5588","order":12,"width":"2","height":"2","passthru":false,"label":"{{payload}}","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":280,"wires":[[]]},{"id":"e6644451.8684c8","type":"function","z":"259c4f3c.ca9f9","name":"","func":"icons = ['01d', '02d', '03d', '04d', '09d', '10d', '13d', '50d', '01n', '02n', '03n', '04n', '09n', '10n', '11n', '13n', '50n'];\n\nif (icons.includes(msg.payload)) {\n    icon = 'wi wi-owm-' + icons[icons.indexOf(msg.payload)] + ' wi-5x';\n    \n    if (msg.payload.includes('d')) {\n        msg.colour = '#dd9c2c';\n    } else if (msg.payload.includes('n')) {\n        msg.colour = '#918d87';\n    }\n    \n    msg.payload = icon;\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":280,"wires":[["21ac5ab7.e34536"]]},{"id":"21ac5ab7.e34536","type":"template","z":"259c4f3c.ca9f9","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<i class=\"{{payload}}\"></i>{{weather}}","output":"str","x":800,"y":280,"wires":[["9c4a5b01.366ba8"]]},{"id":"8d04f896.0c0638","type":"function","z":"259c4f3c.ca9f9","name":"","func":"return {payload : msg.weather[0].icon};","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":280,"wires":[["e6644451.8684c8"]]},{"id":"ece8f5ba.661d48","type":"ui_text","z":"259c4f3c.ca9f9","group":"c010c74a.fa5588","order":13,"width":"2","height":"2","name":"24_Uhr","label":"","format":"{{msg.main.temp}}","layout":"col-center","x":480,"y":400,"wires":[]},{"id":"aad1b9dd.fcae98","type":"ui_button","z":"259c4f3c.ca9f9","name":"24_Uhr_Icon","group":"c010c74a.fa5588","order":12,"width":"2","height":"2","passthru":false,"label":"{{payload}}","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":360,"wires":[[]]},{"id":"cbb94f1b.34874","type":"function","z":"259c4f3c.ca9f9","name":"","func":"icons = ['01d', '02d', '03d', '04d', '09d', '10d', '13d', '50d', '01n', '02n', '03n', '04n', '09n', '10n', '11n', '13n', '50n'];\n\nif (icons.includes(msg.payload)) {\n    icon = 'wi wi-owm-' + icons[icons.indexOf(msg.payload)] + ' wi-5x';\n    \n    if (msg.payload.includes('d')) {\n        msg.colour = '#dd9c2c';\n    } else if (msg.payload.includes('n')) {\n        msg.colour = '#918d87';\n    }\n    \n    msg.payload = icon;\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":360,"wires":[["86e69fcf.95cc7"]]},{"id":"86e69fcf.95cc7","type":"template","z":"259c4f3c.ca9f9","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<i class=\"{{payload}}\"></i>{{weather}}","output":"str","x":800,"y":360,"wires":[["aad1b9dd.fcae98"]]},{"id":"35ae8af2.ad4ac6","type":"function","z":"259c4f3c.ca9f9","name":"","func":"return {payload : msg.weather[0].icon};","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":360,"wires":[["cbb94f1b.34874"]]},{"id":"e68767c1.a6e478","type":"ui_text","z":"259c4f3c.ca9f9","group":"c010c74a.fa5588","order":10,"width":"2","height":"1","name":"24_Uhr_Label","label":"24 Uhr","format":"","layout":"col-center","x":1160,"y":200,"wires":[]},{"id":"ef67456a.c46738","type":"comment","z":"7303a768.70b7a8","name":"Verbrauch Shelly-Dimmer/Rolladen/Stecker","info":"","x":220,"y":3300,"wires":[]},{"id":"44e81113.92856","type":"function","z":"7303a768.70b7a8","name":"","func":"var total_power = 0;\nvar Shelly_Lichter = global.get('Shelly_Lichter');\nvar Shelly_Roll = global.get('Shelly_Rolladen');\nvar Shelly_Stecker = global.get('Shelly_Stecker');\n\nfor (var i = 0; i < Shelly_Lichter.length; i++) {\n    total_power += parseInt(global.get(Shelly_Lichter[i] + '_power') || 0);\n}\nfor (i = 0; i < Shelly_Roll.length; i++) {\n    total_power += parseInt(global.get(Shelly_Roll[i] + '_power') || 0);\n}\n\nfor (i = 0; i < Shelly_Stecker.length; i++) {\n    total_power += parseInt(global.get(Shelly_Stecker[i] + '_power') || 0);\n}\nmsg.total_power = total_power;\nglobal.set('total_power', total_power)\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":320,"y":3360,"wires":[[]]},{"id":"7e4f418.8c56fc","type":"inject","z":"7303a768.70b7a8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":150,"y":3360,"wires":[["44e81113.92856"]]},{"id":"15f77ffb.8f61d","type":"function","z":"7303a768.70b7a8","name":"Power","func":"global.set(msg.target + \"_power\", parseInt(msg.payload));\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":570,"y":1920,"wires":[[]]},{"id":"d76d3338.b1914","type":"comment","z":"66e4af74.b6da2","name":"Remote","info":"","x":1730,"y":1340,"wires":[]},{"id":"d5ccd80b.1f6a38","type":"comment","z":"66e4af74.b6da2","name":"Sonnenstand (Info)","info":"","x":1770,"y":1080,"wires":[]},{"id":"fad0a8a.ad00258","type":"comment","z":"66e4af74.b6da2","name":"Beamer (Home)","info":"","x":1760,"y":2500,"wires":[]},{"id":"d000a4fc.04eed8","type":"change","z":"66e4af74.b6da2","name":"Gesamt","rules":[{"t":"set","p":"payload","pt":"msg","to":"total_power","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1940,"y":500,"wires":[["d3e67ef3.85283","a679574b.989fa8"]]},{"id":"d3e67ef3.85283","type":"ui_gauge","z":"66e4af74.b6da2","name":"Verbrauch_Gauge","group":"25aae820.533398","order":1,"width":6,"height":6,"gtype":"gage","title":"Gesamtverbrauch","label":"Watt","format":"{{value}}","min":0,"max":"2000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"800","seg2":"1500","x":2310,"y":480,"wires":[]},{"id":"a679574b.989fa8","type":"ui_chart","z":"66e4af74.b6da2","name":"Verbrauch_Chart","group":"25aae820.533398","order":2,"width":6,"height":6,"label":"Verbrauch","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"2000","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#44ff00","#5d8eea","#ff7f0e","#f42f2f","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2310,"y":520,"wires":[[]]},{"id":"e18494ac.c846d8","type":"ui_button","z":"66e4af74.b6da2","name":"toggle","group":"e55d8ea9.14654","order":2,"width":"2","height":"2","passthru":false,"label":"","tooltip":"Beamer","color":"","bgcolor":"{{background}}","icon":"fa-2x fa-power-off","payload":"triggered","payloadType":"str","topic":"","x":2350,"y":2580,"wires":[["42f1c0cb.b5fc3"]]},{"id":"42f1c0cb.b5fc3","type":"switch","z":"66e4af74.b6da2","name":"","property":"Beamer_on","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":2490,"y":2580,"wires":[["270c6610.1d84fa"],["bfaea2a3.08c0c"]]},{"id":"67241d89.3b0c64","type":"inject","z":"66e4af74.b6da2","name":"","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Beamer_on","payloadType":"global","x":1790,"y":2580,"wires":[["56680ee8.251a9"]]},{"id":"56680ee8.251a9","type":"switch","z":"66e4af74.b6da2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1970,"y":2580,"wires":[["30b26404.cc2d4c"],["101c5aee.7bea75"]]},{"id":"30b26404.cc2d4c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"#e6c832","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2160,"y":2560,"wires":[["e18494ac.c846d8"]]},{"id":"101c5aee.7bea75","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"BLACK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2160,"y":2600,"wires":[["e18494ac.c846d8"]]},{"id":"270c6610.1d84fa","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"turn_off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2660,"y":2560,"wires":[["101c5aee.7bea75","df32edbc.2bed1"]]},{"id":"bfaea2a3.08c0c","type":"change","z":"66e4af74.b6da2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"turn_on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2660,"y":2600,"wires":[["30b26404.cc2d4c","df32edbc.2bed1"]]},{"id":"df32edbc.2bed1","type":"mqtt out","z":"66e4af74.b6da2","name":"","topic":"Hausautomation/ir_server","qos":"0","retain":"false","broker":"cfb77cfe.81f87","x":2910,"y":2580,"wires":[]},{"id":"63d5005e.0f5a1","type":"function","z":"7303a768.70b7a8","name":"","func":"global.set('calendar_events', msg.payload);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":460,"y":2440,"wires":[[]]},{"id":"e1e6e86c.0c653","type":"function","z":"66e4af74.b6da2","name":"TempMin","func":"global.set('TemperaturMin', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"// Code added here will be run once\n// whenever the node is deployed.\nglobal.set(('TemperaturMin'), global.get('TemperaturMin') || 0);\n","finalize":"","x":2080,"y":280,"wires":[["5a6c878.9366178"]]},{"id":"8681a825.36d848","type":"function","z":"66e4af74.b6da2","name":"TempMax","func":"global.set('TemperaturMax', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"// Code added here will be run once\n// whenever the node is deployed.\nglobal.set(('TemperaturMax'), global.get('TemperaturMax') || 0);","finalize":"","x":2080,"y":240,"wires":[["d01e0bd5.f53638"]]},{"id":"7714ead5.cae924","type":"function","z":"6715eb60.6ca494","name":"Kälteschutz","func":"var ctime = (\"0\" + msg.now.getHours()).slice(-2) + ':' + (\"0\" + msg.now.getMinutes()).slice(-2);\n\n//node.warn(ctime);\n\nif ((ctime > \"22:30\") && (ctime < \"22:32\")) {\n    if (global.get('SchlaZiRoll2_pos') > 97) { // nur wenn noch nicht manuell geschlossen\n        msg.topic = 'SchlaZiRoll2';\n        msg.payload = global.get('TemperaturMin');\n        return msg;  \n    }\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":270,"y":640,"wires":[["427f69bc.12c138"]]},{"id":"427f69bc.12c138","type":"range","z":"6715eb60.6ca494","minin":"-5","maxin":"10","minout":"60","maxout":"75","action":"scale","round":true,"property":"payload","name":"-5° - +10°","x":440,"y":640,"wires":[["e44ddbf0.2ce738"]]},{"id":"78b40199.4b073","type":"inject","z":"259c4f3c.ca9f9","name":"","props":[{"p":"payload"},{"p":"target","v":"Test","vt":"str"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"shellies/Test/roller/0/power","payload":"{\"status\":true,\"consumption\":63,\"brightness\":75}","payloadType":"str","x":180,"y":1380,"wires":[["47b953d4.15bbbc","463cec44.07ed84","edd14eef.4ad0a"]]},{"id":"47b953d4.15bbbc","type":"function","z":"259c4f3c.ca9f9","name":"","func":"global.set('shelly_keys', ['power', 'status', 'brightness']);","outputs":1,"noerr":0,"initialize":"","finalize":"","x":360,"y":1340,"wires":[[]]},{"id":"463cec44.07ed84","type":"debug","z":"259c4f3c.ca9f9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":350,"y":1420,"wires":[]},{"id":"e44ddbf0.2ce738","type":"link out","z":"6715eb60.6ca494","name":"von switch WoZiDimmer","links":["84cb51c2.07394"],"x":555,"y":640,"wires":[]},{"id":"edd14eef.4ad0a","type":"function","z":"259c4f3c.ca9f9","name":"","func":"var keys = global.get('shelly_keys');\nvar device = global.get(msg.target) || {};\nvar json_object = false;\n\nfunction IsJsonString(str) {\n    try {\n        JSON.parse(str);\n    } catch (e) {\n        return false;\n    }\n    return true;\n}\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\nif (IsJsonString(msg.payload)) {\n    msg.payload = JSON.parse(msg.payload);\n    json_object = true;\n    \n}\n\nif ((Array.isArray(msg.payload)) || (json_object)) {\n    node.warn('yes');\n    for (var i=0; i < keys.length; i++) {\n        if ('consumption' in msg.payload) {\n            msg.payload.power = msg.payload.consumption;\n        }\n        if ('ison' in msg.payload) {\n            msg.payload.status = msg.payload.ison;\n        }\n        if (keys[i] in msg.payload) {\n            //node.warn(keys[i] + ' : ' + msg.payload[keys[i]]);\n            device[keys[i]] = msg.payload[keys[i]];\n        }\n    }\n} else {\n    node.warn('no');\n    for (i=0; i < keys.length; i++) {\n        if (msg.topic.endsWith('/relay/0')) {\n            msg.topic = 'shellies/' + msg.target + '/relay/0/status'\n            if (msg.payload == 'on') {\n                msg.payload = true;\n            } else if (msg.payload == 'off') {\n                msg.payload = false;\n            }\n        } else if (msg.topic.endsWith('/roller/0')) {\n            msg.topic = 'shellies/' + msg.target + '/roller/0/status'\n        }\n        if (msg.topic.includes(keys[i])) {\n            if (isNaN(parseInt(msg.payload))) {\n                device[keys[i]] = msg.payload;\n            } else {\n                device[keys[i]] = parseInt(msg.payload);\n            }\n        }\n    }\n}\n\nglobal.set(msg.target, device);\nreturn device","outputs":1,"noerr":0,"initialize":"","finalize":"","x":360,"y":1380,"wires":[["463cec44.07ed84"]]},{"id":"22268bd9.bfbeb4","type":"function","z":"7303a768.70b7a8","name":"Attribute für Shelly","func":"var keys = global.get('shelly_keys');\nvar device = global.get(msg.target) || {};\nvar json_object = false;\n\nfunction IsJsonString(str) {\n    try {\n        JSON.parse(str);\n    } catch (e) {\n        return false;\n    }\n    return true;\n}\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\nif ((IsJsonString(msg.payload)) && (msg.payload.includes(':')) && (msg.payload.includes('{'))) {\n    msg.payload = JSON.parse(msg.payload);\n    json_object = true;\n    \n}\n\nif ((Array.isArray(msg.payload)) || (json_object)) {\n    //node.warn('yes');\n    for (var i=0; i < keys.length; i++) {\n        if ('consumption' in msg.payload) {\n            msg.payload.power = msg.payload.consumption;\n        }\n        if ('ison' in msg.payload) {\n            msg.payload.status = msg.payload.ison;\n        }\n        if (keys[i] in msg.payload) {\n            //node.warn(keys[i] + ' : ' + msg.payload[keys[i]]);\n            device[keys[i]] = msg.payload[keys[i]];\n        }\n    }\n} else {\n    //node.warn('no');\n    for (i=0; i < keys.length; i++) {\n        if (msg.topic.endsWith('/relay/0')) {\n            msg.topic = 'shellies/' + msg.target + '/relay/0/status'\n            if (msg.payload == 'on') {\n                msg.payload = true;\n            } else if (msg.payload == 'off') {\n                msg.payload = false;\n            }\n        } else if (msg.topic.endsWith('/roller/0')) {\n            msg.topic = 'shellies/' + msg.target + '/roller/0/status'\n        }\n        if (msg.topic.includes(keys[i])) {\n            if (isNaN(parseInt(msg.payload))) {\n                device[keys[i]] = msg.payload;\n            } else {\n                device[keys[i]] = parseInt(msg.payload);\n            }\n        }\n    }\n}\n\nglobal.set(msg.target, device);\nreturn {target : msg.target, payload : device}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":610,"y":1760,"wires":[[]]},{"id":"a7f1a676.cd8738","type":"function","z":"7303a768.70b7a8","name":"Attribute für Shelly","func":"var keys = global.get('shelly_keys');\nvar device = global.get(msg.target) || {};\nvar json_object = false;\n\nfunction IsJsonString(str) {\n    try {\n        JSON.parse(str);\n    } catch (e) {\n        return false;\n    }\n    return true;\n}\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\nif ((IsJsonString(msg.payload)) && (msg.payload.includes(':')) && (msg.payload.includes('{'))) {\n    msg.payload = JSON.parse(msg.payload);\n    json_object = true;\n    \n}\n\nif ((Array.isArray(msg.payload)) || (json_object)) {\n    //node.warn('yes');\n    for (var i=0; i < keys.length; i++) {\n        if ('consumption' in msg.payload) {\n            msg.payload.power = msg.payload.consumption;\n        }\n        if ('ison' in msg.payload) {\n            msg.payload.status = msg.payload.ison;\n        }\n        if (keys[i] in msg.payload) {\n            //node.warn(keys[i] + ' : ' + msg.payload[keys[i]]);\n            device[keys[i]] = msg.payload[keys[i]];\n        } else {\n            if ('rollers' in msg.payload) {\n                for (var j = 0; j < msg.payload.rollers.length; j++) {\n                    if ('last_direction' in msg.payload.rollers[j]) {\n                        msg.payload.rollers[j].lastdir = msg.payload.rollers[j].last_direction;\n                    }\n                    if ('current_pos' in msg.payload.rollers[j]) {\n                        msg.payload.rollers[j].pos = msg.payload.rollers[j].current_pos;\n                    }\n                    if ('state' in msg.payload.rollers[j]) {\n                        msg.payload.rollers[j].status = msg.payload.rollers[j].state;\n                    }\n                    //node.warn(msg.payload.rollers[j])\n                    if (keys[i] in msg.payload.rollers[j]) {\n                        device[keys[i]] = msg.payload.rollers[j][keys[i]];\n                    }\n                }\n            } else if ('lights' in msg.payload) {\n                for (j = 0; j < msg.payload.lights.length; j++) {\n                    if ('ison' in msg.payload.lights[j]) {\n                        msg.payload.lights[j].status = msg.payload.lights[j].ison;\n                    }\n                    if (keys[i] in msg.payload.lights[j]) {\n                        device[keys[i]] = msg.payload.lights[j][keys[i]];\n                        if ((keys[i] == 'brightness') && (msg.payload.lights[j][keys[i]] < 100)) {\n                            device[\"brightness_save\"] = msg.payload.lights[j][keys[i]];\n                        }\n                    }\n                }\n                if ('meters' in msg.payload) {\n                    for (j = 0; j < msg.payload.meters.length; j++) {\n                        if (keys[i] in msg.payload.meters[j]) {\n                            device[keys[i]] = msg.payload.meters[j][keys[i]];\n                        }\n                    }\n                }\n            }\n        }\n    }\n} else {\n    node.warn('no');\n    for (i=0; i < keys.length; i++) {\n        if (msg.topic.endsWith('/relay/0')) {\n            msg.topic = 'shellies/' + msg.target + '/relay/0/status'\n            if (msg.payload == 'on') {\n                msg.payload = true;\n            } else if (msg.payload == 'off') {\n                msg.payload = false;\n            }\n        } else if (msg.topic.endsWith('/roller/0')) {\n            msg.topic = 'shellies/' + msg.target + '/roller/0/status'\n        }\n        if (msg.topic.includes(keys[i])) {\n            if (isNaN(parseInt(msg.payload))) {\n                device[keys[i]] = msg.payload;\n            } else {\n                device[keys[i]] = parseInt(msg.payload);\n            }\n        }\n    }\n}\n\nglobal.set(msg.target, device);\nreturn {target : msg.target, payload : device}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1870,"y":1780,"wires":[["41a5b514.79178c"]]},{"id":"ac0f4430.00e9e8","type":"function","z":"7303a768.70b7a8","name":"","func":"msg.payload = JSON.parse(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1540,"y":1880,"wires":[["7b9b39b6.54cb68"]]},{"id":"1501e005.72f1b","type":"switch","z":"7303a768.70b7a8","name":"","property":"url","propertyType":"msg","rules":[{"t":"cont","v":"Beamer","vt":"str"},{"t":"cont","v":"WaschMaschine","vt":"str"},{"t":"cont","v":"http","vt":"str"}],"checkall":"false","repair":false,"outputs":3,"x":1690,"y":1800,"wires":[[],[],["a7f1a676.cd8738"]]},{"id":"5cba68f1.c37568","type":"ui_text","z":"259c4f3c.ca9f9","group":"9a541a36.f1b9c8","order":2,"width":"2","height":"2","name":"","label":"Watt","format":"{{msg.payload}}","layout":"row-center","x":930,"y":700,"wires":[]},{"id":"24e2a80d.c38ed8","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.brightness","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":840,"wires":[["277e11c6.ec764e"]]},{"id":"c36012ff.82f","type":"debug","z":"7303a768.70b7a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1390,"y":1920,"wires":[]},{"id":"9fa76d60.32c1c","type":"switch","z":"7303a768.70b7a8","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"neq","v":"EHOSTUNREACH","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1390,"y":1880,"wires":[["ac0f4430.00e9e8","1501e005.72f1b"]]},{"id":"cadd9ddb.8515e","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.pos","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":900,"wires":[["3c358695.3b18fa"]]},{"id":"4cad3f2.008c9c","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.power","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":700,"wires":[["5cba68f1.c37568"]]},{"id":"5d336346.62444c","type":"comment","z":"7303a768.70b7a8","name":"MQTT-Update-RECV (Meross/Arduino/Elements)","info":"Empfängt Statusupdates von oben genannten Geräten über MQTT durch Python-Script","x":3440,"y":1820,"wires":[]},{"id":"76e4de12.2b3bc","type":"comment","z":"7303a768.70b7a8","name":"Google-Update-RECV (Rolladen)","info":"Kommandos von Google Cloud empfangen","x":1090,"y":2060,"wires":[]},{"id":"e9c1ddb1.6b8e9","type":"inject","z":"6715eb60.6ca494","name":"open","props":[{"p":"payload","v":"","vt":"str"},{"p":"topic","v":"","vt":"string"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":110,"y":980,"wires":[["f339d74a.d805b8"]]},{"id":"f339d74a.d805b8","type":"change","z":"6715eb60.6ca494","name":"WoZiRoll1 open","rules":[{"t":"set","p":"payload","pt":"msg","to":"close","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"WoZiRoll1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":980,"wires":[["a16b3620.f3cd88"]]},{"id":"2032e476.7594ac","type":"inject","z":"6715eb60.6ca494","name":"close","props":[{"p":"payload","v":"","vt":"str"},{"p":"topic","v":"","vt":"string"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":110,"y":1020,"wires":[["91131684.9f8548"]]},{"id":"91131684.9f8548","type":"change","z":"6715eb60.6ca494","name":"BueroRoll close","rules":[{"t":"set","p":"payload","pt":"msg","to":"close","tot":"str"},{"t":"set","p":"target","pt":"msg","to":"BueroRoll","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":1020,"wires":[["a16b3620.f3cd88"]]},{"id":"a16b3620.f3cd88","type":"link out","z":"6715eb60.6ca494","name":"from test (main)","links":["84cb51c2.07394"],"x":415,"y":1000,"wires":[]},{"id":"3fd16220.12e3ee","type":"comment","z":"6715eb60.6ca494","name":"Test (Main)","info":"","x":100,"y":920,"wires":[]},{"id":"d5d6ff08.86e1b","type":"change","z":"259c4f3c.ca9f9","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"FloZiRoll","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":920,"wires":[["cadd9ddb.8515e","fd8d97e3.efbf38"]]}]
